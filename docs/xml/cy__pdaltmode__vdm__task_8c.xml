<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.14">
  <compounddef id="cy__pdaltmode__vdm__task_8c" kind="file" language="C++">
    <compoundname>cy_pdaltmode_vdm_task.c</compoundname>
    <includes refid="cy__pdaltmode__defines_8h" local="yes">cy_pdaltmode_defines.h</includes>
    <includes local="yes">cy_pdstack_dpm.h</includes>
    <includes local="yes">cy_pdutils.h</includes>
    <includes local="yes">cy_pdutils_sw_timer.h</includes>
    <includes local="yes">cy_pdstack_timer_id.h</includes>
    <includes refid="cy__pdaltmode__timer__id_8h" local="yes">cy_pdaltmode_timer_id.h</includes>
    <includes refid="cy__pdaltmode__hw_8h" local="yes">cy_pdaltmode_hw.h</includes>
    <includes refid="cy__pdaltmode__vdm__task_8h" local="yes">cy_pdaltmode_vdm_task.h</includes>
    <includes refid="cy__pdaltmode__mngr_8h" local="yes">cy_pdaltmode_mngr.h</includes>
    <includes refid="cy__pdaltmode__usb4_8h" local="yes">cy_pdaltmode_usb4.h</includes>
    <incdepgraph>
      <node id="75">
        <label>cy_pdstack_timer_id.h</label>
      </node>
      <node id="71">
        <label>cy_pdaltmode_vdm_task.c</label>
        <link refid="cy__pdaltmode__vdm__task_8c"/>
        <childnode refid="72" relation="include">
        </childnode>
        <childnode refid="73" relation="include">
        </childnode>
        <childnode refid="74" relation="include">
        </childnode>
        <childnode refid="75" relation="include">
        </childnode>
      </node>
      <node id="73">
        <label>cy_pdutils.h</label>
      </node>
      <node id="74">
        <label>cy_pdutils_sw_timer.h</label>
      </node>
      <node id="72">
        <label>cy_pdstack_dpm.h</label>
      </node>
    </incdepgraph>
      <sectiondef kind="var">
      <memberdef kind="variable" id="cy__pdaltmode__vdm__task_8c_1ae8755b9fe530f0fb9a8bbd209055103d" prot="public" static="yes" mutable="no">
        <type><ref refid="structcy__stc__pdaltmode__vdm__task__status__t" kindref="compound">cy_stc_pdaltmode_vdm_task_status_t</ref></type>
        <definition>cy_stc_pdaltmode_vdm_task_status_t vdmMngrStatus[NO_OF_TYPEC_PORTS]</definition>
        <argsstring>[NO_OF_TYPEC_PORTS]</argsstring>
        <name>vdmMngrStatus</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="cy_pdaltmode_vdm_task.c" line="38" column="1" bodyfile="cy_pdaltmode_vdm_task.c" bodystart="38" bodyend="-1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="func">
      <memberdef kind="function" id="cy__pdaltmode__vdm__task_8c_1a2d6db1c9149980aacf18f7b46bb2430b" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>static void Cy_PdAltMode_VdmTask_RecCbk</definition>
        <argsstring>(cy_stc_pdstack_context_t *ptrPdStackContext, cy_en_pdstack_resp_status_t status, const cy_stc_pdstack_pd_packet_t *recVdm)</argsstring>
        <name>Cy_PdAltMode_VdmTask_RecCbk</name>
        <param>
          <type>cy_stc_pdstack_context_t *</type>
          <declname>ptrPdStackContext</declname>
        </param>
        <param>
          <type>cy_en_pdstack_resp_status_t</type>
          <declname>status</declname>
        </param>
        <param>
          <type>const cy_stc_pdstack_pd_packet_t *</type>
          <declname>recVdm</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="cy_pdaltmode_vdm_task.c" line="32" column="1" bodyfile="cy_pdaltmode_vdm_task.c" bodystart="286" bodyend="491"/>
      </memberdef>
      <memberdef kind="function" id="cy__pdaltmode__vdm__task_8c_1aceee800834a988d5813564830c2ad324" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga399c1777f494368601cad31a40afca9c" kindref="member">cy_en_pdaltmode_vdm_task_t</ref></type>
        <definition>static cy_en_pdaltmode_vdm_task_t Cy_PdAltMode_VdmTask_SendVdm</definition>
        <argsstring>(cy_stc_pdaltmode_context_t *ptrAltModeContext)</argsstring>
        <name>Cy_PdAltMode_VdmTask_SendVdm</name>
        <param>
          <type><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref> *</type>
          <declname>ptrAltModeContext</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="cy_pdaltmode_vdm_task.c" line="35" column="1" bodyfile="cy_pdaltmode_vdm_task.c" bodystart="1730" bodyend="1794"/>
      </memberdef>
      <memberdef kind="function" id="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga8da1801387db0bfc422d88ab713ee765" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="structcy__stc__pdaltmode__vdm__task__status__t" kindref="compound">cy_stc_pdaltmode_vdm_task_status_t</ref> *</type>
        <definition>cy_stc_pdaltmode_vdm_task_status_t* Cy_PdAltMode_VdmTask_GetMngrStatus</definition>
        <argsstring>(uint8_t port)</argsstring>
        <name>Cy_PdAltMode_VdmTask_GetMngrStatus</name>
        <param>
          <type>uint8_t</type>
          <declname>port</declname>
        </param>
        <briefdescription>
<para>Return VDM manager status pointer. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>port</parametername>
</parameternamelist>
<parameterdescription>
<para>Selected port</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Returns pointer to VDM manager status structure </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="cy_pdaltmode_vdm_task.c" line="40" column="1" bodyfile="cy_pdaltmode_vdm_task.c" bodystart="40" bodyend="43"/>
      </memberdef>
      <memberdef kind="function" id="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga2ef6ffe7eff6a19712066f4c3d9bbddc" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void Cy_PdAltMode_VdmTask_Enable</definition>
        <argsstring>(cy_stc_pdaltmode_context_t *ptrAltModeContext)</argsstring>
        <name>Cy_PdAltMode_VdmTask_Enable</name>
        <param>
          <type><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref> *</type>
          <declname>ptrAltModeContext</declname>
        </param>
        <briefdescription>
<para>Enables VDM task manager functionality. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ptrAltModeContext</parametername>
</parameternamelist>
<parameterdescription>
<para>PD Alt Mode Library Context pointer</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>None </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="cy_pdaltmode_vdm_task.c" line="45" column="1" bodyfile="cy_pdaltmode_vdm_task.c" bodystart="45" bodyend="80"/>
      </memberdef>
      <memberdef kind="function" id="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gae1f7226db52a7cdbb4f60ab893353b01" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>ATTRIBUTES_ALT_MODE <ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga399c1777f494368601cad31a40afca9c" kindref="member">cy_en_pdaltmode_vdm_task_t</ref></type>
        <definition>ATTRIBUTES_ALT_MODE cy_en_pdaltmode_vdm_task_t Cy_PdAltMode_VdmTask_Init</definition>
        <argsstring>(cy_stc_pdaltmode_context_t *ptrAltModeContext)</argsstring>
        <name>Cy_PdAltMode_VdmTask_Init</name>
        <param>
          <type><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref> *</type>
          <declname>ptrAltModeContext</declname>
        </param>
        <briefdescription>
<para>Initialize VDM task manager handling. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ptrAltModeContext</parametername>
</parameternamelist>
<parameterdescription>
<para>PD Alt Mode Library Context pointer</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Next VDM manager task </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="cy_pdaltmode_vdm_task.c" line="82" column="1" bodyfile="cy_pdaltmode_vdm_task.c" bodystart="82" bodyend="115"/>
      </memberdef>
      <memberdef kind="function" id="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga5be3659995fa9a8bba055bd160b2ec41" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>ATTRIBUTES_ALT_MODE bool</type>
        <definition>ATTRIBUTES_ALT_MODE bool Cy_PdAltMode_VdmTask_IsIdle</definition>
        <argsstring>(cy_stc_pdaltmode_context_t *ptrAltModeContext)</argsstring>
        <name>Cy_PdAltMode_VdmTask_IsIdle</name>
        <param>
          <type><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref> *</type>
          <declname>ptrAltModeContext</declname>
        </param>
        <briefdescription>
<para>Check whether the VDM task for the port is idle. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ptrAltModeContext</parametername>
</parameternamelist>
<parameterdescription>
<para>PD Alt Mode Library Context pointer</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>True is VDM Task Idle </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="cy_pdaltmode_vdm_task.c" line="117" column="1" bodyfile="cy_pdaltmode_vdm_task.c" bodystart="117" bodyend="131"/>
      </memberdef>
      <memberdef kind="function" id="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gab6c935c30c71fd0e04c90c3298f787fa" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void Cy_PdAltMode_VdmTask_Manager</definition>
        <argsstring>(cy_stc_pdaltmode_context_t *ptrAltModeContext)</argsstring>
        <name>Cy_PdAltMode_VdmTask_Manager</name>
        <param>
          <type><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref> *</type>
          <declname>ptrAltModeContext</declname>
        </param>
        <briefdescription>
<para>Main VDM task manager function. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ptrAltModeContext</parametername>
</parameternamelist>
<parameterdescription>
<para>PD Alt Mode Library Context pointer</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>None </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="cy_pdaltmode_vdm_task.c" line="133" column="1" bodyfile="cy_pdaltmode_vdm_task.c" bodystart="133" bodyend="238"/>
      </memberdef>
      <memberdef kind="function" id="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga8051f3f664de29ce2bec592dff75345f" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>ATTRIBUTES_ALT_MODE bool</type>
        <definition>ATTRIBUTES_ALT_MODE bool Cy_PdAltMode_VdmTask_RetryCheck</definition>
        <argsstring>(cy_stc_pdaltmode_context_t *ptrAltModeContext, cy_en_pdaltmode_fail_status_t failStat)</argsstring>
        <name>Cy_PdAltMode_VdmTask_RetryCheck</name>
        <param>
          <type><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref> *</type>
          <declname>ptrAltModeContext</declname>
        </param>
        <param>
          <type><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga8ad0f571a865b8fb10fcdc4ea756a05b" kindref="member">cy_en_pdaltmode_fail_status_t</ref></type>
          <declname>failStat</declname>
        </param>
        <briefdescription>
<para>Check if failed VDM has to be re-sent. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ptrAltModeContext</parametername>
</parameternamelist>
<parameterdescription>
<para>PD Alt Mode Library Context pointer</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>failStat</parametername>
</parameternamelist>
<parameterdescription>
<para>Failure root cause status</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>True if VDM re-send is needed, otherwise returns false. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="cy_pdaltmode_vdm_task.c" line="240" column="1" bodyfile="cy_pdaltmode_vdm_task.c" bodystart="240" bodyend="270"/>
      </memberdef>
      <memberdef kind="function" id="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga1f966ab56ff73f1d69b8752c1a9d9330" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>ATTRIBUTES_ALT_MODE void</type>
        <definition>ATTRIBUTES_ALT_MODE void Cy_PdAltMode_VdmTask_SetVdmFailed</definition>
        <argsstring>(cy_stc_pdaltmode_context_t *ptrAltModeContext, cy_en_pdaltmode_fail_status_t failStat)</argsstring>
        <name>Cy_PdAltMode_VdmTask_SetVdmFailed</name>
        <param>
          <type><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref> *</type>
          <declname>ptrAltModeContext</declname>
        </param>
        <param>
          <type><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga8ad0f571a865b8fb10fcdc4ea756a05b" kindref="member">cy_en_pdaltmode_fail_status_t</ref></type>
          <declname>failStat</declname>
        </param>
        <briefdescription>
<para>Set received VDM response command as failed. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ptrAltModeContext</parametername>
</parameternamelist>
<parameterdescription>
<para>PD Alt Mode Library Context pointer</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>failStat</parametername>
</parameternamelist>
<parameterdescription>
<para>Failure root cause status</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>True if VDM re-send is needed, otherwise returns false. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="cy_pdaltmode_vdm_task.c" line="272" column="1" bodyfile="cy_pdaltmode_vdm_task.c" bodystart="272" bodyend="283"/>
      </memberdef>
      <memberdef kind="function" id="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga7290b6708379548ab1896067d82b4e34" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>ATTRIBUTES_ALT_MODE bool</type>
        <definition>ATTRIBUTES_ALT_MODE bool Cy_PdAltMode_VdmTask_GotoDiscSvid</definition>
        <argsstring>(cy_stc_pdaltmode_context_t *ptrAltModeContext)</argsstring>
        <name>Cy_PdAltMode_VdmTask_GotoDiscSvid</name>
        <param>
          <type><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref> *</type>
          <declname>ptrAltModeContext</declname>
        </param>
        <briefdescription>
<para>Initiate Discovery SVID process. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ptrAltModeContext</parametername>
</parameternamelist>
<parameterdescription>
<para>PD Alt Mode Library Context pointer</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>True if Discovery SVID process can be initiated, otherwise returns false. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="cy_pdaltmode_vdm_task.c" line="746" column="1" bodyfile="cy_pdaltmode_vdm_task.c" bodystart="746" bodyend="796"/>
      </memberdef>
      <memberdef kind="function" id="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga0779fd0bc9432201c398f1a27ac5b270" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>ATTRIBUTES_ALT_MODE void</type>
        <definition>ATTRIBUTES_ALT_MODE void Cy_PdAltMode_VdmTask_SetDiscParam</definition>
        <argsstring>(cy_stc_pdaltmode_context_t *ptrAltModeContext, uint8_t sop, cy_en_pdstack_std_vdm_cmd_t cmd)</argsstring>
        <name>Cy_PdAltMode_VdmTask_SetDiscParam</name>
        <param>
          <type><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref> *</type>
          <declname>ptrAltModeContext</declname>
        </param>
        <param>
          <type>uint8_t</type>
          <declname>sop</declname>
        </param>
        <param>
          <type>cy_en_pdstack_std_vdm_cmd_t</type>
          <declname>cmd</declname>
        </param>
        <briefdescription>
<para>Prepare VDM Discovery message VDO. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ptrAltModeContext</parametername>
</parameternamelist>
<parameterdescription>
<para>PD Alt Mode Library Context pointer</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>sop</parametername>
</parameternamelist>
<parameterdescription>
<para>SOP/SOP_PRIME parameter to define UFP/Cable will receive Discovery VDM</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>cmd</parametername>
</parameternamelist>
<parameterdescription>
<para>Disc ID/ Disc SVID command</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>None </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="cy_pdaltmode_vdm_task.c" line="798" column="1" bodyfile="cy_pdaltmode_vdm_task.c" bodystart="798" bodyend="809"/>
      </memberdef>
      <memberdef kind="function" id="cy__pdaltmode__vdm__task_8c_1ab8ca20eceb42a41e337d100518b11864" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>ATTRIBUTES_ALT_MODE void</type>
        <definition>static ATTRIBUTES_ALT_MODE void Cy_PdAltMode_VdmTask_UpdateUsbSupportVars</definition>
        <argsstring>(cy_stc_pdaltmode_context_t *ptrAltModeContext, bool ufp_ack)</argsstring>
        <name>Cy_PdAltMode_VdmTask_UpdateUsbSupportVars</name>
        <param>
          <type><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref> *</type>
          <declname>ptrAltModeContext</declname>
        </param>
        <param>
          <type>bool</type>
          <declname>ufp_ack</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="cy_pdaltmode_vdm_task.c" line="811" column="1" bodyfile="cy_pdaltmode_vdm_task.c" bodystart="811" bodyend="860"/>
      </memberdef>
      <memberdef kind="function" id="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gaff4fa0d53781f814413f9311b43fe1da" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>ATTRIBUTES_ALT_MODE <ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga399c1777f494368601cad31a40afca9c" kindref="member">cy_en_pdaltmode_vdm_task_t</ref></type>
        <definition>ATTRIBUTES_ALT_MODE cy_en_pdaltmode_vdm_task_t Cy_PdAltMode_VdmTask_MngDiscId</definition>
        <argsstring>(cy_stc_pdaltmode_context_t *ptrAltModeContext, cy_en_pdaltmode_vdm_evt_t vdmEvt)</argsstring>
        <name>Cy_PdAltMode_VdmTask_MngDiscId</name>
        <param>
          <type><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref> *</type>
          <declname>ptrAltModeContext</declname>
        </param>
        <param>
          <type><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga53976be265d41463919b3ea93da4cf30" kindref="member">cy_en_pdaltmode_vdm_evt_t</ref></type>
          <declname>vdmEvt</declname>
        </param>
        <briefdescription>
<para>Discover ID command processing handler. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ptrAltModeContext</parametername>
</parameternamelist>
<parameterdescription>
<para>PD Alt Mode Library Context pointer</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>vdmEvt</parametername>
</parameternamelist>
<parameterdescription>
<para>VDM event related to the Discover ID command processing</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Next VDM manager task </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="cy_pdaltmode_vdm_task.c" line="862" column="1" bodyfile="cy_pdaltmode_vdm_task.c" bodystart="862" bodyend="947"/>
      </memberdef>
      <memberdef kind="function" id="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga58aebe4014458b4d6e100c404a397e21" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>ATTRIBUTES_ALT_MODE bool</type>
        <definition>ATTRIBUTES_ALT_MODE bool Cy_PdAltMode_VdmTask_IsSvidStored</definition>
        <argsstring>(uint16_t *svid_arr, uint16_t svid)</argsstring>
        <name>Cy_PdAltMode_VdmTask_IsSvidStored</name>
        <param>
          <type>uint16_t *</type>
          <declname>svid_arr</declname>
        </param>
        <param>
          <type>uint16_t</type>
          <declname>svid</declname>
        </param>
        <briefdescription>
<para>Check if selected SVID is already saved. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>svid_arr</parametername>
</parameternamelist>
<parameterdescription>
<para>Received SVID response VDO buffer pointer</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>svid</parametername>
</parameternamelist>
<parameterdescription>
<para>Selected SVID</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>True if selected SVID already saved for the further processing, otherwise return false. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="cy_pdaltmode_vdm_task.c" line="950" column="1" bodyfile="cy_pdaltmode_vdm_task.c" bodystart="950" bodyend="965"/>
      </memberdef>
      <memberdef kind="function" id="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gab5e1a09da0d6f788003b7c90f4d534f7" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>ATTRIBUTES_ALT_MODE bool</type>
        <definition>ATTRIBUTES_ALT_MODE bool Cy_PdAltMode_VdmTask_SaveSvids</definition>
        <argsstring>(cy_stc_pdaltmode_context_t *ptrAltModeContext, uint16_t *svid_arr, uint8_t max_svid)</argsstring>
        <name>Cy_PdAltMode_VdmTask_SaveSvids</name>
        <param>
          <type><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref> *</type>
          <declname>ptrAltModeContext</declname>
        </param>
        <param>
          <type>uint16_t *</type>
          <declname>svid_arr</declname>
        </param>
        <param>
          <type>uint8_t</type>
          <declname>max_svid</declname>
        </param>
        <briefdescription>
<para>Save supported SVIDs for further processing. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ptrAltModeContext</parametername>
</parameternamelist>
<parameterdescription>
<para>PD Alt Mode Library Context pointer</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>svid_arr</parametername>
</parameternamelist>
<parameterdescription>
<para>Received SVIDs buffer pointer</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>max_svid</parametername>
</parameternamelist>
<parameterdescription>
<para>Maximum number of SVIDs that can be supported</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>False if all supported SVIDs can be saved, otherwise returns true. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="cy_pdaltmode_vdm_task.c" line="971" column="1" bodyfile="cy_pdaltmode_vdm_task.c" bodystart="971" bodyend="1056"/>
      </memberdef>
      <memberdef kind="function" id="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga29e2ba099601d20e583cc7e4d070e5f8" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>bool</type>
        <definition>bool Cy_PdAltMode_VdmTask_IsVconnPresent</definition>
        <argsstring>(cy_stc_pdstack_context_t *ptrPdStackContext, uint8_t channel)</argsstring>
        <name>Cy_PdAltMode_VdmTask_IsVconnPresent</name>
        <param>
          <type>cy_stc_pdstack_context_t *</type>
          <declname>ptrPdStackContext</declname>
        </param>
        <param>
          <type>uint8_t</type>
          <declname>channel</declname>
        </param>
        <briefdescription>
<para>Check status of VConn. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ptrPdStackContext</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to the PD context structure</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>channel</parametername>
</parameternamelist>
<parameterdescription>
<para>Channel index, where CC1 = 0, CC2 = 1</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>bool Returns true if Vconn is turned on, false otherwise. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="cy_pdaltmode_vdm_task.c" line="1058" column="1" bodyfile="cy_pdaltmode_vdm_task.c" bodystart="1058" bodyend="1061"/>
      </memberdef>
      <memberdef kind="function" id="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gaa45ecb672ca0bf35e1de98e7057e448b" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>ATTRIBUTES_ALT_MODE bool</type>
        <definition>ATTRIBUTES_ALT_MODE bool Cy_PdAltMode_VdmTask_IsCblSvidReq</definition>
        <argsstring>(cy_stc_pdaltmode_context_t *ptrAltModeContext)</argsstring>
        <name>Cy_PdAltMode_VdmTask_IsCblSvidReq</name>
        <param>
          <type><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref> *</type>
          <declname>ptrAltModeContext</declname>
        </param>
        <briefdescription>
<para>Checks if cable Discovery SVID has to run. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ptrAltModeContext</parametername>
</parameternamelist>
<parameterdescription>
<para>PD Alt Mode Library Context pointer</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>True if cable Discovery SVID has to run, otherwise returns false. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="cy_pdaltmode_vdm_task.c" line="1063" column="1" bodyfile="cy_pdaltmode_vdm_task.c" bodystart="1063" bodyend="1100"/>
      </memberdef>
      <memberdef kind="function" id="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga4120453105a897857a01d614104b4705" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>ATTRIBUTES_ALT_MODE <ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga399c1777f494368601cad31a40afca9c" kindref="member">cy_en_pdaltmode_vdm_task_t</ref></type>
        <definition>ATTRIBUTES_ALT_MODE cy_en_pdaltmode_vdm_task_t Cy_PdAltMode_VdmTask_HandleSopSvidResp</definition>
        <argsstring>(cy_stc_pdaltmode_context_t *ptrAltModeContext)</argsstring>
        <name>Cy_PdAltMode_VdmTask_HandleSopSvidResp</name>
        <param>
          <type><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref> *</type>
          <declname>ptrAltModeContext</declname>
        </param>
        <briefdescription>
<para>Evaluates valid UFP Discovery SVID response. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ptrAltModeContext</parametername>
</parameternamelist>
<parameterdescription>
<para>PD Alt Mode Library Context pointer</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Next VDM manager task to perform </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="cy_pdaltmode_vdm_task.c" line="1102" column="1" bodyfile="cy_pdaltmode_vdm_task.c" bodystart="1102" bodyend="1163"/>
      </memberdef>
      <memberdef kind="function" id="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gac65862533e26aef7fd32491f9bdd9a40" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>ATTRIBUTES_ALT_MODE <ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga399c1777f494368601cad31a40afca9c" kindref="member">cy_en_pdaltmode_vdm_task_t</ref></type>
        <definition>ATTRIBUTES_ALT_MODE cy_en_pdaltmode_vdm_task_t Cy_PdAltMode_VdmTask_HandleCblSvidResp</definition>
        <argsstring>(cy_stc_pdaltmode_context_t *ptrAltModeContext)</argsstring>
        <name>Cy_PdAltMode_VdmTask_HandleCblSvidResp</name>
        <param>
          <type><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref> *</type>
          <declname>ptrAltModeContext</declname>
        </param>
        <briefdescription>
<para>Evaluates valid cable Discovery SVID response. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ptrAltModeContext</parametername>
</parameternamelist>
<parameterdescription>
<para>PD Alt Mode Library Context pointer</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Next VDM manager task to perform </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="cy_pdaltmode_vdm_task.c" line="1165" column="1" bodyfile="cy_pdaltmode_vdm_task.c" bodystart="1165" bodyend="1219"/>
      </memberdef>
      <memberdef kind="function" id="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga7b0abbf4250ef5d595d674e0507a1229" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>ATTRIBUTES_ALT_MODE <ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga399c1777f494368601cad31a40afca9c" kindref="member">cy_en_pdaltmode_vdm_task_t</ref></type>
        <definition>ATTRIBUTES_ALT_MODE cy_en_pdaltmode_vdm_task_t Cy_PdAltMode_VdmTask_HandleFailSvidResp</definition>
        <argsstring>(cy_stc_pdaltmode_context_t *ptrAltModeContext)</argsstring>
        <name>Cy_PdAltMode_VdmTask_HandleFailSvidResp</name>
        <param>
          <type><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref> *</type>
          <declname>ptrAltModeContext</declname>
        </param>
        <briefdescription>
<para>Evaluates failed Discovery SVID responses. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ptrAltModeContext</parametername>
</parameternamelist>
<parameterdescription>
<para>PD Alt Mode Library Context pointer</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Next VDM manager task to perform </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="cy_pdaltmode_vdm_task.c" line="1221" column="1" bodyfile="cy_pdaltmode_vdm_task.c" bodystart="1221" bodyend="1257"/>
      </memberdef>
      <memberdef kind="function" id="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gaade89d4c99b2b98a132b32dc3cb87377" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>ATTRIBUTES_ALT_MODE <ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga399c1777f494368601cad31a40afca9c" kindref="member">cy_en_pdaltmode_vdm_task_t</ref></type>
        <definition>ATTRIBUTES_ALT_MODE cy_en_pdaltmode_vdm_task_t Cy_PdAltMode_VdmTask_MngDiscSvid</definition>
        <argsstring>(cy_stc_pdaltmode_context_t *ptrAltModeContext, cy_en_pdaltmode_vdm_evt_t vdmEvt)</argsstring>
        <name>Cy_PdAltMode_VdmTask_MngDiscSvid</name>
        <param>
          <type><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref> *</type>
          <declname>ptrAltModeContext</declname>
        </param>
        <param>
          <type><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga53976be265d41463919b3ea93da4cf30" kindref="member">cy_en_pdaltmode_vdm_evt_t</ref></type>
          <declname>vdmEvt</declname>
        </param>
        <briefdescription>
<para>Discovery SVID command handler. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ptrAltModeContext</parametername>
</parameternamelist>
<parameterdescription>
<para>PD Alt Mode Library Context pointer</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>vdmEvt</parametername>
</parameternamelist>
<parameterdescription>
<para>VDM event related to the Discover SVID command processing</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Next VDM manager task to perform </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="cy_pdaltmode_vdm_task.c" line="1259" column="1" bodyfile="cy_pdaltmode_vdm_task.c" bodystart="1259" bodyend="1323"/>
      </memberdef>
      <memberdef kind="function" id="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga8333ffa89cf422c2c4bf1ac1514c0541" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>ATTRIBUTES_ALT_MODE void</type>
        <definition>ATTRIBUTES_ALT_MODE void Cy_PdAltMode_VdmTask_ResetMngr</definition>
        <argsstring>(cy_stc_pdaltmode_context_t *ptrAltModeContext)</argsstring>
        <name>Cy_PdAltMode_VdmTask_ResetMngr</name>
        <param>
          <type><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref> *</type>
          <declname>ptrAltModeContext</declname>
        </param>
        <briefdescription>
<para>Reset VDM manager flags and handlers. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ptrAltModeContext</parametername>
</parameternamelist>
<parameterdescription>
<para>PD Alt Mode Library Context pointer</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>None </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="cy_pdaltmode_vdm_task.c" line="1325" column="1" bodyfile="cy_pdaltmode_vdm_task.c" bodystart="1325" bodyend="1350"/>
      </memberdef>
      <memberdef kind="function" id="cy__pdaltmode__vdm__task_8c_1ac01355b51af6a401e433b4a421080525" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>ATTRIBUTES_ALT_MODE <ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga399c1777f494368601cad31a40afca9c" kindref="member">cy_en_pdaltmode_vdm_task_t</ref></type>
        <definition>ATTRIBUTES_ALT_MODE cy_en_pdaltmode_vdm_task_t Cy_PdAltMode_VdmTask_ResumeHandler</definition>
        <argsstring>(cy_stc_pdaltmode_context_t *ptrAltModeContext)</argsstring>
        <name>Cy_PdAltMode_VdmTask_ResumeHandler</name>
        <param>
          <type><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref> *</type>
          <declname>ptrAltModeContext</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="cy_pdaltmode_vdm_task.c" line="1352" column="1" bodyfile="cy_pdaltmode_vdm_task.c" bodystart="1352" bodyend="1365"/>
      </memberdef>
      <memberdef kind="function" id="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gaa3cffcb7d5f8a8f64259274abcd58b92" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void Cy_PdAltMode_VdmTask_MngrDeInit</definition>
        <argsstring>(cy_stc_pdaltmode_context_t *ptrAltModeContext)</argsstring>
        <name>Cy_PdAltMode_VdmTask_MngrDeInit</name>
        <param>
          <type><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref> *</type>
          <declname>ptrAltModeContext</declname>
        </param>
        <briefdescription>
<para>De-init VDM task manager and resets all related variables. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ptrAltModeContext</parametername>
</parameternamelist>
<parameterdescription>
<para>PD Alt Mode Library Context pointer</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>None </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="cy_pdaltmode_vdm_task.c" line="1367" column="1" bodyfile="cy_pdaltmode_vdm_task.c" bodystart="1367" bodyend="1405"/>
      </memberdef>
      <memberdef kind="function" id="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga5e19654e4d8fe00e8b929ed8cc563462" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void Cy_PdAltMode_VdmTask_MngrExitModes</definition>
        <argsstring>(cy_stc_pdaltmode_context_t *ptrAltModeContext)</argsstring>
        <name>Cy_PdAltMode_VdmTask_MngrExitModes</name>
        <param>
          <type><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref> *</type>
          <declname>ptrAltModeContext</declname>
        </param>
        <briefdescription>
<para>Get the Alternate Mode state machine to exit any active modes. </para>        </briefdescription>
        <detaileddescription>
<para>This is called in response to a VConn related fault condition.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ptrAltModeContext</parametername>
</parameternamelist>
<parameterdescription>
<para>PD Alt Mode Library Context pointer</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>None </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="cy_pdaltmode_vdm_task.c" line="1407" column="1" bodyfile="cy_pdaltmode_vdm_task.c" bodystart="1407" bodyend="1419"/>
      </memberdef>
      <memberdef kind="function" id="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga99f1080aeb4ec6773b79c1bc94b504bf" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>ATTRIBUTES_ALT_MODE void</type>
        <definition>ATTRIBUTES_ALT_MODE void Cy_PdAltMode_VdmTask_SopDpSoftResetCb</definition>
        <argsstring>(cy_stc_pdstack_context_t *ptrPdStackContext, cy_en_pdstack_resp_status_t resp, const cy_stc_pdstack_pd_packet_t *pktPtr)</argsstring>
        <name>Cy_PdAltMode_VdmTask_SopDpSoftResetCb</name>
        <param>
          <type>cy_stc_pdstack_context_t *</type>
          <declname>ptrPdStackContext</declname>
        </param>
        <param>
          <type>cy_en_pdstack_resp_status_t</type>
          <declname>resp</declname>
        </param>
        <param>
          <type>const cy_stc_pdstack_pd_packet_t *</type>
          <declname>pktPtr</declname>
        </param>
        <briefdescription>
<para>Callback to handle cable SOP" Soft Reset response. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ptrPdStackContext</parametername>
</parameternamelist>
<parameterdescription>
<para>PD Stack Library Context pointer</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>resp</parametername>
</parameternamelist>
<parameterdescription>
<para>Soft Reset response status</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>pktPtr</parametername>
</parameternamelist>
<parameterdescription>
<para>Soft Reset response pointer</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>None. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="cy_pdaltmode_vdm_task.c" line="1421" column="1" bodyfile="cy_pdaltmode_vdm_task.c" bodystart="1421" bodyend="1451"/>
      </memberdef>
      <memberdef kind="function" id="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gae9131b85b5acc6edad37ef4a67969536" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>ATTRIBUTES_ALT_MODE void</type>
        <definition>ATTRIBUTES_ALT_MODE void Cy_PdAltMode_VdmTask_SendSopDpSoftReset</definition>
        <argsstring>(cy_stc_pdaltmode_context_t *ptrAltModeContext)</argsstring>
        <name>Cy_PdAltMode_VdmTask_SendSopDpSoftReset</name>
        <param>
          <type><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref> *</type>
          <declname>ptrAltModeContext</declname>
        </param>
        <briefdescription>
<para>Sends cable SOP" Soft Reset. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ptrAltModeContext</parametername>
</parameternamelist>
<parameterdescription>
<para>PD Alt Mode Library Context pointer</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>None </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="cy_pdaltmode_vdm_task.c" line="1453" column="1" bodyfile="cy_pdaltmode_vdm_task.c" bodystart="1453" bodyend="1483"/>
      </memberdef>
      <memberdef kind="function" id="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga26476af05a71c4ba1a24b398df0c10cf" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>ATTRIBUTES_ALT_MODE void</type>
        <definition>ATTRIBUTES_ALT_MODE void Cy_PdAltMode_VdmTask_VconnSwapCb</definition>
        <argsstring>(cy_stc_pdstack_context_t *ptrPdStackContext, cy_en_pdstack_resp_status_t resp, const cy_stc_pdstack_pd_packet_t *pktPtr)</argsstring>
        <name>Cy_PdAltMode_VdmTask_VconnSwapCb</name>
        <param>
          <type>cy_stc_pdstack_context_t *</type>
          <declname>ptrPdStackContext</declname>
        </param>
        <param>
          <type>cy_en_pdstack_resp_status_t</type>
          <declname>resp</declname>
        </param>
        <param>
          <type>const cy_stc_pdstack_pd_packet_t *</type>
          <declname>pktPtr</declname>
        </param>
        <briefdescription>
<para>Callback to handle Vconn Swap response. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ptrPdStackContext</parametername>
</parameternamelist>
<parameterdescription>
<para>PD Stack Library Context pointer</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>resp</parametername>
</parameternamelist>
<parameterdescription>
<para>Vconn Swap response status</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>pktPtr</parametername>
</parameternamelist>
<parameterdescription>
<para>Vconn Swap response pointer</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>None </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="cy_pdaltmode_vdm_task.c" line="1485" column="1" bodyfile="cy_pdaltmode_vdm_task.c" bodystart="1485" bodyend="1537"/>
      </memberdef>
      <memberdef kind="function" id="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gad52bc510f0fb304eaed0ed9cd6177173" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>bool</type>
        <definition>bool Cy_PdAltMode_VdmTask_InitiateVcsCblDiscovery</definition>
        <argsstring>(cy_stc_pdaltmode_context_t *ptrAltModeContext)</argsstring>
        <name>Cy_PdAltMode_VdmTask_InitiateVcsCblDiscovery</name>
        <param>
          <type><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref> *</type>
          <declname>ptrAltModeContext</declname>
        </param>
        <briefdescription>
<para>Initiate VConn Swap and cable discovery before going ahead with the next SOP&apos;/SOP&apos;&apos; message. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ptrAltModeContext</parametername>
</parameternamelist>
<parameterdescription>
<para>PD Alt Mode Library Context pointer</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>True - VDM sequence needs to be delayed because there is need to do a VConn Swap. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="cy_pdaltmode_vdm_task.c" line="1540" column="1" bodyfile="cy_pdaltmode_vdm_task.c" bodystart="1540" bodyend="1624"/>
      </memberdef>
      <memberdef kind="function" id="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gac349e23243b9520256eb7a92028c786e" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>ATTRIBUTES_ALT_MODE void</type>
        <definition>ATTRIBUTES_ALT_MODE void Cy_PdAltMode_VdmTask_UpdateVcsStatus</definition>
        <argsstring>(cy_stc_pdaltmode_context_t *ptrAltModeContext)</argsstring>
        <name>Cy_PdAltMode_VdmTask_UpdateVcsStatus</name>
        <param>
          <type><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref> *</type>
          <declname>ptrAltModeContext</declname>
        </param>
        <briefdescription>
<para>Resume Alternate Mode discovery state machine after cable discovery tasks are complete. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ptrAltModeContext</parametername>
</parameternamelist>
<parameterdescription>
<para>PD Alt Mode Library Context pointer</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>None </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="cy_pdaltmode_vdm_task.c" line="1626" column="1" bodyfile="cy_pdaltmode_vdm_task.c" bodystart="1626" bodyend="1632"/>
      </memberdef>
      <memberdef kind="function" id="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga09c839b7b5f0abd38fca51951d82d766" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>ATTRIBUTES_ALT_MODE uint8_t</type>
        <definition>ATTRIBUTES_ALT_MODE uint8_t Cy_PdAltMode_VdmTask_ComposeVdm</definition>
        <argsstring>(cy_stc_pdaltmode_context_t *ptrAltModeContext)</argsstring>
        <name>Cy_PdAltMode_VdmTask_ComposeVdm</name>
        <param>
          <type><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref> *</type>
          <declname>ptrAltModeContext</declname>
        </param>
        <briefdescription>
<para>Fills VDM buffer with corresponding data before send the VDM. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ptrAltModeContext</parametername>
</parameternamelist>
<parameterdescription>
<para>PD Alt Mode Library Context pointer</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>True if all VDM-related data to fill is valid </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="cy_pdaltmode_vdm_task.c" line="1635" column="1" bodyfile="cy_pdaltmode_vdm_task.c" bodystart="1635" bodyend="1706"/>
      </memberdef>
      <memberdef kind="function" id="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga3aafda05df05c9c09fb60dc5380451b5" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>ATTRIBUTES_ALT_MODE uint8_t</type>
        <definition>ATTRIBUTES_ALT_MODE uint8_t Cy_PdAltMode_VdmTask_ParseVdm</definition>
        <argsstring>(cy_stc_pdaltmode_context_t *ptrAltModeContext, const cy_stc_pdstack_pd_packet_t *recVdm)</argsstring>
        <name>Cy_PdAltMode_VdmTask_ParseVdm</name>
        <param>
          <type><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref> *</type>
          <declname>ptrAltModeContext</declname>
        </param>
        <param>
          <type>const cy_stc_pdstack_pd_packet_t *</type>
          <declname>recVdm</declname>
        </param>
        <briefdescription>
<para>Saves necessary data from received VDM for further analysis. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ptrAltModeContext</parametername>
</parameternamelist>
<parameterdescription>
<para>PD Alt Mode Library Context pointer</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>recVdm</parametername>
</parameternamelist>
<parameterdescription>
<para>Received VDM buffer pointer. </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>True if all VDM data to save is valid </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="cy_pdaltmode_vdm_task.c" line="1709" column="1" bodyfile="cy_pdaltmode_vdm_task.c" bodystart="1709" bodyend="1728"/>
      </memberdef>
      <memberdef kind="function" id="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gaec4bc9a6a0607ac64da5ebef65588794" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>ATTRIBUTES_ALT_MODE bool</type>
        <definition>ATTRIBUTES_ALT_MODE bool Cy_PdAltMode_VdmTask_IsUfpDiscStarted</definition>
        <argsstring>(cy_stc_pdaltmode_context_t *ptrAltModeContext)</argsstring>
        <name>Cy_PdAltMode_VdmTask_IsUfpDiscStarted</name>
        <param>
          <type><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref> *</type>
          <declname>ptrAltModeContext</declname>
        </param>
        <briefdescription>
<para>Starts Discover process when CCG is UFP due to PD 3.0 spec. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ptrAltModeContext</parametername>
</parameternamelist>
<parameterdescription>
<para>PD Alt Mode Library Context pointer</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>True if Discover process has started, false if VDM manager is busy. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="cy_pdaltmode_vdm_task.c" line="1796" column="1" bodyfile="cy_pdaltmode_vdm_task.c" bodystart="1796" bodyend="1807"/>
      </memberdef>
      <memberdef kind="function" id="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gaa71916055124aa60a49960cea3054b0d" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>ATTRIBUTES_ALT_MODE void</type>
        <definition>ATTRIBUTES_ALT_MODE void Cy_PdAltMode_VdmTask_ResetDiscInfo</definition>
        <argsstring>(cy_stc_pdaltmode_context_t *ptrAltModeContext)</argsstring>
        <name>Cy_PdAltMode_VdmTask_ResetDiscInfo</name>
        <param>
          <type><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref> *</type>
          <declname>ptrAltModeContext</declname>
        </param>
        <briefdescription>
<para>Clear DP and TBT discovery info. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ptrAltModeContext</parametername>
</parameternamelist>
<parameterdescription>
<para>PD Alt Mode Library Context pointer</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>None </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="cy_pdaltmode_vdm_task.c" line="1809" column="1" bodyfile="cy_pdaltmode_vdm_task.c" bodystart="1809" bodyend="1814"/>
      </memberdef>
      <memberdef kind="function" id="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gaa44f036b49866624543971b758bea3e7" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>ATTRIBUTES_ALT_MODE void</type>
        <definition>ATTRIBUTES_ALT_MODE void Cy_PdAltMode_VdmTask_ClearDiscResp</definition>
        <argsstring>(cy_stc_pdaltmode_context_t *ptrAltModeContext)</argsstring>
        <name>Cy_PdAltMode_VdmTask_ClearDiscResp</name>
        <param>
          <type><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref> *</type>
          <declname>ptrAltModeContext</declname>
        </param>
        <briefdescription>
<para>Clear D_ID and D_SVID response buffer. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ptrAltModeContext</parametername>
</parameternamelist>
<parameterdescription>
<para>PD Alt Mode Library Context pointer</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>None </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="cy_pdaltmode_vdm_task.c" line="1816" column="1" bodyfile="cy_pdaltmode_vdm_task.c" bodystart="1816" bodyend="1822"/>
      </memberdef>
      <memberdef kind="function" id="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga5861bb3fd3515f0c1accdfa8b1ef054d" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>ATTRIBUTES_ALT_MODE uint8_t *</type>
        <definition>ATTRIBUTES_ALT_MODE uint8_t* Cy_PdAltMode_VdmTask_GetStoredDiscResp</definition>
        <argsstring>(cy_stc_pdaltmode_context_t *ptrAltModeContext, bool is_disc_id, uint8_t *respLenP)</argsstring>
        <name>Cy_PdAltMode_VdmTask_GetStoredDiscResp</name>
        <param>
          <type><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref> *</type>
          <declname>ptrAltModeContext</declname>
        </param>
        <param>
          <type>bool</type>
          <declname>is_disc_id</declname>
        </param>
        <param>
          <type>uint8_t *</type>
          <declname>respLenP</declname>
        </param>
        <briefdescription>
<para>Returns Discovery ID/SVID configuration table response pointer. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ptrAltModeContext</parametername>
</parameternamelist>
<parameterdescription>
<para>PD Alt Mode Library Context pointer</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>is_disc_id</parametername>
</parameternamelist>
<parameterdescription>
<para>True for Discovery ID response, false for Discovery SVID response</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>respLenP</parametername>
</parameternamelist>
<parameterdescription>
<para>Discovery ID/SVID response length pointer</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Discovery ID/SVID configuration table response pointer, otherwise returns NULL. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="cy_pdaltmode_vdm_task.c" line="1824" column="1" bodyfile="cy_pdaltmode_vdm_task.c" bodystart="1824" bodyend="1852"/>
      </memberdef>
      <memberdef kind="function" id="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga69fc3be1bd9fb44f5b3a7da0028b19a7" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>ATTRIBUTES_ALT_MODE uint8_t *</type>
        <definition>ATTRIBUTES_ALT_MODE uint8_t* Cy_PdAltMode_VdmTask_GetDiscIdResp</definition>
        <argsstring>(cy_stc_pdaltmode_context_t *ptrAltModeContext, uint8_t *respLenP)</argsstring>
        <name>Cy_PdAltMode_VdmTask_GetDiscIdResp</name>
        <param>
          <type><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref> *</type>
          <declname>ptrAltModeContext</declname>
        </param>
        <param>
          <type>uint8_t *</type>
          <declname>respLenP</declname>
        </param>
        <briefdescription>
<para>Obtain the last DISC_ID response received by the CCG device from a port partner. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ptrAltModeContext</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to the Alt Mode Context</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>respLenP</parametername>
</parameternamelist>
<parameterdescription>
<para>Length of response in PD data objects</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Pointer to the actual response data </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="cy_pdaltmode_vdm_task.c" line="1854" column="1" bodyfile="cy_pdaltmode_vdm_task.c" bodystart="1854" bodyend="1857"/>
      </memberdef>
      <memberdef kind="function" id="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga540b498397f1c9469b495940f2ac91a0" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>ATTRIBUTES_ALT_MODE uint8_t *</type>
        <definition>ATTRIBUTES_ALT_MODE uint8_t* Cy_PdAltMode_VdmTask_GetDiscSvidResp</definition>
        <argsstring>(cy_stc_pdaltmode_context_t *ptrAltModeContext, uint8_t *respLenP)</argsstring>
        <name>Cy_PdAltMode_VdmTask_GetDiscSvidResp</name>
        <param>
          <type><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref> *</type>
          <declname>ptrAltModeContext</declname>
        </param>
        <param>
          <type>uint8_t *</type>
          <declname>respLenP</declname>
        </param>
        <briefdescription>
<para>Obtain the last DISC_SVID response received by the CCG device from a port partner. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ptrAltModeContext</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to the Alt Mode Context</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>respLenP</parametername>
</parameternamelist>
<parameterdescription>
<para>Length of response in PD data objects</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Pointer to the actual response data </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="cy_pdaltmode_vdm_task.c" line="1859" column="1" bodyfile="cy_pdaltmode_vdm_task.c" bodystart="1859" bodyend="1862"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
<para>VDM Task Manager implementation. </para>    </briefdescription>
    <detaileddescription>
<para><simplesect kind="version"><para>1.0</para></simplesect>
<simplesect kind="copyright"><para>Copyright 2024, Cypress Semiconductor Corporation (an Infineon company) or an affiliate of Cypress Semiconductor Corporation. All rights reserved. You may use this file only in accordance with the license, terms, conditions, disclaimers, and limitations in the end user license agreement accompanying the software package with which this file was provided. </para></simplesect>
</para>    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">/***************************************************************************/</highlight></codeline>
<codeline lineno="17"><highlight class="preprocessor">#include<sp/>&quot;cy_pdaltmode_defines.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="18"><highlight class="normal"></highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;cy_pdstack_dpm.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;cy_pdutils.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;cy_pdutils_sw_timer.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="22"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;cy_pdstack_timer_id.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;cy_pdaltmode_timer_id.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight></codeline>
<codeline lineno="25"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>((DFP_ALT_MODE_SUPP)<sp/>||<sp/>(UFP_ALT_MODE_SUPP))</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="26"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;cy_pdaltmode_hw.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;cy_pdaltmode_vdm_task.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;cy_pdaltmode_mngr.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="29"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;cy_pdaltmode_usb4.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="30"><highlight class="normal"></highlight></codeline>
<codeline lineno="31"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Callback<sp/>function<sp/>for<sp/>sent<sp/>VDM<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="32"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>Cy_PdAltMode_VdmTask_RecCbk(cy_stc_pdstack_context_t<sp/>*ptrPdStackContext,<sp/>cy_en_pdstack_resp_status_t<sp/>status,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>cy_stc_pdstack_pd_packet_t*<sp/>recVdm);</highlight></codeline>
<codeline lineno="33"><highlight class="normal"></highlight></codeline>
<codeline lineno="34"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Function<sp/>to<sp/>send<sp/>VDM<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="35"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga399c1777f494368601cad31a40afca9c" kindref="member">cy_en_pdaltmode_vdm_task_t</ref><sp/>Cy_PdAltMode_VdmTask_SendVdm(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext);</highlight></codeline>
<codeline lineno="36"><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>VDM<sp/>manager<sp/>status<sp/>structure<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="38"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="structcy__stc__pdaltmode__vdm__task__status__t" kindref="compound">cy_stc_pdaltmode_vdm_task_status_t</ref><sp/>vdmMngrStatus[NO_OF_TYPEC_PORTS];</highlight></codeline>
<codeline lineno="39"><highlight class="normal"></highlight></codeline>
<codeline lineno="40"><highlight class="normal"><ref refid="structcy__stc__pdaltmode__vdm__task__status__t" kindref="compound">cy_stc_pdaltmode_vdm_task_status_t</ref>*<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga8da1801387db0bfc422d88ab713ee765" kindref="member">Cy_PdAltMode_VdmTask_GetMngrStatus</ref>(uint8_t<sp/>port)</highlight></codeline>
<codeline lineno="41"><highlight class="normal">{</highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>&amp;vdmMngrStatus[port];</highlight></codeline>
<codeline lineno="43"><highlight class="normal">}</highlight></codeline>
<codeline lineno="44"><highlight class="normal"></highlight></codeline>
<codeline lineno="45"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga2ef6ffe7eff6a19712066f4c3d9bbddc" kindref="member">Cy_PdAltMode_VdmTask_Enable</ref>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext)</highlight></codeline>
<codeline lineno="46"><highlight class="normal">{</highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>the<sp/>VDM<sp/>task<sp/>is<sp/>already<sp/>running,<sp/>do<sp/>nothing.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1a5ea8f165a1c5b45f73dc45cf5d98f4fd" kindref="member">vdmTaskEn</ref><sp/>==<sp/>(uint8_t)</highlight><highlight class="keyword">false</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1acb352c125c763362864a110417fee400" kindref="member">vdmTask</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9cad89c7954e0be8fdb08211347ba261925" kindref="member">CY_PDALTMODE_VDM_TASK_INIT</ref>;</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1a5ea8f165a1c5b45f73dc45cf5d98f4fd" kindref="member">vdmTaskEn</ref><sp/>=<sp/>(uint8_t)</highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1aa64a8201b153c51cc5099bfd8a02059b" kindref="member">vdmPrcsFailed</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a2083b9e4f1976568c605c50a24a67d18" kindref="member">appCblStartDelay</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__common__macros_1gabd31469febefc8dd88f849428ec8e169" kindref="member">CY_PDALTMODE_APP_CABLE_VDM_START_DELAY</ref>;</highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a6ab9d4ea625b7c20255fedd3ba37317b" kindref="member">vdmBusyDelay</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__common__macros_1ga3f17f04b341d50b719ec06bc855e33bb" kindref="member">CY_PDALTMODE_APP_VDM_BUSY_TIMER_PERIOD</ref>;</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a09f9b4814cb04b0ebb51c7e81168b930" kindref="member">enterUsb4WaitDelay</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__common__macros_1ga18934feeaa75ee78b8131fba091b5725" kindref="member">CY_PDALTMODE_APP_ENTER_USB4_WAIT_PERIOD</ref>;</highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1aee85e2f409d8f441497cf3a5d5a49947" kindref="member">vdmFailRetryDelay</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__common__macros_1gaf189e677943c62dc1819172d2c1da7d4" kindref="member">CY_PDALTMODE_APP_VDM_FAIL_RETRY_PERIOD</ref>;</highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gaa71916055124aa60a49960cea3054b0d" kindref="member">Cy_PdAltMode_VdmTask_ResetDiscInfo</ref>)(ptrAltModeContext);</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Make<sp/>sure<sp/>all<sp/>Alternate<sp/>Mode<sp/>manager<sp/>state<sp/>has<sp/>been<sp/>cleared<sp/>at<sp/>start.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga555c8882136ad6a28ee79351f687f4b1" kindref="member">Cy_PdAltMode_Mngr_ResetInfo</ref>)(ptrAltModeContext);</highlight></codeline>
<codeline lineno="60"><highlight class="normal"></highlight></codeline>
<codeline lineno="61"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>HPI_AM_SUPP</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>if<sp/>there<sp/>is<sp/>any<sp/>custom<sp/>Alt<sp/>Mode<sp/>available<sp/>and<sp/>save<sp/>it.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1a64aeaf18ac201c395d24fd9be3ed8df7" kindref="member">customHpiSvid</ref><sp/>=<sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga21f419b2e94ce46c2f54cd9b7486d3ae" kindref="member">Cy_PdAltMode_Mngr_GetCustomSvid</ref>)(ptrAltModeContext);</highlight></codeline>
<codeline lineno="64"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>HPI_AM_SUPP<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="65"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>DFP_ALT_MODE_SUPP</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="66"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>(DEFER_VCONN_SRC_ROLE_SWAP)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrPdStackContext-&gt;dpmConfig.curPortType<sp/>!=<sp/>CY_PD_PRT_TYPE_UFP)</highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Currently<sp/>in<sp/>DFP,<sp/>do<sp/>not<sp/>relinquish<sp/>VConn<sp/>Source<sp/>role<sp/>until<sp/>Alt<sp/>Mode<sp/>processing<sp/>is<sp/>complete.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1aba3f2832d6acbf0f5c866d67f8e0090b" kindref="member">appStatusContext</ref>-&gt;keep_vconn_src<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>in<sp/>UFP,<sp/>can<sp/>allow<sp/>the<sp/>port<sp/>partner<sp/>to<sp/>become<sp/>VConn<sp/>source.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1aba3f2832d6acbf0f5c866d67f8e0090b" kindref="member">appStatusContext</ref>-&gt;keep_vconn_src<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="77"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>(DEFER_VCONN_SRC_ROLE_SWAP)<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="78"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>DFP_ALT_MODE_SUPP<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="80"><highlight class="normal">}</highlight></codeline>
<codeline lineno="81"><highlight class="normal"></highlight></codeline>
<codeline lineno="82"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga399c1777f494368601cad31a40afca9c" kindref="member">cy_en_pdaltmode_vdm_task_t</ref><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gae1f7226db52a7cdbb4f60ab893353b01" kindref="member">Cy_PdAltMode_VdmTask_Init</ref>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext)</highlight></codeline>
<codeline lineno="83"><highlight class="normal">{</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_stc_pdstack_context_t<sp/>*ptrPdStackContext<sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a34f18ac1a604068a73e013c483d55104" kindref="member">pdStackContext</ref>;</highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga399c1777f494368601cad31a40afca9c" kindref="member">cy_en_pdaltmode_vdm_task_t</ref><sp/>ret<sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca7eff1b48be7cbe38e7135ce320e01759" kindref="member">CY_PDALTMODE_VDM_TASK_EXIT</ref>;</highlight></codeline>
<codeline lineno="86"><highlight class="normal"></highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Reset<sp/>VDM<sp/>manager<sp/>info<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga8333ffa89cf422c2c4bf1ac1514c0541" kindref="member">Cy_PdAltMode_VdmTask_ResetMngr</ref>)(ptrAltModeContext);</highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a7e69c43b3b2dd3eed1c6932869deb63d" kindref="member">vdmEvt</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga53976be265d41463919b3ea93da4cf30abd914a67376582616bd3cd1949b105ca" kindref="member">CY_PDALTMODE_VDM_EVT_RUN</ref>;</highlight></codeline>
<codeline lineno="90"><highlight class="normal"></highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>Alt<sp/>Mode<sp/>trigger<sp/>based<sp/>on<sp/>config<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1adc915564ec7ad79a181ecfc2274b2666" kindref="member">altModeTrigMask</ref><sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a51a744b85e46a2852636ef9bc375be2b" kindref="member">dpCfg</ref>-&gt;dp_mode_trigger;</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1abb3033c7cfbac50edcc457c089e90351" kindref="member">dfpAltModeMask</ref><sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1aceb31ed4d6db842a86597557af80d116" kindref="member">altModeCfg</ref>-&gt;dfp_alt_mode_mask;</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1ac8bd2d39701da2859f080f1d5a35ec8e" kindref="member">ufpAltModeMask</ref><sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1aceb31ed4d6db842a86597557af80d116" kindref="member">altModeCfg</ref>-&gt;ufp_alt_mode_mask;</highlight></codeline>
<codeline lineno="95"><highlight class="normal"></highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a3df87d55e5b872a87e857e8dfddf8f1a" kindref="member">vdmEmcaRstState</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ggaa7da3e23558bed3d229bdad5c90401a1a7c86f482fd163d4cd731179fd325725f" kindref="member">CY_PDALTMODE_CABLE_DP_RESET_IDLE</ref>;</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1ab8c2f329d9d1b6d732b553eb0072f601" kindref="member">vdmVcsRqtState</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ggaa31ccb72f7bd9114cb70754d774959b3a80d5724dcb75f4e86ddb2fe2c72b43b9" kindref="member">CY_PDALTMODE_VCONN_RQT_INACTIVE</ref>;</highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a5790555497ca6a84993a77fced6c6379" kindref="member">hwDetails</ref>-&gt;<ref refid="structcy__stc__pdaltmode__hw__details__t_1a204760ad38feca9dccea78dca31fe854" kindref="member">muxCurState</ref><sp/>=<sp/>(uint8_t)<ref refid="group__group__pdaltmode__alt__mode__hw__enums_1gga6e2d96963afcf43ec5dfe3d5a18d6bc6a534d4e763bd10e41f9fb90271aae956d" kindref="member">CY_PDALTMODE_MUX_CONFIG_ISOLATE</ref>;</highlight></codeline>
<codeline lineno="99"><highlight class="normal"></highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga1d6649eff94658f66fd19b181b79c9ea" kindref="member">Cy_PdAltMode_Mngr_GetAltModeNumb</ref>)(ptrAltModeContext)<sp/>!=<sp/>(uint8_t)</highlight><highlight class="keyword">false</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>if<sp/>current<sp/>data<sp/>role<sp/>is<sp/>DFP<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(ptrPdStackContext-&gt;dpmConfig.curPortType<sp/>!=<sp/>CY_PD_PRT_TYPE_UFP)</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca03c528225df3dee5ac1e98b1e77a1ec9" kindref="member">CY_PDALTMODE_VDM_TASK_DISC_ID</ref>;</highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca26cf41d32bf19ca82712858c4e3b2038" kindref="member">CY_PDALTMODE_VDM_TASK_REG_ATCH_TGT_INFO</ref>;</highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="112"><highlight class="normal"></highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="114"><highlight class="normal"></highlight></codeline>
<codeline lineno="115"><highlight class="normal">}</highlight></codeline>
<codeline lineno="116"><highlight class="normal"></highlight></codeline>
<codeline lineno="117"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga5be3659995fa9a8bba055bd160b2ec41" kindref="member">Cy_PdAltMode_VdmTask_IsIdle</ref>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext)</highlight></codeline>
<codeline lineno="118"><highlight class="normal">{</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_stc_pdstack_context_t<sp/>*ptrPdStackContext<sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a34f18ac1a604068a73e013c483d55104" kindref="member">pdStackContext</ref>;</highlight></codeline>
<codeline lineno="120"><highlight class="normal"></highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="122"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>If<sp/>VDM<sp/>manager<sp/>is<sp/>enabled,<sp/>check:</highlight></codeline>
<codeline lineno="123"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1.<sp/>Whether<sp/>BUSY<sp/>timer<sp/>is<sp/>running</highlight></codeline>
<codeline lineno="124"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>2.<sp/>Whether<sp/>the<sp/>Alt<sp/>Mode<sp/>tasks<sp/>are<sp/>idle</highlight></codeline>
<codeline lineno="125"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>!((bool)ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1a5ea8f165a1c5b45f73dc45cf5d98f4fd" kindref="member">vdmTaskEn</ref><sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((TIMER_CALL_MAP(Cy_PdUtils_SwTimer_IsRunning)<sp/>(ptrPdStackContext-&gt;ptrTimerContext,<sp/>CY_PDALTMODE_GET_TIMER_ID(ptrPdStackContext,<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga8ce268202ee29df67f500d14a1273881a49535375901fa7e1420cd491a8cf4b3e" kindref="member">CY_PDALTMODE_VDM_BUSY_TIMER</ref>)))<sp/>||</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1acb352c125c763362864a110417fee400" kindref="member">vdmTask</ref><sp/>!=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9cadc894f9194c516d6ce6410f754bf1d8c" kindref="member">CY_PDALTMODE_VDM_TASK_ALT_MODE</ref>)<sp/>||</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga3d25c80027d29b651d5fdfbaa8bac169" kindref="member">Cy_PdAltMode_Mngr_IsAltModeMngrIdle</ref>)(ptrAltModeContext)<sp/>==<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>);</highlight></codeline>
<codeline lineno="131"><highlight class="normal">}</highlight></codeline>
<codeline lineno="132"><highlight class="normal"></highlight></codeline>
<codeline lineno="133"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gab6c935c30c71fd0e04c90c3298f787fa" kindref="member">Cy_PdAltMode_VdmTask_Manager</ref>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext)</highlight></codeline>
<codeline lineno="134"><highlight class="normal">{</highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_stc_pdstack_context_t<sp/>*ptrPdStackContext<sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a34f18ac1a604068a73e013c483d55104" kindref="member">pdStackContext</ref>;</highlight></codeline>
<codeline lineno="136"><highlight class="normal"></highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>VDM<sp/>task<sp/>enabled<sp/>check<sp/>is<sp/>performed<sp/>by<sp/>the<sp/>caller<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(TIMER_CALL_MAP(Cy_PdUtils_SwTimer_IsRunning)(ptrPdStackContext-&gt;ptrTimerContext,</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>CY_PDALTMODE_GET_TIMER_ID(ptrPdStackContext,<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga8ce268202ee29df67f500d14a1273881a49535375901fa7e1420cd491a8cf4b3e" kindref="member">CY_PDALTMODE_VDM_BUSY_TIMER</ref>))<sp/>==<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="141"><highlight class="normal">#</highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>MUX_DELAY_EN</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||<sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1a752511e4e69be13d3d08a7e606090361" kindref="member">isMuxBusy</ref><sp/>!=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="143"><highlight class="normal">#endif<sp/></highlight><highlight class="comment">/*<sp/>MUX_DELAY_EN<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="148"><highlight class="normal"></highlight></codeline>
<codeline lineno="149"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>MUX_UPDATE_PAUSE_FSM</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>if<sp/>MUX<sp/>is<sp/>not<sp/>busy<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1ae4fd2bb93c7050d3b51ba1d25a3afbd3" kindref="member">muxStat</ref><sp/>==<sp/><ref refid="group__group__pdaltmode__alt__mode__hw__enums_1gga76fe692191168bfcd3be6cee0c268493a3c152118c65f37a723cee8e4dbf42dab" kindref="member">CY_PDALTMODE_APP_MUX_STATE_BUSY</ref>)</highlight></codeline>
<codeline lineno="153"><highlight class="normal">#if<sp/>((!RIDGE_I2C_HPD_ENABLE)<sp/>&amp;&amp;<sp/>(DP_DFP_SUPP))</highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||<sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a5790555497ca6a84993a77fced6c6379" kindref="member">hwDetails</ref>-&gt;<ref refid="structcy__stc__pdaltmode__hw__details__t_1a5227b28b41b25c100d7b8a1da74128eb" kindref="member">appMuxUpdateReq</ref><sp/>!=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="155"><highlight class="normal">#endif<sp/></highlight><highlight class="comment">/*<sp/>(!RIDGE_I2C_HPD_ENABLE)<sp/>&amp;&amp;<sp/>(DP_DFP_SUPP)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="160"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>MUX_UPDATE_PAUSE_FSM<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="161"><highlight class="normal"></highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>if<sp/>cable<sp/>reset<sp/>is<sp/>required<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1a20b1199471de10b3bdb57d381364cd42" kindref="member">trigCblRst</ref><sp/>!=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(PDSTACK_CALL_MAP(Cy_PdStack_Dpm_SendPdCommand)(ptrPdStackContext,<sp/>CY_PDSTACK_DPM_CMD_SEND_CABLE_RESET,<sp/>NULL,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/>NULL)<sp/>==<sp/>CY_PDSTACK_STAT_SUCCESS)</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(void)TIMER_CALL_MAP(Cy_PdUtils_SwTimer_StartWocb)(ptrPdStackContext-&gt;ptrTimerContext,</highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>CY_PDALTMODE_GET_TIMER_ID(ptrPdStackContext,<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga8ce268202ee29df67f500d14a1273881a49535375901fa7e1420cd491a8cf4b3e" kindref="member">CY_PDALTMODE_VDM_BUSY_TIMER</ref>),<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a2083b9e4f1976568c605c50a24a67d18" kindref="member">appCblStartDelay</ref>);</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1a20b1199471de10b3bdb57d381364cd42" kindref="member">trigCblRst</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="173"><highlight class="normal"></highlight></codeline>
<codeline lineno="174"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>CY_PD_USB4_SUPPORT_ENABLE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a058a7eddfaa145f9f7353c752a4354e8" kindref="member">usb4UpdatePending</ref><sp/>!=<sp/>0x00U)</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>USB4<sp/>related<sp/>MUX<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(void)<ref refid="group__group__pdaltmode__usb4__functions_1ga221562ee4970b23811e3ba9055a08b67" kindref="member">Cy_PdAltMode_Usb4_UpdateDataStatus</ref><sp/>(ptrAltModeContext,<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a789c5bea31bbce4da60511291047cdac" kindref="member">eudoBuf</ref>.cmdDo[0],<sp/><ref refid="group__group__pdaltmode__common__macros_1ga2cb7840adbf420357dfbb997f0f2b3a3" kindref="member">CY_PDALTMODE_MNGR_NO_DATA</ref>);</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a058a7eddfaa145f9f7353c752a4354e8" kindref="member">usb4UpdatePending</ref><sp/>=<sp/>0x00U;</highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="181"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>CY_PD_USB4_SUPPORT_ENABLE<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="182"><highlight class="normal"></highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Get<sp/>current<sp/>VDM<sp/>task<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1acb352c125c763362864a110417fee400" kindref="member">vdmTask</ref>)</highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9cafdaff6d78ac13c01c80024f4d1c0d1f1" kindref="member">CY_PDALTMODE_VDM_TASK_WAIT</ref>:</highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="188"><highlight class="normal"></highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9cad89c7954e0be8fdb08211347ba261925" kindref="member">CY_PDALTMODE_VDM_TASK_INIT</ref>:</highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1acb352c125c763362864a110417fee400" kindref="member">vdmTask</ref><sp/>=<sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gae1f7226db52a7cdbb4f60ab893353b01" kindref="member">Cy_PdAltMode_VdmTask_Init</ref>)(ptrAltModeContext);</highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="192"><highlight class="normal"></highlight></codeline>
<codeline lineno="193"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>((DFP_ALT_MODE_SUPP)<sp/>||<sp/>(UFP_MODE_DISC_ENABLE))</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca03c528225df3dee5ac1e98b1e77a1ec9" kindref="member">CY_PDALTMODE_VDM_TASK_DISC_ID</ref>:</highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1acb352c125c763362864a110417fee400" kindref="member">vdmTask</ref><sp/>=<sp/><sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gaff4fa0d53781f814413f9311b43fe1da" kindref="member">Cy_PdAltMode_VdmTask_MngDiscId</ref>)(ptrAltModeContext,<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a7e69c43b3b2dd3eed1c6932869deb63d" kindref="member">vdmEvt</ref>);</highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="197"><highlight class="normal"></highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca72edaaa68587cf25316c845237d32cef" kindref="member">CY_PDALTMODE_VDM_TASK_DISC_SVID</ref>:</highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1acb352c125c763362864a110417fee400" kindref="member">vdmTask</ref><sp/>=<sp/><sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gaade89d4c99b2b98a132b32dc3cb87377" kindref="member">Cy_PdAltMode_VdmTask_MngDiscSvid</ref>)(ptrAltModeContext,<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a7e69c43b3b2dd3eed1c6932869deb63d" kindref="member">vdmEvt</ref>);</highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="201"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>((DFP_ALT_MODE_SUPP)<sp/>||<sp/>(UFP_MODE_DISC_ENABLE))<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="202"><highlight class="normal"></highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca975ad4fb2e6c7feb0cb1127be8325e3c" kindref="member">CY_PDALTMODE_VDM_TASK_SEND_MSG</ref>:</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(void)ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga09c839b7b5f0abd38fca51951d82d766" kindref="member">Cy_PdAltMode_VdmTask_ComposeVdm</ref>)(ptrAltModeContext);</highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1acb352c125c763362864a110417fee400" kindref="member">vdmTask</ref><sp/>=<sp/>Cy_PdAltMode_VdmTask_SendVdm(ptrAltModeContext);</highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="207"><highlight class="normal"></highlight></codeline>
<codeline lineno="208"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>CY_PD_USB4_SUPPORT_ENABLE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca519562b24f860ad1d56c945d74f4a792" kindref="member">CY_PDALTMODE_VDM_TASK_USB4_TBT</ref>:</highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1acb352c125c763362864a110417fee400" kindref="member">vdmTask</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__usb4__functions_1ga637509703647f7d6175ad89fd71d3f49" kindref="member">Cy_PdAltMode_Usb4_TbtHandler</ref>(ptrAltModeContext,<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a7e69c43b3b2dd3eed1c6932869deb63d" kindref="member">vdmEvt</ref>);</highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="212"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>CY_PD_USB4_SUPPORT_ENABLE<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="213"><highlight class="normal"></highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca26cf41d32bf19ca82712858c4e3b2038" kindref="member">CY_PDALTMODE_VDM_TASK_REG_ATCH_TGT_INFO</ref>:</highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1acb352c125c763362864a110417fee400" kindref="member">vdmTask</ref><sp/>=<sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gadcf28e55c515d940ed725d86e8ca65d6" kindref="member">Cy_PdAltMode_Mngr_RegAltModeMngr</ref>)(ptrAltModeContext,</highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a9ed652c4200ff02aee0fe7d2038a7f53" kindref="member">atchTgt</ref>,<sp/>&amp;ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1ae35514d1f3ab5b9c3e9a3b467934ed08" kindref="member">vdmMsg</ref>);</highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a7e69c43b3b2dd3eed1c6932869deb63d" kindref="member">vdmEvt</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga53976be265d41463919b3ea93da4cf30abd914a67376582616bd3cd1949b105ca" kindref="member">CY_PDALTMODE_VDM_EVT_RUN</ref>;</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="219"><highlight class="normal"></highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9cadc894f9194c516d6ce6410f754bf1d8c" kindref="member">CY_PDALTMODE_VDM_TASK_ALT_MODE</ref>:</highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1acb352c125c763362864a110417fee400" kindref="member">vdmTask</ref><sp/>=<sp/><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga3bf3d903b17da9773d466736097918ec" kindref="member">Cy_PdAltMode_Mngr_AltModeProcess</ref>(ptrAltModeContext,<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a7e69c43b3b2dd3eed1c6932869deb63d" kindref="member">vdmEvt</ref>);</highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1acb352c125c763362864a110417fee400" kindref="member">vdmTask</ref><sp/>==<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca975ad4fb2e6c7feb0cb1127be8325e3c" kindref="member">CY_PDALTMODE_VDM_TASK_SEND_MSG</ref>)<sp/>||<sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1acb352c125c763362864a110417fee400" kindref="member">vdmTask</ref><sp/>==<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9cadc894f9194c516d6ce6410f754bf1d8c" kindref="member">CY_PDALTMODE_VDM_TASK_ALT_MODE</ref>))</highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a7e69c43b3b2dd3eed1c6932869deb63d" kindref="member">vdmEvt</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga53976be265d41463919b3ea93da4cf30abd914a67376582616bd3cd1949b105ca" kindref="member">CY_PDALTMODE_VDM_EVT_RUN</ref>;</highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="227"><highlight class="normal"></highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca7eff1b48be7cbe38e7135ce320e01759" kindref="member">CY_PDALTMODE_VDM_TASK_EXIT</ref>:</highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gaa3cffcb7d5f8a8f64259274abcd58b92" kindref="member">Cy_PdAltMode_VdmTask_MngrDeInit</ref>(ptrAltModeContext);</highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1aa64a8201b153c51cc5099bfd8a02059b" kindref="member">vdmPrcsFailed</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="231"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a058a7eddfaa145f9f7353c752a4354e8" kindref="member">usb4UpdatePending</ref><sp/>=<sp/>0x00U;</highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="233"><highlight class="normal"></highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>No<sp/>statement<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="238"><highlight class="normal">}</highlight></codeline>
<codeline lineno="239"><highlight class="normal"></highlight></codeline>
<codeline lineno="240"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga8051f3f664de29ce2bec592dff75345f" kindref="member">Cy_PdAltMode_VdmTask_RetryCheck</ref>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext,<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga8ad0f571a865b8fb10fcdc4ea756a05b" kindref="member">cy_en_pdaltmode_fail_status_t</ref><sp/>failStat)</highlight></codeline>
<codeline lineno="241"><highlight class="normal">{</highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_stc_pdstack_context_t<sp/>*ptrPdStackContext<sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a34f18ac1a604068a73e013c483d55104" kindref="member">pdStackContext</ref>;</highlight></codeline>
<codeline lineno="243"><highlight class="normal"></highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><sp/><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a4b36298faf799e5e6e8af46058c05ab8" kindref="member">recRetryCnt</ref>)++;</highlight></codeline>
<codeline lineno="245"><highlight class="normal"></highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>we<sp/>don&apos;t<sp/>receive<sp/>response<sp/>more<sp/>than<sp/>recRetryCnt<sp/>notify<sp/>it<sp/>is<sp/>fail<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a4b36298faf799e5e6e8af46058c05ab8" kindref="member">recRetryCnt</ref><sp/>&gt;<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__macros_1gace9facd57c1e45b998eab65879e7b0bf" kindref="member">CY_PDALTMODE_MNGR_MAX_RETRY_CNT</ref>)</highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga1f966ab56ff73f1d69b8752c1a9d9330" kindref="member">Cy_PdAltMode_VdmTask_SetVdmFailed</ref>)(ptrAltModeContext,<sp/>failStat);</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="252"><highlight class="normal"></highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Try<sp/>to<sp/>send<sp/>message<sp/>again<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1acb352c125c763362864a110417fee400" kindref="member">vdmTask</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca975ad4fb2e6c7feb0cb1127be8325e3c" kindref="member">CY_PDALTMODE_VDM_TASK_SEND_MSG</ref>;</highlight></codeline>
<codeline lineno="255"><highlight class="normal"></highlight></codeline>
<codeline lineno="256"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(failStat<sp/>==<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga8ad0f571a865b8fb10fcdc4ea756a05ba5f1734ba137be9f87ebcaa93e570982b" kindref="member">CY_PDALTMODE_VDM_BUSY</ref>)</highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Start<sp/>a<sp/>BUSY<sp/>timer<sp/>to<sp/>delay<sp/>the<sp/>retry<sp/>attempt<sp/>if<sp/>port<sp/>partner<sp/>is<sp/>busy.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="259"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(void)TIMER_CALL_MAP(Cy_PdUtils_SwTimer_StartWocb)<sp/>(ptrPdStackContext-&gt;ptrTimerContext,</highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>CY_PDALTMODE_GET_TIMER_ID(ptrPdStackContext,<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga8ce268202ee29df67f500d14a1273881a49535375901fa7e1420cd491a8cf4b3e" kindref="member">CY_PDALTMODE_VDM_BUSY_TIMER</ref>),<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1aee85e2f409d8f441497cf3a5d5a49947" kindref="member">vdmFailRetryDelay</ref>);</highlight></codeline>
<codeline lineno="261"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Fix<sp/>for<sp/>Ellisys<sp/>VDMD<sp/>tests:<sp/>delay<sp/>the<sp/>retry<sp/>by<sp/>10<sp/>ms.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="265"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(void)TIMER_CALL_MAP(Cy_PdUtils_SwTimer_StartWocb)<sp/>(ptrPdStackContext-&gt;ptrTimerContext,</highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>CY_PDALTMODE_GET_TIMER_ID(ptrPdStackContext,<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga8ce268202ee29df67f500d14a1273881a49535375901fa7e1420cd491a8cf4b3e" kindref="member">CY_PDALTMODE_VDM_BUSY_TIMER</ref>),<sp/>10u);</highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="268"><highlight class="normal"></highlight></codeline>
<codeline lineno="269"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="270"><highlight class="normal">}</highlight></codeline>
<codeline lineno="271"><highlight class="normal"></highlight></codeline>
<codeline lineno="272"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga1f966ab56ff73f1d69b8752c1a9d9330" kindref="member">Cy_PdAltMode_VdmTask_SetVdmFailed</ref>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext,<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga8ad0f571a865b8fb10fcdc4ea756a05b" kindref="member">cy_en_pdaltmode_fail_status_t</ref><sp/>failStat)</highlight></codeline>
<codeline lineno="273"><highlight class="normal">{</highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Reset<sp/>retry<sp/>counters<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a4b36298faf799e5e6e8af46058c05ab8" kindref="member">recRetryCnt</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a7e69c43b3b2dd3eed1c6932869deb63d" kindref="member">vdmEvt</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga53976be265d41463919b3ea93da4cf30a4b471a5f9cc7707f702e5d2bf6848af1" kindref="member">CY_PDALTMODE_VDM_EVT_FAIL</ref>;</highlight></codeline>
<codeline lineno="277"><highlight class="normal"></highlight></codeline>
<codeline lineno="278"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>failed<sp/>and<sp/>save<sp/>failed<sp/>command<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="279"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1ae35514d1f3ab5b9c3e9a3b467934ed08" kindref="member">vdmMsg</ref>.<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a96568aa7466ed90908c4fc903678f203" kindref="member">vdo</ref>-&gt;std_vdm_hdr.cmd<sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a64b83390d1e5bb109789b5f261897199" kindref="member">altModeMngrStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__alt__mode__mngr__status__t_1a380ad5e3a08567c4b6ca68ad50cfab91" kindref="member">vdmBuf</ref>.cmdDo[0].std_vdm_hdr.cmd;</highlight></codeline>
<codeline lineno="280"><highlight class="normal"></highlight></codeline>
<codeline lineno="281"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Save<sp/>failure<sp/>code<sp/>in<sp/>the<sp/>object<sp/>position<sp/>field<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="282"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1ae35514d1f3ab5b9c3e9a3b467934ed08" kindref="member">vdmMsg</ref>.<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a450b366ec51f4b9bb3dc3c9ea22997c9" kindref="member">vdmHeader</ref>.std_vdm_hdr.objPos<sp/>=<sp/>(uint32_t)failStat;</highlight></codeline>
<codeline lineno="283"><highlight class="normal">}</highlight></codeline>
<codeline lineno="284"><highlight class="normal"></highlight></codeline>
<codeline lineno="285"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Received<sp/>VDM<sp/>callback<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="286"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>Cy_PdAltMode_VdmTask_RecCbk(cy_stc_pdstack_context_t<sp/>*ptrPdStackContext,<sp/>cy_en_pdstack_resp_status_t<sp/>status,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>cy_stc_pdstack_pd_packet_t*<sp/>recVdm)</highlight></codeline>
<codeline lineno="287"><highlight class="normal">{</highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext<sp/>=<sp/>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*)ptrPdStackContext-&gt;ptrAltModeContext;</highlight></codeline>
<codeline lineno="289"><highlight class="normal"></highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>response;</highlight></codeline>
<codeline lineno="291"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>run_task_flag<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="292"><highlight class="normal"></highlight></codeline>
<codeline lineno="293"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>response<sp/>ACK<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="294"><highlight class="normal"><sp/><sp/><sp/><sp/>if<sp/>(status<sp/>==<sp/>CY_PDSTACK_RES_RCVD)</highlight></codeline>
<codeline lineno="295"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="296"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>whether<sp/>received<sp/>message<sp/>is<sp/>a<sp/>VDM<sp/>and<sp/>treat<sp/>as<sp/>NAK<sp/>otherwise.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((recVdm-&gt;msg<sp/>!=<sp/>(uint8_t)CY_PDSTACK_DATA_MSG_VDM)<sp/>||<sp/>(recVdm-&gt;len<sp/>==<sp/>0U))</highlight></codeline>
<codeline lineno="298"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="299"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Notify<sp/>manager<sp/>with<sp/>failed<sp/>event<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="300"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga1f966ab56ff73f1d69b8752c1a9d9330" kindref="member">Cy_PdAltMode_VdmTask_SetVdmFailed</ref>)(ptrAltModeContext,<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga8ad0f571a865b8fb10fcdc4ea756a05ba54bc70e0bf6670280ae4e432cfb90090" kindref="member">CY_PDALTMODE_VDM_NACK</ref>);</highlight></codeline>
<codeline lineno="301"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>run_task_flag<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="302"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="303"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="304"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Handle<sp/>standard<sp/>VDM<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="306"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(recVdm-&gt;dat[CY_PD_VDM_HEADER_IDX].std_vdm_hdr.vdmType<sp/>==<sp/>(uint32_t)CY_PDSTACK_VDM_TYPE_STRUCTURED)</highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="308"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>response<sp/>=<sp/>recVdm-&gt;dat[CY_PD_VDM_HEADER_IDX].std_vdm_hdr.cmdType;</highlight></codeline>
<codeline lineno="309"><highlight class="normal"></highlight></codeline>
<codeline lineno="310"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>((CY_PD_REV3_ENABLE))</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Update<sp/>VDM<sp/>version<sp/>based<sp/>on<sp/>the<sp/>value<sp/>received<sp/>from<sp/>UFP<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(recVdm-&gt;sop<sp/>==<sp/>CY_PD_SOP)</highlight></codeline>
<codeline lineno="313"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1aba3f2832d6acbf0f5c866d67f8e0090b" kindref="member">appStatusContext</ref>-&gt;vdmVersion<sp/>=</highlight></codeline>
<codeline lineno="315"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint8_t)CY_PDUTILS_GET_MIN<sp/>((ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1aba3f2832d6acbf0f5c866d67f8e0090b" kindref="member">appStatusContext</ref>-&gt;vdmVersion),<sp/>(recVdm-&gt;dat[CY_PD_VDM_HEADER_IDX].std_vdm_hdr.stVer));</highlight></codeline>
<codeline lineno="316"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>MINOR_SVDM_VER_SUPPORT</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="317"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1aba3f2832d6acbf0f5c866d67f8e0090b" kindref="member">appStatusContext</ref>-&gt;vdmMinorVersion<sp/>=</highlight></codeline>
<codeline lineno="318"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint8_t)CY_PDUTILS_GET_MIN<sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1aba3f2832d6acbf0f5c866d67f8e0090b" kindref="member">appStatusContext</ref>-&gt;vdmMinorVersion,<sp/>recVdm-&gt;dat[CY_PD_VDM_HEADER_IDX].std_vdm_hdr.stMinVer);</highlight></codeline>
<codeline lineno="319"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>MINOR_SVDM_VER_SUPPORT<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="320"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="321"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(recVdm-&gt;sop<sp/>==<sp/>CY_PD_SOP_PRIME)</highlight></codeline>
<codeline lineno="322"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="323"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Update<sp/>VDM<sp/>version<sp/>based<sp/>on<sp/>the<sp/>value<sp/>received<sp/>from<sp/>the<sp/>cable<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="324"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrPdStackContext-&gt;dpmStat.cblVdmVersion<sp/>=</highlight></codeline>
<codeline lineno="325"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(cy_en_pdstack_std_vdm_ver_t)CY_PDUTILS_GET_MIN<sp/>(((uint32_t)ptrPdStackContext-&gt;dpmStat.cblVdmVersion),<sp/>(recVdm-&gt;dat[CY_PD_VDM_HEADER_IDX].std_vdm_hdr.stVer));</highlight></codeline>
<codeline lineno="326"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>MINOR_SVDM_VER_SUPPORT</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="327"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrPdStackContext-&gt;cblVdmMinVersion<sp/>=</highlight></codeline>
<codeline lineno="328"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(cy_en_pdstack_std_minor_vdm_ver_t)CY_PDUTILS_GET_MIN<sp/>((uint32_t)ptrPdStackContext-&gt;cblVdmMinVersion,<sp/>recVdm-&gt;dat[CY_PD_VDM_HEADER_IDX].std_vdm_hdr.stMinVer);</highlight></codeline>
<codeline lineno="329"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>MINOR_SVDM_VER_SUPPORT<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="330"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="331"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="332"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight><highlight class="comment">/*<sp/>No<sp/>statement<sp/>*/</highlight><highlight class="normal">}</highlight></codeline>
<codeline lineno="333"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>((CY_PD_REV3_ENABLE))<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="334"><highlight class="normal"></highlight></codeline>
<codeline lineno="335"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Actual<sp/>response<sp/>received<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="336"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(response)</highlight></codeline>
<codeline lineno="337"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="338"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>(uint32_t)CY_PDSTACK_CMD_TYPE_RESP_ACK:</highlight></codeline>
<codeline lineno="339"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="340"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>CY_PD_USB4_SUPPORT_ENABLE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="341"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight></codeline>
<codeline lineno="342"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1a5b2942deed6c6a4382e9d669a62d68c5" kindref="member">usb4Active</ref><sp/>==<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)<sp/><sp/><sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="343"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a1189fb5cced531d9b3d9436abe7d1e25" kindref="member">usb4Flag</ref><sp/>&gt;<sp/><ref refid="group__group__pdaltmode__usb4__enums_1ggaed6a0bdb5fa1306874c9f9dc6703ecd7a64a496858d5eb535490c9581ae541a5d" kindref="member">CY_PDALTMODE_USB4_TBT_CBL_FIND</ref>)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="344"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((recVdm-&gt;sop<sp/>==<sp/>CY_PD_SOP_PRIME)<sp/>||<sp/>(recVdm-&gt;sop<sp/>==<sp/>CY_PD_SOP_DPRIME))</highlight></codeline>
<codeline lineno="345"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="346"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="347"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(void)ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga3aafda05df05c9c09fb60dc5380451b5" kindref="member">Cy_PdAltMode_VdmTask_ParseVdm</ref>)(ptrAltModeContext,<sp/>recVdm);</highlight></codeline>
<codeline lineno="348"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1acb352c125c763362864a110417fee400" kindref="member">vdmTask</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca519562b24f860ad1d56c945d74f4a792" kindref="member">CY_PDALTMODE_VDM_TASK_USB4_TBT</ref>;</highlight></codeline>
<codeline lineno="349"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a7e69c43b3b2dd3eed1c6932869deb63d" kindref="member">vdmEvt</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga53976be265d41463919b3ea93da4cf30a981de98f344b91aee860d9ae494d0444" kindref="member">CY_PDALTMODE_VDM_EVT_EVAL</ref>;</highlight></codeline>
<codeline lineno="350"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="351"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="352"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>CY_PD_USB4_SUPPORT_ENABLE<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="353"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>if<sp/>received<sp/>response<sp/>is<sp/>expected<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="354"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((recVdm-&gt;dat[CY_PD_VDM_HEADER_IDX].std_vdm_hdr.cmd)<sp/>==</highlight></codeline>
<codeline lineno="355"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a64b83390d1e5bb109789b5f261897199" kindref="member">altModeMngrStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__alt__mode__mngr__status__t_1a380ad5e3a08567c4b6ca68ad50cfab91" kindref="member">vdmBuf</ref>.cmdDo[CY_PD_VDM_HEADER_IDX].std_vdm_hdr.cmd)</highlight></codeline>
<codeline lineno="356"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="357"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(void)ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga3aafda05df05c9c09fb60dc5380451b5" kindref="member">Cy_PdAltMode_VdmTask_ParseVdm</ref>)(ptrAltModeContext,<sp/>recVdm);</highlight></codeline>
<codeline lineno="358"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a7e69c43b3b2dd3eed1c6932869deb63d" kindref="member">vdmEvt</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga53976be265d41463919b3ea93da4cf30a981de98f344b91aee860d9ae494d0444" kindref="member">CY_PDALTMODE_VDM_EVT_EVAL</ref>;</highlight></codeline>
<codeline lineno="359"><highlight class="normal"></highlight></codeline>
<codeline lineno="360"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Reset<sp/>timer<sp/>counter<sp/>when<sp/>ACK<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="361"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a4b36298faf799e5e6e8af46058c05ab8" kindref="member">recRetryCnt</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="362"><highlight class="normal"></highlight></codeline>
<codeline lineno="363"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Continue<sp/>the<sp/>state<sp/>machine<sp/>operation<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="364"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>run_task_flag<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="365"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="366"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga8051f3f664de29ce2bec592dff75345f" kindref="member">Cy_PdAltMode_VdmTask_RetryCheck</ref>)(ptrAltModeContext,<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga8ad0f571a865b8fb10fcdc4ea756a05ba5f1734ba137be9f87ebcaa93e570982b" kindref="member">CY_PDALTMODE_VDM_BUSY</ref>)<sp/>==<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="367"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>for<sp/>retries.<sp/>If<sp/>failure<sp/>persists<sp/>after<sp/>all<sp/>retries,<sp/>go<sp/>to<sp/>exit.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="368"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="369"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>run_task_flag<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="370"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="371"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="372"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="373"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>No<sp/>statement<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="374"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="375"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="376"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="377"><highlight class="normal"></highlight></codeline>
<codeline lineno="378"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>(uint32_t)CY_PDSTACK_CMD_TYPE_INITIATOR:</highlight></codeline>
<codeline lineno="379"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>(uint32_t)CY_PDSTACK_CMD_TYPE_RESP_BUSY:</highlight></codeline>
<codeline lineno="380"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Target<sp/>is<sp/>BUSY.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="381"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="382"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>for<sp/>retries.<sp/>If<sp/>failure<sp/>persists<sp/>after<sp/>all<sp/>retries,<sp/>go<sp/>to<sp/>exit.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="383"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga8051f3f664de29ce2bec592dff75345f" kindref="member">Cy_PdAltMode_VdmTask_RetryCheck</ref>)(ptrAltModeContext,<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga8ad0f571a865b8fb10fcdc4ea756a05ba5f1734ba137be9f87ebcaa93e570982b" kindref="member">CY_PDALTMODE_VDM_BUSY</ref>)<sp/>==<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="384"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="385"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>run_task_flag<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="386"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="387"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="388"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="389"><highlight class="normal"></highlight></codeline>
<codeline lineno="390"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="391"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Target<sp/>NAK-ed<sp/>the<sp/>message<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="392"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="393"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Notify<sp/>manager<sp/>with<sp/>failed<sp/>event<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="394"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga1f966ab56ff73f1d69b8752c1a9d9330" kindref="member">Cy_PdAltMode_VdmTask_SetVdmFailed</ref>)(ptrAltModeContext,<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga8ad0f571a865b8fb10fcdc4ea756a05ba54bc70e0bf6670280ae4e432cfb90090" kindref="member">CY_PDALTMODE_VDM_NACK</ref>);</highlight></codeline>
<codeline lineno="395"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>run_task_flag<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="396"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="398"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="399"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="400"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Handle<sp/>UVDM<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="401"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="402"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="403"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(void)ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga3aafda05df05c9c09fb60dc5380451b5" kindref="member">Cy_PdAltMode_VdmTask_ParseVdm</ref>)(ptrAltModeContext,<sp/>recVdm);</highlight></codeline>
<codeline lineno="404"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a7e69c43b3b2dd3eed1c6932869deb63d" kindref="member">vdmEvt</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga53976be265d41463919b3ea93da4cf30a981de98f344b91aee860d9ae494d0444" kindref="member">CY_PDALTMODE_VDM_EVT_EVAL</ref>;</highlight></codeline>
<codeline lineno="405"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Reset<sp/>timer<sp/>counter<sp/>when<sp/>ACK<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="406"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a4b36298faf799e5e6e8af46058c05ab8" kindref="member">recRetryCnt</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="407"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>run_task_flag<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="408"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="409"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="410"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="411"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Attention<sp/>related<sp/>handler<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="412"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1ae35514d1f3ab5b9c3e9a3b467934ed08" kindref="member">vdmMsg</ref>.<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a450b366ec51f4b9bb3dc3c9ea22997c9" kindref="member">vdmHeader</ref>.std_vdm_hdr.cmd<sp/>==<sp/>(uint32_t)CY_PDSTACK_VDM_CMD_ATTENTION)</highlight></codeline>
<codeline lineno="413"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="414"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>This<sp/>statement<sp/>needs<sp/>to<sp/>notify<sp/>Alt<sp/>Mode<sp/>that<sp/>Attention<sp/>VDM<sp/>was<sp/>successfully<sp/>sent.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="415"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((status<sp/>==<sp/>CY_PDSTACK_CMD_SENT)<sp/>&amp;&amp;<sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1acb352c125c763362864a110417fee400" kindref="member">vdmTask</ref><sp/>==<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9cafdaff6d78ac13c01c80024f4d1c0d1f1" kindref="member">CY_PDALTMODE_VDM_TASK_WAIT</ref>))</highlight></codeline>
<codeline lineno="416"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="417"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Start<sp/>a<sp/>timer;<sp/>Command<sp/>will<sp/>be<sp/>retried<sp/>when<sp/>timer<sp/>expires.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="418"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>TIMER_CALL_MAP(Cy_PdUtils_SwTimer_Stop)(ptrPdStackContext-&gt;ptrTimerContext,<sp/>CY_PDALTMODE_GET_TIMER_ID(ptrPdStackContext,<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga8ce268202ee29df67f500d14a1273881a49535375901fa7e1420cd491a8cf4b3e" kindref="member">CY_PDALTMODE_VDM_BUSY_TIMER</ref>));</highlight></codeline>
<codeline lineno="419"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a7e69c43b3b2dd3eed1c6932869deb63d" kindref="member">vdmEvt</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga53976be265d41463919b3ea93da4cf30a981de98f344b91aee860d9ae494d0444" kindref="member">CY_PDALTMODE_VDM_EVT_EVAL</ref>;</highlight></codeline>
<codeline lineno="420"><highlight class="normal"></highlight></codeline>
<codeline lineno="421"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Reset<sp/>retry<sp/>counter<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="422"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a4b36298faf799e5e6e8af46058c05ab8" kindref="member">recRetryCnt</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="423"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Continue<sp/>the<sp/>state<sp/>machine<sp/>operation<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="424"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>run_task_flag<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="425"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="426"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(status<sp/>==<sp/>CY_PDSTACK_SEQ_ABORTED)</highlight></codeline>
<codeline lineno="427"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="428"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Try<sp/>to<sp/>send<sp/>message<sp/>again<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="429"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>run_task_flag<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="430"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="431"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="432"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="433"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>No<sp/>statement<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="434"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="435"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="436"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="437"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="438"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Good<sp/>CRC<sp/>not<sp/>received<sp/>or<sp/>no<sp/>response<sp/>(maybe<sp/>corrupted<sp/>packet).<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="439"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((status<sp/>==<sp/>CY_PDSTACK_CMD_FAILED)<sp/>||<sp/>(status<sp/>==<sp/>CY_PDSTACK_RES_TIMEOUT))</highlight></codeline>
<codeline lineno="440"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="441"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>for<sp/>retries.<sp/>If<sp/>failure<sp/>persists<sp/>after<sp/>all<sp/>retries,<sp/>go<sp/>to<sp/>exit.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="442"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga8051f3f664de29ce2bec592dff75345f" kindref="member">Cy_PdAltMode_VdmTask_RetryCheck</ref>)(ptrAltModeContext,<sp/>(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga8ad0f571a865b8fb10fcdc4ea756a05b" kindref="member">cy_en_pdaltmode_fail_status_t</ref>)status)<sp/>==<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="443"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="444"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>run_task_flag<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="445"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="446"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="447"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="448"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="449"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(status<sp/>==<sp/>CY_PDSTACK_SEQ_ABORTED)</highlight></codeline>
<codeline lineno="450"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="451"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Try<sp/>to<sp/>send<sp/>message<sp/>again<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="452"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1acb352c125c763362864a110417fee400" kindref="member">vdmTask</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca975ad4fb2e6c7feb0cb1127be8325e3c" kindref="member">CY_PDALTMODE_VDM_TASK_SEND_MSG</ref>;</highlight></codeline>
<codeline lineno="453"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="454"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="455"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="456"><highlight class="normal"></highlight></codeline>
<codeline lineno="457"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>if<sp/>we<sp/>need<sp/>run<sp/>any<sp/>task<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="458"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(run_task_flag<sp/>==<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="459"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="460"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>((DFP_ALT_MODE_SUPP)<sp/>||<sp/>(UFP_MODE_DISC_ENABLE))</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="461"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>CY_PD_USB4_SUPPORT_ENABLE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="462"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight></codeline>
<codeline lineno="463"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1a5b2942deed6c6a4382e9d669a62d68c5" kindref="member">usb4Active</ref><sp/>==<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="464"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a1189fb5cced531d9b3d9436abe7d1e25" kindref="member">usb4Flag</ref><sp/>&gt;<sp/><ref refid="group__group__pdaltmode__usb4__enums_1ggaed6a0bdb5fa1306874c9f9dc6703ecd7a64a496858d5eb535490c9581ae541a5d" kindref="member">CY_PDALTMODE_USB4_TBT_CBL_FIND</ref>)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="465"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((recVdm-&gt;sop<sp/>==<sp/>CY_PD_SOP_PRIME)<sp/>||<sp/>(recVdm-&gt;sop<sp/>==<sp/>CY_PD_SOP_DPRIME))</highlight></codeline>
<codeline lineno="466"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="467"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="468"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>USB4<sp/>Task<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="469"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1acb352c125c763362864a110417fee400" kindref="member">vdmTask</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca519562b24f860ad1d56c945d74f4a792" kindref="member">CY_PDALTMODE_VDM_TASK_USB4_TBT</ref>;</highlight></codeline>
<codeline lineno="470"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a7e69c43b3b2dd3eed1c6932869deb63d" kindref="member">vdmEvt</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga53976be265d41463919b3ea93da4cf30a4b471a5f9cc7707f702e5d2bf6848af1" kindref="member">CY_PDALTMODE_VDM_EVT_FAIL</ref>;</highlight></codeline>
<codeline lineno="471"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="472"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="473"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>CY_PD_USB4_SUPPORT_ENABLE<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="474"><highlight class="normal"></highlight></codeline>
<codeline lineno="475"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1ae35514d1f3ab5b9c3e9a3b467934ed08" kindref="member">vdmMsg</ref>.<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a450b366ec51f4b9bb3dc3c9ea22997c9" kindref="member">vdmHeader</ref>.std_vdm_hdr.cmd)</highlight></codeline>
<codeline lineno="476"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="477"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>(uint32_t)CY_PDSTACK_VDM_CMD_DSC_IDENTITY:</highlight></codeline>
<codeline lineno="478"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1acb352c125c763362864a110417fee400" kindref="member">vdmTask</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca03c528225df3dee5ac1e98b1e77a1ec9" kindref="member">CY_PDALTMODE_VDM_TASK_DISC_ID</ref>;</highlight></codeline>
<codeline lineno="479"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="480"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>(uint32_t)CY_PDSTACK_VDM_CMD_DSC_SVIDS:</highlight></codeline>
<codeline lineno="481"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1acb352c125c763362864a110417fee400" kindref="member">vdmTask</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca72edaaa68587cf25316c845237d32cef" kindref="member">CY_PDALTMODE_VDM_TASK_DISC_SVID</ref>;</highlight></codeline>
<codeline lineno="482"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="483"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="484"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1acb352c125c763362864a110417fee400" kindref="member">vdmTask</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9cadc894f9194c516d6ce6410f754bf1d8c" kindref="member">CY_PDALTMODE_VDM_TASK_ALT_MODE</ref>;</highlight></codeline>
<codeline lineno="485"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="486"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="487"><highlight class="normal"></highlight><highlight class="preprocessor">#else<sp/></highlight><highlight class="comment">/*<sp/>((DFP_ALT_MODE_SUPP)<sp/>||<sp/>(UFP_MODE_DISC_ENABLE))<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="488"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1acb352c125c763362864a110417fee400" kindref="member">vdmTask</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9cadc894f9194c516d6ce6410f754bf1d8c" kindref="member">CY_PDALTMODE_VDM_TASK_ALT_MODE</ref>;</highlight></codeline>
<codeline lineno="489"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>((DFP_ALT_MODE_SUPP)<sp/>||<sp/>(UFP_MODE_DISC_ENABLE))<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="490"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="491"><highlight class="normal">}</highlight></codeline>
<codeline lineno="492"><highlight class="normal"></highlight></codeline>
<codeline lineno="493"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>CY_PD_USB4_SUPPORT_ENABLE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="494"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gac108e5ca6df85b23a5b00a02b54c3dca" kindref="member">Cy_PdAltMode_VdmTask_IsUSB4Supp</ref>(cy_pd_pd_do_t*<sp/>vdo_do_p,<sp/>uint8_t<sp/>len)</highlight></codeline>
<codeline lineno="495"><highlight class="normal">{</highlight></codeline>
<codeline lineno="496"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><sp/><sp/><sp/>ufp_usb4_supp<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="497"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><sp/><sp/><sp/>dfp_usb4_supp<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="498"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>dfp_vdo_idx<sp/><sp/><sp/>=<sp/>CY_PD_PRODUCT_TYPE_VDO_3_IDX;</highlight></codeline>
<codeline lineno="499"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>vdo_shift<sp/><sp/><sp/><sp/><sp/>=<sp/>CY_PD_ID_HEADER_IDX;</highlight></codeline>
<codeline lineno="500"><highlight class="normal"></highlight></codeline>
<codeline lineno="501"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>if<sp/>UFP<sp/>supports<sp/>USB4<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="502"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight></codeline>
<codeline lineno="503"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(len<sp/>&gt;=<sp/>CY_PD_PRODUCT_TYPE_VDO_1_IDX)<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="504"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((vdo_do_p[CY_PD_ID_HEADER_IDX<sp/>-<sp/>vdo_shift].std_id_hdr.prodType<sp/>==<sp/>(uint32_t)CY_PDSTACK_PROD_TYPE_PERI)<sp/>||</highlight></codeline>
<codeline lineno="505"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(vdo_do_p[CY_PD_ID_HEADER_IDX<sp/>-<sp/>vdo_shift].std_id_hdr.prodType<sp/>==<sp/>(uint32_t)CY_PDSTACK_PROD_TYPE_HUB))<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="506"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(vdo_do_p[CY_PD_PRODUCT_TYPE_VDO_1_IDX<sp/>-<sp/>vdo_shift].val<sp/>!=<sp/><ref refid="group__group__pdaltmode__common__macros_1ga2cb7840adbf420357dfbb997f0f2b3a3" kindref="member">CY_PDALTMODE_MNGR_NO_DATA</ref>)<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="507"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((vdo_do_p[CY_PD_PRODUCT_TYPE_VDO_1_IDX<sp/>-<sp/>vdo_shift].ufp_vdo_1.devCap<sp/>&amp;<sp/>(uint32_t)CY_PDSTACK_DEV_CAP_USB_4_0)<sp/>!=<sp/>0x0UL)</highlight></codeline>
<codeline lineno="508"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="509"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="510"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ufp_usb4_supp<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="511"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="512"><highlight class="normal"></highlight></codeline>
<codeline lineno="513"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Get<sp/>DFP<sp/>VDO<sp/>index<sp/>based<sp/>on<sp/>product<sp/>type<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="514"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(</highlight></codeline>
<codeline lineno="515"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(vdo_do_p[CY_PD_ID_HEADER_IDX<sp/>-<sp/>vdo_shift].std_id_hdr.prodType<sp/>==<sp/>(uint32_t)CY_PDSTACK_PROD_TYPE_PSD)<sp/>||</highlight></codeline>
<codeline lineno="516"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(vdo_do_p[CY_PD_ID_HEADER_IDX<sp/>-<sp/>vdo_shift].std_id_hdr.prodType<sp/>==<sp/>(uint32_t)CY_PDSTACK_PROD_TYPE_UNDEF)</highlight></codeline>
<codeline lineno="517"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="518"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="519"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dfp_vdo_idx<sp/>=<sp/>CY_PD_PRODUCT_TYPE_VDO_1_IDX;</highlight></codeline>
<codeline lineno="520"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="521"><highlight class="normal"></highlight></codeline>
<codeline lineno="522"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>if<sp/>DFP<sp/>supports<sp/>USB4<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="523"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight></codeline>
<codeline lineno="524"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(len<sp/>&gt;=<sp/>dfp_vdo_idx)<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="525"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(vdo_do_p[CY_PD_ID_HEADER_IDX<sp/>-<sp/>vdo_shift].std_id_hdr.prodTypeDfp<sp/>!=<sp/>(uint32_t)CY_PDSTACK_PROD_TYPE_UNDEF)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="526"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(vdo_do_p[dfp_vdo_idx<sp/>-<sp/>vdo_shift].val<sp/>!=<sp/><ref refid="group__group__pdaltmode__common__macros_1ga2cb7840adbf420357dfbb997f0f2b3a3" kindref="member">CY_PDALTMODE_MNGR_NO_DATA</ref>)<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="527"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((vdo_do_p[dfp_vdo_idx<sp/>-<sp/>vdo_shift].dfp_vdo.hostCap<sp/>&amp;<sp/>(uint32_t)CY_PDSTACK_HOST_CAP_USB_4_0)<sp/>!=<sp/>0x0UL)</highlight></codeline>
<codeline lineno="528"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="529"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="530"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dfp_usb4_supp<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="531"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="532"><highlight class="normal"></highlight></codeline>
<codeline lineno="533"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(ufp_usb4_supp<sp/>||<sp/>dfp_usb4_supp);</highlight></codeline>
<codeline lineno="534"><highlight class="normal">}</highlight></codeline>
<codeline lineno="535"><highlight class="normal"></highlight></codeline>
<codeline lineno="536"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/>cy_en_pdstack_usb_sig_supp_t<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga1b3ceac5352c0095ac1ade77f841cd59" kindref="member">Cy_PdAltMode_VdmTask_GetEudoCblSpeed</ref>(cy_stc_pdstack_context_t<sp/>*ptrPdStackContext)</highlight></codeline>
<codeline lineno="537"><highlight class="normal">{</highlight></codeline>
<codeline lineno="538"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_en_pdstack_usb_sig_supp_t<sp/>cblSpeed<sp/>=<sp/>CY_PDSTACK_USB_2_0;</highlight></codeline>
<codeline lineno="539"><highlight class="normal"></highlight></codeline>
<codeline lineno="540"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrPdStackContext-&gt;dpmStat.cblType<sp/>==<sp/>CY_PDSTACK_PROD_TYPE_ACT_CBL)</highlight></codeline>
<codeline lineno="541"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="542"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cblSpeed<sp/>=<sp/>(cy_en_pdstack_usb_sig_supp_t)((ptrPdStackContext-&gt;dpmStat.cblVdo.pas_cbl_vdo.usbSsSup<sp/>&gt;=<sp/>(uint32_t)CY_PDSTACK_USB_GEN_4)<sp/>?</highlight></codeline>
<codeline lineno="543"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)CY_PDSTACK_USB_GEN_4<sp/>:<sp/>ptrPdStackContext-&gt;dpmStat.cblVdo.std_cbl_vdo.usbSsSup);</highlight></codeline>
<codeline lineno="544"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="545"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="546"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="547"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Upgrade<sp/>passive<sp/>cable<sp/>speed<sp/>according<sp/>to<sp/>Type-C<sp/>specification<sp/>Gen1-&gt;Gen2<sp/>and<sp/>Gen3-&gt;Gen4<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="548"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrPdStackContext-&gt;dpmStat.cblVdo.std_cbl_vdo.usbSsSup<sp/>==<sp/>(uint32_t)CY_PDSTACK_USB_GEN_1)</highlight></codeline>
<codeline lineno="549"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="550"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cblSpeed<sp/>=<sp/>(cy_en_pdstack_usb_sig_supp_t)CY_PDSTACK_USB_GEN_2;</highlight></codeline>
<codeline lineno="551"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="552"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="553"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="554"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cblSpeed<sp/>=<sp/>(cy_en_pdstack_usb_sig_supp_t)((ptrPdStackContext-&gt;dpmStat.cblVdo.std_cbl_vdo.usbSsSup<sp/>&gt;=<sp/>(uint32_t)CY_PDSTACK_USB_GEN_3)<sp/>?</highlight></codeline>
<codeline lineno="555"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)CY_PDSTACK_USB_GEN_4<sp/>:<sp/>ptrPdStackContext-&gt;dpmStat.cblVdo.std_cbl_vdo.usbSsSup);</highlight></codeline>
<codeline lineno="556"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="557"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="558"><highlight class="normal"></highlight></codeline>
<codeline lineno="559"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>cblSpeed;</highlight></codeline>
<codeline lineno="560"><highlight class="normal">}</highlight></codeline>
<codeline lineno="561"><highlight class="normal"></highlight></codeline>
<codeline lineno="562"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga399c1777f494368601cad31a40afca9c" kindref="member">cy_en_pdaltmode_vdm_task_t</ref><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gafc5e5ca6f19ce4cfa4bd0772aa33979e" kindref="member">Cy_PdAltMode_VdmTask_SetEudoParams</ref>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext)</highlight></codeline>
<codeline lineno="563"><highlight class="normal">{</highlight></codeline>
<codeline lineno="564"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structcy__stc__pdaltmode__vdm__msg__info__t" kindref="compound">cy_stc_pdaltmode_vdm_msg_info_t</ref><sp/>*msgP<sp/><sp/>=<sp/>&amp;ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1ae35514d1f3ab5b9c3e9a3b467934ed08" kindref="member">vdmMsg</ref>;</highlight></codeline>
<codeline lineno="565"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_pd_pd_do_t*<sp/>eudo_p<sp/>=<sp/>&amp;ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a789c5bea31bbce4da60511291047cdac" kindref="member">eudoBuf</ref>.cmdDo[0];</highlight></codeline>
<codeline lineno="566"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_stc_pdstack_context_t<sp/>*ptrPdStackContext<sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a34f18ac1a604068a73e013c483d55104" kindref="member">pdStackContext</ref>;</highlight></codeline>
<codeline lineno="567"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga399c1777f494368601cad31a40afca9c" kindref="member">cy_en_pdaltmode_vdm_task_t</ref><sp/>ret<sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca7eff1b48be7cbe38e7135ce320e01759" kindref="member">CY_PDALTMODE_VDM_TASK_EXIT</ref>;</highlight></codeline>
<codeline lineno="568"><highlight class="normal"></highlight></codeline>
<codeline lineno="569"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>if<sp/>cable<sp/>is<sp/>USB<sp/>4.0<sp/>capable<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="570"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight></codeline>
<codeline lineno="571"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a1189fb5cced531d9b3d9436abe7d1e25" kindref="member">usb4Flag</ref><sp/>!=<sp/><ref refid="group__group__pdaltmode__usb4__enums_1ggaed6a0bdb5fa1306874c9f9dc6703ecd7a0cb36f4e7471795aa91f2d2e83516297" kindref="member">CY_PDALTMODE_USB4_FAILED</ref>)<sp/><sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="572"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrPdStackContext-&gt;dpmConfig.emcaPresent<sp/>!=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="573"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="574"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="575"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a96568aa7466ed90908c4fc903678f203" kindref="member">vdo</ref>[CY_PD_PRODUCT_TYPE_VDO_1_IDX<sp/>-<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__macros_1gae4e2aa15a2cf04e0d55157a9d86b51bd" kindref="member">CY_PDALTMODE_MNGR_VDO_START_IDX</ref>].ufp_vdo_1.altModes<sp/>==<sp/>0x0U)</highlight></codeline>
<codeline lineno="576"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="577"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="578"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>Discovery<sp/>process<sp/>could<sp/>not<sp/>be<sp/>run<sp/>if<sp/>Alternate<sp/>Modes&apos;<sp/>field<sp/>in</highlight></codeline>
<codeline lineno="579"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>UFP<sp/>VDO<sp/>1<sp/>response<sp/>is<sp/>set<sp/>to<sp/>zero.</highlight></codeline>
<codeline lineno="580"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="581"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a9691ecac8b26767485b91bd4e75996f7" kindref="member">altModesNotSupp</ref><sp/>=<sp/>0x01;</highlight></codeline>
<codeline lineno="582"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="583"><highlight class="normal"></highlight></codeline>
<codeline lineno="584"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Fill<sp/>EUDO<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="585"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eudo_p-&gt;enterusb_vdo.usbMode<sp/><sp/><sp/><sp/>=<sp/>CY_PD_USB_MODE_USB4;</highlight></codeline>
<codeline lineno="586"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eudo_p-&gt;enterusb_vdo.cableType<sp/><sp/>=<sp/>0x0UL;</highlight></codeline>
<codeline lineno="587"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eudo_p-&gt;enterusb_vdo.cableSpeed<sp/>=<sp/>ptrPdStackContext-&gt;dpmStat.cblVdo.std_cbl_vdo.usbSsSup;</highlight></codeline>
<codeline lineno="588"><highlight class="normal"></highlight></codeline>
<codeline lineno="589"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>active<sp/>cable<sp/>type<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="590"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(ptrPdStackContext-&gt;dpmStat.cblType<sp/>==<sp/>CY_PDSTACK_PROD_TYPE_ACT_CBL)</highlight></codeline>
<codeline lineno="591"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="592"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eudo_p-&gt;enterusb_vdo.cableType<sp/>=<sp/>(uint32_t)CY_PDSTACK_CBL_TYPE_ACTIVE_REDRIVER;</highlight></codeline>
<codeline lineno="593"><highlight class="normal"></highlight></codeline>
<codeline lineno="594"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>VDO<sp/>version<sp/>is<sp/>1.3<sp/>and<sp/>higher<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="595"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((ptrPdStackContext-&gt;dpmStat.cblVdo2.val<sp/>!=<sp/><ref refid="group__group__pdaltmode__common__macros_1ga2cb7840adbf420357dfbb997f0f2b3a3" kindref="member">CY_PDALTMODE_MNGR_NO_DATA</ref>)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="596"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrPdStackContext-&gt;dpmStat.cblVdo.act_cbl_vdo1.vdoVersion<sp/>&gt;=<sp/>CY_PD_CBL_VDO_VERS_1_3))</highlight></codeline>
<codeline lineno="597"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="598"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(ptrPdStackContext-&gt;dpmStat.cblVdo2.act_cbl_vdo2.optIsolated<sp/>!=<sp/>0x0UL)</highlight></codeline>
<codeline lineno="599"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="600"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eudo_p-&gt;enterusb_vdo.cableType<sp/>=<sp/>(uint32_t)CY_PDSTACK_CBL_TYPE_OPTICAL;</highlight></codeline>
<codeline lineno="601"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="602"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((ptrPdStackContext-&gt;dpmStat.cblVdo2.act_cbl_vdo2.phyConn<sp/>!=<sp/>0x0UL)<sp/><sp/>||</highlight></codeline>
<codeline lineno="603"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrPdStackContext-&gt;dpmStat.cblVdo2.act_cbl_vdo2.activeEl<sp/>==<sp/>0x0UL<sp/>))</highlight></codeline>
<codeline lineno="604"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="605"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eudo_p-&gt;enterusb_vdo.cableType<sp/>=<sp/>(uint32_t)CY_PDSTACK_CBL_TYPE_ACTIVE_REDRIVER;</highlight></codeline>
<codeline lineno="606"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="607"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="608"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="609"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eudo_p-&gt;enterusb_vdo.cableType<sp/>=<sp/>(uint32_t)CY_PDSTACK_CBL_TYPE_ACTIVE_RETIMER;</highlight></codeline>
<codeline lineno="610"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="611"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="612"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="613"><highlight class="normal"></highlight></codeline>
<codeline lineno="614"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>EUDO<sp/>cable<sp/>current:<sp/>Only<sp/>honor<sp/>3A<sp/>and<sp/>5A<sp/>capable<sp/>cables.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="615"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eudo_p-&gt;enterusb_vdo.cableCurrent<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="616"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight></codeline>
<codeline lineno="617"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight></codeline>
<codeline lineno="618"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrPdStackContext-&gt;dpmStat.cblType<sp/>==<sp/>CY_PDSTACK_PROD_TYPE_PAS_CBL)<sp/>||</highlight></codeline>
<codeline lineno="619"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrPdStackContext-&gt;dpmStat.cblVdo.std_cbl_vdo.vbusThruCbl<sp/>!=<sp/>0x0UL)</highlight></codeline>
<codeline lineno="620"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="621"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight></codeline>
<codeline lineno="622"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrPdStackContext-&gt;dpmStat.cblVdo.std_cbl_vdo.vbusCur<sp/>==<sp/>(uint32_t)CY_PDSTACK_CBL_VBUS_CUR_3A)<sp/>||</highlight></codeline>
<codeline lineno="623"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrPdStackContext-&gt;dpmStat.cblVdo.std_cbl_vdo.vbusCur<sp/>==<sp/>(uint32_t)CY_PDSTACK_CBL_VBUS_CUR_5A)</highlight></codeline>
<codeline lineno="624"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="625"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="626"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="627"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eudo_p-&gt;enterusb_vdo.cableCurrent<sp/>=<sp/>ptrPdStackContext-&gt;dpmStat.cblVdo.std_cbl_vdo.vbusCur<sp/>+<sp/>0x01UL;</highlight></codeline>
<codeline lineno="628"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="629"><highlight class="normal"></highlight></codeline>
<codeline lineno="630"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>USB4<sp/>not<sp/>supported<sp/>as<sp/>default<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="631"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a1189fb5cced531d9b3d9436abe7d1e25" kindref="member">usb4Flag</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__usb4__enums_1ggaed6a0bdb5fa1306874c9f9dc6703ecd7a0cb36f4e7471795aa91f2d2e83516297" kindref="member">CY_PDALTMODE_USB4_FAILED</ref>;</highlight></codeline>
<codeline lineno="632"><highlight class="normal"></highlight></codeline>
<codeline lineno="633"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Active<sp/>cable<sp/>handler<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="634"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrPdStackContext-&gt;dpmStat.cblType<sp/>==<sp/>CY_PDSTACK_PROD_TYPE_ACT_CBL)</highlight></codeline>
<codeline lineno="635"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="636"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight></codeline>
<codeline lineno="637"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrPdStackContext-&gt;dpmStat.cblVdmVersion<sp/>==<sp/>CY_PDSTACK_STD_VDM_VER2)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="638"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrPdStackContext-&gt;dpmStat.cblVdo.act_cbl_vdo1.vdoVersion<sp/>&gt;=<sp/>CY_PD_CBL_VDO_VERS_1_3)</highlight></codeline>
<codeline lineno="639"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="640"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="641"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Active<sp/>cable<sp/>supports<sp/>USB4<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="642"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight></codeline>
<codeline lineno="643"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrPdStackContext-&gt;dpmStat.cblVdo2.act_cbl_vdo2.usb4Supp<sp/>==<sp/>0x0UL)<sp/><sp/><sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="644"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrPdStackContext-&gt;dpmStat.cblVdo.act_cbl_vdo.usbSsSup<sp/>&gt;=<sp/>(uint32_t)CY_PDSTACK_USB_GEN_1)</highlight></codeline>
<codeline lineno="645"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="646"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="647"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>EUDO<sp/>cable<sp/>speed<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="648"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eudo_p-&gt;enterusb_vdo.cableSpeed<sp/>=<sp/>(uint32_t)ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga1b3ceac5352c0095ac1ade77f841cd59" kindref="member">Cy_PdAltMode_VdmTask_GetEudoCblSpeed</ref>)(ptrPdStackContext);</highlight></codeline>
<codeline lineno="649"><highlight class="normal"></highlight></codeline>
<codeline lineno="650"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Enter<sp/>USB4<sp/>mode<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="651"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__usb4__functions_1gaca0998c989866cffc03ab22c4e3c5939" kindref="member">Cy_PdAltMode_Usb4_Enter</ref>)(ptrAltModeContext,<sp/>CY_PD_SOP_PRIME,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="652"><highlight class="normal"></highlight></codeline>
<codeline lineno="653"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="654"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="655"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrPdStackContext-&gt;dpmStat.cblModeEn<sp/>!=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="656"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="657"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Go<sp/>through<sp/>TBT<sp/>discovery<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="658"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a1189fb5cced531d9b3d9436abe7d1e25" kindref="member">usb4Flag</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__usb4__enums_1ggaed6a0bdb5fa1306874c9f9dc6703ecd7a64a496858d5eb535490c9581ae541a5d" kindref="member">CY_PDALTMODE_USB4_TBT_CBL_FIND</ref>;</highlight></codeline>
<codeline lineno="659"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="660"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="661"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="662"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Do<sp/>nothing<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="663"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="664"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="665"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="666"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="667"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>cable<sp/>speed<sp/>in<sp/>EUDO.<sp/>Since<sp/>it<sp/>is<sp/>known<sp/>that<sp/>cable<sp/>marker<sp/>is<sp/>present,<sp/>a<sp/>non-active<sp/>cable<sp/>has<sp/>to<sp/>be<sp/>passive.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="668"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eudo_p-&gt;enterusb_vdo.cableSpeed<sp/>=<sp/>(uint32_t)ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga1b3ceac5352c0095ac1ade77f841cd59" kindref="member">Cy_PdAltMode_VdmTask_GetEudoCblSpeed</ref>)(ptrPdStackContext);</highlight></codeline>
<codeline lineno="669"><highlight class="normal"></highlight></codeline>
<codeline lineno="670"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((ptrPdStackContext-&gt;dpmStat.cblVdo.std_cbl_vdo.usbSsSup<sp/>==<sp/>(uint32_t)CY_PDSTACK_USB_GEN_2)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="671"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrPdStackContext-&gt;dpmStat.cblModeEn<sp/>!=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="672"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="673"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Run<sp/>TBT<sp/>cable<sp/>discovery<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="674"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a1189fb5cced531d9b3d9436abe7d1e25" kindref="member">usb4Flag</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__usb4__enums_1ggaed6a0bdb5fa1306874c9f9dc6703ecd7a64a496858d5eb535490c9581ae541a5d" kindref="member">CY_PDALTMODE_USB4_TBT_CBL_FIND</ref>;</highlight></codeline>
<codeline lineno="675"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="676"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrPdStackContext-&gt;dpmStat.cblVdo.std_cbl_vdo.usbSsSup<sp/>!=<sp/>(uint32_t)CY_PDSTACK_USB_2_0)</highlight></codeline>
<codeline lineno="677"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="678"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Enter<sp/>USB4<sp/>mode<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="679"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__usb4__functions_1gaca0998c989866cffc03ab22c4e3c5939" kindref="member">Cy_PdAltMode_Usb4_Enter</ref>)(ptrAltModeContext,<sp/>CY_PD_SOP,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="680"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="681"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="682"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="683"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Do<sp/>nothing<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="684"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="685"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="686"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="687"><highlight class="normal"></highlight></codeline>
<codeline lineno="688"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="689"><highlight class="normal">}</highlight></codeline>
<codeline lineno="690"><highlight class="normal"></highlight></codeline>
<codeline lineno="691"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga534c98c7c73b6f6feaa0f71e9b73a32d" kindref="member">Cy_PdAltMode_VdmTask_IsUsb4Cap</ref>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext)</highlight></codeline>
<codeline lineno="692"><highlight class="normal">{</highlight></codeline>
<codeline lineno="693"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structcy__stc__pdaltmode__vdm__msg__info__t" kindref="compound">cy_stc_pdaltmode_vdm_msg_info_t</ref><sp/>*msgP<sp/><sp/>=<sp/>&amp;ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1ae35514d1f3ab5b9c3e9a3b467934ed08" kindref="member">vdmMsg</ref>;</highlight></codeline>
<codeline lineno="694"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_pd_pd_do_t*<sp/>vdo_do_p<sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1aba3f2832d6acbf0f5c866d67f8e0090b" kindref="member">appStatusContext</ref>-&gt;vdmIdVdoResp;</highlight></codeline>
<codeline lineno="695"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_stc_pdstack_context_t<sp/>*ptrPdStackContext<sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a34f18ac1a604068a73e013c483d55104" kindref="member">pdStackContext</ref>;</highlight></codeline>
<codeline lineno="696"><highlight class="normal"></highlight></codeline>
<codeline lineno="697"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>if<sp/>USB4<sp/>mode<sp/>is<sp/>already<sp/>entered<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="698"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1a5b2942deed6c6a4382e9d669a62d68c5" kindref="member">usb4Active</ref><sp/>!=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="699"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="700"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a1189fb5cced531d9b3d9436abe7d1e25" kindref="member">usb4Flag</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__usb4__enums_1ggaed6a0bdb5fa1306874c9f9dc6703ecd7a0cb36f4e7471795aa91f2d2e83516297" kindref="member">CY_PDALTMODE_USB4_FAILED</ref>;</highlight></codeline>
<codeline lineno="701"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a96568aa7466ed90908c4fc903678f203" kindref="member">vdo</ref>[CY_PD_PRODUCT_TYPE_VDO_1_IDX<sp/>-<sp/>CY_PD_ID_HEADER_IDX].ufp_vdo_1.altModes<sp/>&amp;<sp/>CY_PD_UFP_NON_PH_ALT_MODE_SUPP_MASK)<sp/>==<sp/>0x0U)</highlight></codeline>
<codeline lineno="702"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="703"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="704"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="705"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="706"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>if<sp/>CCG<sp/>and<sp/>port<sp/>partner<sp/>supports<sp/>USB<sp/>4.0<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="707"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight></codeline>
<codeline lineno="708"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gac108e5ca6df85b23a5b00a02b54c3dca" kindref="member">Cy_PdAltMode_VdmTask_IsUSB4Supp</ref>)(msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a96568aa7466ed90908c4fc903678f203" kindref="member">vdo</ref>,<sp/>msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1ae865fc2b1c65b511f72dc31f4d1e77fa" kindref="member">vdoNumb</ref>)<sp/>==<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||</highlight></codeline>
<codeline lineno="709"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gac108e5ca6df85b23a5b00a02b54c3dca" kindref="member">Cy_PdAltMode_VdmTask_IsUSB4Supp</ref>)(&amp;vdo_do_p[CY_PD_ID_HEADER_IDX],<sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1aba3f2832d6acbf0f5c866d67f8e0090b" kindref="member">appStatusContext</ref>-&gt;vdmIdVdoCnt<sp/>-<sp/>CY_PD_ID_HEADER_IDX))<sp/>==<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">))<sp/>||</highlight></codeline>
<codeline lineno="710"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrPdStackContext-&gt;dpmConfig.specRevSopLive<sp/>&lt;<sp/>CY_PD_REV3)<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||</highlight></codeline>
<codeline lineno="711"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1a1dfe8d8774b3f0686d66869b964d3d77" kindref="member">usb4DataRstCnt</ref><sp/>&gt;<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__macros_1ga9fe292536474dc0fdb305220a98cda6d" kindref="member">CY_PDALTMODE_VDMTASK_DATA_RST_RETRY_NUMB</ref>)<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||</highlight></codeline>
<codeline lineno="712"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1a381fef34f8f087cb28e2fe109ddb52b2" kindref="member">customHpiHostCapControl</ref><sp/>&amp;<sp/><ref refid="group__group__pdaltmode__common__macros_1ga02c9a577d272d7e7e2833ff85effe3f7" kindref="member">CY_PDALTMODE_USB4_EN_HOST_PARAM_MASK</ref>)<sp/>==<sp/>0x0U)</highlight></codeline>
<codeline lineno="713"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="714"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="715"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="716"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>Cannot<sp/>proceed<sp/>with<sp/>USB4<sp/>if<sp/>there<sp/>is<sp/>no<sp/>USB4<sp/>host<sp/>support,<sp/>UFP<sp/>does<sp/>not<sp/>have<sp/>USB4</highlight></codeline>
<codeline lineno="717"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>device<sp/>support,<sp/>in<sp/>PD<sp/>2.0<sp/>contract,<sp/>or<sp/>if<sp/>there<sp/>has<sp/>been<sp/>too<sp/>many<sp/>data<sp/>resets.</highlight></codeline>
<codeline lineno="718"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="719"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a1189fb5cced531d9b3d9436abe7d1e25" kindref="member">usb4Flag</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__usb4__enums_1ggaed6a0bdb5fa1306874c9f9dc6703ecd7a0cb36f4e7471795aa91f2d2e83516297" kindref="member">CY_PDALTMODE_USB4_FAILED</ref>;</highlight></codeline>
<codeline lineno="720"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="721"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="722"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="723"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Do<sp/>nothing<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="724"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="725"><highlight class="normal"></highlight></codeline>
<codeline lineno="726"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="727"><highlight class="normal">}</highlight></codeline>
<codeline lineno="728"><highlight class="normal"></highlight></codeline>
<codeline lineno="729"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga6bb54a98c312c6eec354cc7356903f16" kindref="member">Cy_PdAltMode_VdmTask_HostCapCheck</ref>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext)</highlight></codeline>
<codeline lineno="730"><highlight class="normal">{</highlight></codeline>
<codeline lineno="731"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_stc_pdstack_context_t<sp/>*ptrPdStackContext<sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a34f18ac1a604068a73e013c483d55104" kindref="member">pdStackContext</ref>;</highlight></codeline>
<codeline lineno="732"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*deviceContext<sp/>=</highlight></codeline>
<codeline lineno="733"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*)ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a2c44432dce2d2c8128d7338825b18526" kindref="member">hostDetails</ref>-&gt;<ref refid="structcy__stc__pdaltmode__host__details__t_1a08f03053bd1816c6e2ae4af0f38fd873" kindref="member">dsAltModeContext</ref>;</highlight></codeline>
<codeline lineno="734"><highlight class="normal"></highlight></codeline>
<codeline lineno="735"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>USB4<sp/>mode<sp/>is<sp/>NOT<sp/>enabled<sp/>-<sp/>then<sp/>do<sp/>not<sp/>issue<sp/>USB4<sp/>mode<sp/>enter<sp/>command.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="736"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(</highlight></codeline>
<codeline lineno="737"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((deviceContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a2c44432dce2d2c8128d7338825b18526" kindref="member">hostDetails</ref>-&gt;<ref refid="structcy__stc__pdaltmode__host__details__t_1abf0875256fb25e10e06e958f9db548f8" kindref="member">dsModeMask</ref><sp/>&amp;<sp/>(1u&lt;&lt;4u))<sp/>!=<sp/>(1u&lt;&lt;4u))<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="738"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrPdStackContext-&gt;port<sp/>==<sp/>TYPEC_PORT_1_IDX)</highlight></codeline>
<codeline lineno="739"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="740"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="741"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a1189fb5cced531d9b3d9436abe7d1e25" kindref="member">usb4Flag</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__usb4__enums_1ggaed6a0bdb5fa1306874c9f9dc6703ecd7a0cb36f4e7471795aa91f2d2e83516297" kindref="member">CY_PDALTMODE_USB4_FAILED</ref>;</highlight></codeline>
<codeline lineno="742"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="743"><highlight class="normal">}</highlight></codeline>
<codeline lineno="744"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>CY_PD_USB4_SUPPORT_ENABLE<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="745"><highlight class="normal"></highlight></codeline>
<codeline lineno="746"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga7290b6708379548ab1896067d82b4e34" kindref="member">Cy_PdAltMode_VdmTask_GotoDiscSvid</ref>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext)</highlight></codeline>
<codeline lineno="747"><highlight class="normal">{</highlight></codeline>
<codeline lineno="748"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structcy__stc__pdaltmode__vdm__msg__info__t" kindref="compound">cy_stc_pdaltmode_vdm_msg_info_t</ref><sp/>*msgP<sp/><sp/>=<sp/>&amp;ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1ae35514d1f3ab5b9c3e9a3b467934ed08" kindref="member">vdmMsg</ref>;</highlight></codeline>
<codeline lineno="749"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_stc_pdstack_context_t<sp/>*ptrPdStackContext<sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a34f18ac1a604068a73e013c483d55104" kindref="member">pdStackContext</ref>;</highlight></codeline>
<codeline lineno="750"><highlight class="normal"></highlight></codeline>
<codeline lineno="751"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>SVID<sp/>idx<sp/>to<sp/>zero<sp/>before<sp/>start<sp/>Disc<sp/>SVID<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="752"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a3c5c7944d78609a176c55f7a3f93a7de" kindref="member">svidIdx</ref><sp/><sp/>=<sp/><ref refid="group__group__pdaltmode__common__macros_1ga2cb7840adbf420357dfbb997f0f2b3a3" kindref="member">CY_PDALTMODE_MNGR_NO_DATA</ref>;</highlight></codeline>
<codeline lineno="753"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a5bb8c89879c7b42d425dd78d681095cf" kindref="member">dSvidCnt</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="754"><highlight class="normal"></highlight></codeline>
<codeline lineno="755"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Copy<sp/>ID<sp/>header<sp/>to<sp/>info<sp/>struct<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="756"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a9ed652c4200ff02aee0fe7d2038a7f53" kindref="member">atchTgt</ref>.<ref refid="structcy__stc__pdaltmode__atch__tgt__info__t_1ae1caaaaabcaa141d62abd29140e1f845" kindref="member">amaVdo</ref>.val<sp/>=<sp/>msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a96568aa7466ed90908c4fc903678f203" kindref="member">vdo</ref>[<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__macros_1ga347f8f4671f4e8db875d7f7845720b28" kindref="member">CY_PDALTMODE_VDMTASK_PD_DISC_ID_AMA_VDO_IDX</ref>].val;</highlight></codeline>
<codeline lineno="757"><highlight class="normal"></highlight></codeline>
<codeline lineno="758"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Copy<sp/>AMA<sp/>VDO<sp/>to<sp/>info<sp/>struct<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="759"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a9ed652c4200ff02aee0fe7d2038a7f53" kindref="member">atchTgt</ref>.<ref refid="structcy__stc__pdaltmode__atch__tgt__info__t_1add0a05c6a1e65f0b14c448cb717bd021" kindref="member">tgtIdHeader</ref>.val<sp/>=<sp/>msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a96568aa7466ed90908c4fc903678f203" kindref="member">vdo</ref>[<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__macros_1gae4e2aa15a2cf04e0d55157a9d86b51bd" kindref="member">CY_PDALTMODE_MNGR_VDO_START_IDX</ref><sp/>-<sp/>1U].val;</highlight></codeline>
<codeline lineno="760"><highlight class="normal"></highlight></codeline>
<codeline lineno="761"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>AMA<sp/>and<sp/>cable<sp/>(if<sp/>present)<sp/>do<sp/>not<sp/>need<sp/>Vconn,<sp/>disable<sp/>VConn<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="762"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight></codeline>
<codeline lineno="763"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrPdStackContext-&gt;dpmStat.vconnRetain<sp/>==<sp/>0x0U)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="764"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a96568aa7466ed90908c4fc903678f203" kindref="member">vdo</ref>[<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__macros_1gae4e2aa15a2cf04e0d55157a9d86b51bd" kindref="member">CY_PDALTMODE_MNGR_VDO_START_IDX</ref><sp/>-<sp/>1U].std_id_hdr.prodType<sp/>!=<sp/>(uint32_t)CY_PDSTACK_PROD_TYPE_AMA)<sp/>||</highlight></codeline>
<codeline lineno="765"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a96568aa7466ed90908c4fc903678f203" kindref="member">vdo</ref>[<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__macros_1ga347f8f4671f4e8db875d7f7845720b28" kindref="member">CY_PDALTMODE_VDMTASK_PD_DISC_ID_AMA_VDO_IDX</ref>].std_ama_vdo.vconReq<sp/>==<sp/>0x0UL))<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="766"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((ptrPdStackContext-&gt;dpmConfig.emcaPresent<sp/>==<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)<sp/>||</highlight></codeline>
<codeline lineno="767"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrPdStackContext-&gt;dpmStat.cblVdo.std_cbl_vdo.cblTerm<sp/>==<sp/>(uint32_t)CY_PDSTACK_CBL_TERM_BOTH_PAS_VCONN_NOT_REQ))</highlight></codeline>
<codeline lineno="768"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="769"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="770"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrPdStackContext-&gt;ptrAppCbk-&gt;vconn_disable(ptrPdStackContext,<sp/>ptrPdStackContext-&gt;dpmConfig.revPol);</highlight></codeline>
<codeline lineno="771"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="772"><highlight class="normal"></highlight></codeline>
<codeline lineno="773"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>Alt<sp/>Modes<sp/>are<sp/>not<sp/>supported<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="774"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a96568aa7466ed90908c4fc903678f203" kindref="member">vdo</ref>[<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__macros_1gae4e2aa15a2cf04e0d55157a9d86b51bd" kindref="member">CY_PDALTMODE_MNGR_VDO_START_IDX</ref><sp/>-<sp/>1U].std_id_hdr.modSupport<sp/>==<sp/>0x0UL)</highlight></codeline>
<codeline lineno="775"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="776"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a9691ecac8b26767485b91bd4e75996f7" kindref="member">altModesNotSupp</ref><sp/>=<sp/>0x01U;</highlight></codeline>
<codeline lineno="777"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>if<sp/>USB4<sp/>is<sp/>supported<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="778"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1a381fef34f8f087cb28e2fe109ddb52b2" kindref="member">customHpiHostCapControl</ref><sp/>&amp;<sp/><ref refid="group__group__pdaltmode__common__macros_1ga02c9a577d272d7e7e2833ff85effe3f7" kindref="member">CY_PDALTMODE_USB4_EN_HOST_PARAM_MASK</ref>)<sp/>!=<sp/>0u)</highlight></codeline>
<codeline lineno="779"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="780"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight></codeline>
<codeline lineno="781"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a1189fb5cced531d9b3d9436abe7d1e25" kindref="member">usb4Flag</ref><sp/>==<sp/><ref refid="group__group__pdaltmode__usb4__enums_1ggaed6a0bdb5fa1306874c9f9dc6703ecd7a0cb36f4e7471795aa91f2d2e83516297" kindref="member">CY_PDALTMODE_USB4_FAILED</ref>)<sp/>||</highlight></codeline>
<codeline lineno="782"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((ptrPdStackContext-&gt;dpmConfig.emcaPresent<sp/>==<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)<sp/><sp/><sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="783"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a1189fb5cced531d9b3d9436abe7d1e25" kindref="member">usb4Flag</ref><sp/>!=<sp/><ref refid="group__group__pdaltmode__usb4__enums_1ggaed6a0bdb5fa1306874c9f9dc6703ecd7a0cb36f4e7471795aa91f2d2e83516297" kindref="member">CY_PDALTMODE_USB4_FAILED</ref>))</highlight></codeline>
<codeline lineno="784"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="785"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="786"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="787"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="788"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="789"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="790"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="791"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="792"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="793"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="794"><highlight class="normal"></highlight></codeline>
<codeline lineno="795"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="796"><highlight class="normal">}</highlight></codeline>
<codeline lineno="797"><highlight class="normal"></highlight></codeline>
<codeline lineno="798"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga0779fd0bc9432201c398f1a27ac5b270" kindref="member">Cy_PdAltMode_VdmTask_SetDiscParam</ref>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext,<sp/>uint8_t<sp/>sop,<sp/>cy_en_pdstack_std_vdm_cmd_t<sp/>cmd)</highlight></codeline>
<codeline lineno="799"><highlight class="normal">{</highlight></codeline>
<codeline lineno="800"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structcy__stc__pdaltmode__vdm__msg__info__t" kindref="compound">cy_stc_pdaltmode_vdm_msg_info_t</ref><sp/>*msgP<sp/>=<sp/>&amp;ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1ae35514d1f3ab5b9c3e9a3b467934ed08" kindref="member">vdmMsg</ref>;</highlight></codeline>
<codeline lineno="801"><highlight class="normal"></highlight></codeline>
<codeline lineno="802"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Form<sp/>Discover<sp/>ID<sp/>VDM<sp/>packet<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="803"><highlight class="normal"><sp/><sp/><sp/><sp/>msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a450b366ec51f4b9bb3dc3c9ea22997c9" kindref="member">vdmHeader</ref>.val<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><ref refid="group__group__pdaltmode__common__macros_1ga2cb7840adbf420357dfbb997f0f2b3a3" kindref="member">CY_PDALTMODE_MNGR_NO_DATA</ref>;</highlight></codeline>
<codeline lineno="804"><highlight class="normal"><sp/><sp/><sp/><sp/>msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a450b366ec51f4b9bb3dc3c9ea22997c9" kindref="member">vdmHeader</ref>.std_vdm_hdr.svid<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><ref refid="group__group__pdaltmode__common__macros_1ga6c67c4ca16f4e4daaf04f811c944601e" kindref="member">CY_PDATMODE_STD_SVID</ref>;</highlight></codeline>
<codeline lineno="805"><highlight class="normal"><sp/><sp/><sp/><sp/>msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a450b366ec51f4b9bb3dc3c9ea22997c9" kindref="member">vdmHeader</ref>.std_vdm_hdr.cmd<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>(uint32_t)cmd;</highlight></codeline>
<codeline lineno="806"><highlight class="normal"><sp/><sp/><sp/><sp/>msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1ae865fc2b1c65b511f72dc31f4d1e77fa" kindref="member">vdoNumb</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><ref refid="group__group__pdaltmode__common__macros_1ga2cb7840adbf420357dfbb997f0f2b3a3" kindref="member">CY_PDALTMODE_MNGR_NO_DATA</ref>;</highlight></codeline>
<codeline lineno="807"><highlight class="normal"><sp/><sp/><sp/><sp/>msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a6d0df2c229bd3ab17d8b8332b3da6d37" kindref="member">sopType</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>sop;</highlight></codeline>
<codeline lineno="808"><highlight class="normal"><sp/><sp/><sp/><sp/>msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a450b366ec51f4b9bb3dc3c9ea22997c9" kindref="member">vdmHeader</ref>.std_vdm_hdr.vdmType<sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>(uint32_t)CY_PDSTACK_VDM_TYPE_STRUCTURED;</highlight></codeline>
<codeline lineno="809"><highlight class="normal">}</highlight></codeline>
<codeline lineno="810"><highlight class="normal"></highlight></codeline>
<codeline lineno="811"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>Cy_PdAltMode_VdmTask_UpdateUsbSupportVars(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>ufp_ack)</highlight></codeline>
<codeline lineno="812"><highlight class="normal">{</highlight></codeline>
<codeline lineno="813"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_stc_pdstack_context_t<sp/>*ptrPdStackContext<sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a34f18ac1a604068a73e013c483d55104" kindref="member">pdStackContext</ref>;</highlight></codeline>
<codeline lineno="814"><highlight class="normal"></highlight></codeline>
<codeline lineno="815"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>cy_stc_pdstack_dpm_status_t<sp/><sp/><sp/>*dpmStat<sp/>=<sp/>&amp;ptrPdStackContext-&gt;dpmStat;</highlight></codeline>
<codeline lineno="816"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structcy__stc__pdaltmode__status__t" kindref="compound">cy_stc_pdaltmode_status_t</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*app<sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>;</highlight></codeline>
<codeline lineno="817"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structcy__stc__pdaltmode__vdm__msg__info__t" kindref="compound">cy_stc_pdaltmode_vdm_msg_info_t</ref><sp/><sp/><sp/><sp/><sp/>*msgP<sp/><sp/><sp/><sp/>=<sp/>&amp;ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1ae35514d1f3ab5b9c3e9a3b467934ed08" kindref="member">vdmMsg</ref>;</highlight></codeline>
<codeline lineno="818"><highlight class="normal"></highlight></codeline>
<codeline lineno="819"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>First<sp/>set<sp/>USB<sp/>support<sp/>flags<sp/>based<sp/>on<sp/>cable<sp/>marker<sp/>properties.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="820"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(dpmStat-&gt;cblType<sp/>==<sp/>CY_PDSTACK_PROD_TYPE_ACT_CBL)</highlight></codeline>
<codeline lineno="821"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="822"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(dpmStat-&gt;cblVdo2.act_cbl_vdo2.usb2Supp<sp/>!=<sp/>0u)</highlight></codeline>
<codeline lineno="823"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="824"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>app-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1ad946012cbdedf14424bd74444d8c76fc" kindref="member">usb2Supp</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="825"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="826"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(dpmStat-&gt;cblVdo2.act_cbl_vdo2.ssSupp<sp/>!=<sp/>0u)</highlight></codeline>
<codeline lineno="827"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="828"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>app-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1aba0a27412f398365deda9a4cfe9c7544" kindref="member">usb3Supp</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="829"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="830"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="831"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(dpmStat-&gt;cblType<sp/>==<sp/>CY_PDSTACK_PROD_TYPE_PAS_CBL)</highlight></codeline>
<codeline lineno="832"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="833"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>app-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1ad946012cbdedf14424bd74444d8c76fc" kindref="member">usb2Supp</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="834"><highlight class="normal"></highlight></codeline>
<codeline lineno="835"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(dpmStat-&gt;cblVdo.pas_cbl_vdo.usbSsSup<sp/>&gt;<sp/>((uint32_t)CY_PDSTACK_USB_GEN_2))</highlight></codeline>
<codeline lineno="836"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="837"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>app-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1aba0a27412f398365deda9a4cfe9c7544" kindref="member">usb3Supp</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="838"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="839"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="840"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="841"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="842"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>No<sp/>action<sp/>required<sp/>-<sp/>;<sp/>is<sp/>optional<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="843"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="844"><highlight class="normal"></highlight></codeline>
<codeline lineno="845"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>UFP<sp/>response<sp/>is<sp/>available,<sp/>confirm<sp/>USB<sp/>support<sp/>in<sp/>its<sp/>D_ID<sp/>response.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="846"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ufp_ack)</highlight></codeline>
<codeline lineno="847"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="848"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint32_t<sp/>dev_cap<sp/>=<sp/>msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a96568aa7466ed90908c4fc903678f203" kindref="member">vdo</ref>[CY_PD_PRODUCT_TYPE_VDO_1_IDX<sp/>-<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__macros_1gae4e2aa15a2cf04e0d55157a9d86b51bd" kindref="member">CY_PDALTMODE_MNGR_VDO_START_IDX</ref>].ufp_vdo_1.devCap;</highlight></codeline>
<codeline lineno="849"><highlight class="normal"></highlight></codeline>
<codeline lineno="850"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((dev_cap<sp/>&amp;<sp/>((uint32_t)CY_PDSTACK_DEV_CAP_USB_2_0))<sp/>!=<sp/>0u)</highlight></codeline>
<codeline lineno="851"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="852"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>app-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1ad946012cbdedf14424bd74444d8c76fc" kindref="member">usb2Supp</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="853"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="854"><highlight class="normal"></highlight></codeline>
<codeline lineno="855"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((dev_cap<sp/>&amp;<sp/>((uint32_t)CY_PDSTACK_DEV_CAP_USB_3_2))<sp/>!=<sp/>0u)</highlight></codeline>
<codeline lineno="856"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="857"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>app-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1aba0a27412f398365deda9a4cfe9c7544" kindref="member">usb3Supp</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="858"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="859"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="860"><highlight class="normal">}</highlight></codeline>
<codeline lineno="861"><highlight class="normal"></highlight></codeline>
<codeline lineno="862"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga399c1777f494368601cad31a40afca9c" kindref="member">cy_en_pdaltmode_vdm_task_t</ref><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gaff4fa0d53781f814413f9311b43fe1da" kindref="member">Cy_PdAltMode_VdmTask_MngDiscId</ref>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext,<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga53976be265d41463919b3ea93da4cf30" kindref="member">cy_en_pdaltmode_vdm_evt_t</ref><sp/>vdmEvt)</highlight></codeline>
<codeline lineno="863"><highlight class="normal">{</highlight></codeline>
<codeline lineno="864"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_stc_pdstack_context_t<sp/>*ptrPdStackContext<sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a34f18ac1a604068a73e013c483d55104" kindref="member">pdStackContext</ref>;</highlight></codeline>
<codeline lineno="865"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structcy__stc__pdaltmode__vdm__msg__info__t" kindref="compound">cy_stc_pdaltmode_vdm_msg_info_t</ref><sp/>*msgP<sp/><sp/>=<sp/>&amp;ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1ae35514d1f3ab5b9c3e9a3b467934ed08" kindref="member">vdmMsg</ref>;</highlight></codeline>
<codeline lineno="866"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga399c1777f494368601cad31a40afca9c" kindref="member">cy_en_pdaltmode_vdm_task_t</ref><sp/>ret<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca7eff1b48be7cbe38e7135ce320e01759" kindref="member">CY_PDALTMODE_VDM_TASK_EXIT</ref>;</highlight></codeline>
<codeline lineno="867"><highlight class="normal"></highlight></codeline>
<codeline lineno="868"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>pd3Ufp<sp/>=<sp/>((ptrPdStackContext-&gt;dpmConfig.specRevSopLive<sp/>&gt;=<sp/>CY_PD_REV3)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="869"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrPdStackContext-&gt;dpmConfig.curPortType<sp/>==<sp/>CY_PD_PRT_TYPE_UFP));</highlight></codeline>
<codeline lineno="870"><highlight class="normal"></highlight></codeline>
<codeline lineno="871"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(vdmEvt)</highlight></codeline>
<codeline lineno="872"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="873"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga53976be265d41463919b3ea93da4cf30abd914a67376582616bd3cd1949b105ca" kindref="member">CY_PDALTMODE_VDM_EVT_RUN</ref>:</highlight></codeline>
<codeline lineno="874"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Form<sp/>Discover<sp/>ID<sp/>VDM<sp/>packet<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="875"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga0779fd0bc9432201c398f1a27ac5b270" kindref="member">Cy_PdAltMode_VdmTask_SetDiscParam</ref>)(ptrAltModeContext,<sp/>(uint8_t)CY_PD_SOP,<sp/>CY_PDSTACK_VDM_CMD_DSC_IDENTITY);</highlight></codeline>
<codeline lineno="876"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca975ad4fb2e6c7feb0cb1127be8325e3c" kindref="member">CY_PDALTMODE_VDM_TASK_SEND_MSG</ref>;</highlight></codeline>
<codeline lineno="877"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="878"><highlight class="normal"></highlight></codeline>
<codeline lineno="879"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Evaluate<sp/>received<sp/>response<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="880"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga53976be265d41463919b3ea93da4cf30a981de98f344b91aee860d9ae494d0444" kindref="member">CY_PDALTMODE_VDM_EVT_EVAL</ref>:</highlight></codeline>
<codeline lineno="881"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>is<sp/>current<sp/>port<sp/>date<sp/>role<sp/>DFP<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="882"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(ptrPdStackContext-&gt;dpmConfig.curPortType<sp/>!=<sp/>CY_PD_PRT_TYPE_UFP)</highlight></codeline>
<codeline lineno="883"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="884"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga534c98c7c73b6f6feaa0f71e9b73a32d" kindref="member">Cy_PdAltMode_VdmTask_IsUsb4Cap</ref>)(ptrAltModeContext)<sp/>==<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="885"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="886"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9cafdaff6d78ac13c01c80024f4d1c0d1f1" kindref="member">CY_PDALTMODE_VDM_TASK_WAIT</ref>;</highlight></codeline>
<codeline lineno="887"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="888"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="889"><highlight class="normal"></highlight></codeline>
<codeline lineno="890"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>if<sp/>USB4<sp/>is<sp/>allowed<sp/>for<sp/>Host<sp/>Exchange<sp/>capabilities<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="891"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a2c44432dce2d2c8128d7338825b18526" kindref="member">hostDetails</ref><sp/>!=<sp/>NULL)</highlight></codeline>
<codeline lineno="892"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="893"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga6bb54a98c312c6eec354cc7356903f16" kindref="member">Cy_PdAltMode_VdmTask_HostCapCheck</ref>)(ptrAltModeContext);</highlight></codeline>
<codeline lineno="894"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="895"><highlight class="normal"></highlight></codeline>
<codeline lineno="896"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Store<sp/>the<sp/>D_ID<sp/>response<sp/>received<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="897"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1af22f79436ac72845753147a1dd976224" kindref="member">vdmDiscIdResp</ref>[0]<sp/>=<sp/>msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a450b366ec51f4b9bb3dc3c9ea22997c9" kindref="member">vdmHeader</ref>.val;</highlight></codeline>
<codeline lineno="898"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>TIMER_CALL_MAP(Cy_PdUtils_MemCopy)((uint8_t<sp/>*)&amp;ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1af22f79436ac72845753147a1dd976224" kindref="member">vdmDiscIdResp</ref>[1],<sp/>(uint8_t<sp/>*)msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a96568aa7466ed90908c4fc903678f203" kindref="member">vdo</ref>,<sp/>(uint32_t)msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1ae865fc2b1c65b511f72dc31f4d1e77fa" kindref="member">vdoNumb</ref><sp/>*<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(uint32_t));</highlight></codeline>
<codeline lineno="899"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a1652190ae69a5c1962e2177a8a649a5e" kindref="member">vdmDiscIdRespLen</ref><sp/>=<sp/>msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1ae865fc2b1c65b511f72dc31f4d1e77fa" kindref="member">vdoNumb</ref><sp/>+<sp/>1u;</highlight></codeline>
<codeline lineno="900"><highlight class="normal"></highlight></codeline>
<codeline lineno="901"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Analyze<sp/>Disc<sp/>ID<sp/>SOP<sp/>&amp;<sp/>SOP&apos;<sp/>responses<sp/>for<sp/>USB2/USB3<sp/>compatibility<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="902"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Cy_PdAltMode_VdmTask_UpdateUsbSupportVars<sp/>(ptrAltModeContext,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="903"><highlight class="normal"></highlight></codeline>
<codeline lineno="904"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>EUDO<sp/>parameters*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="905"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gafc5e5ca6f19ce4cfa4bd0772aa33979e" kindref="member">Cy_PdAltMode_VdmTask_SetEudoParams</ref>)(ptrAltModeContext)<sp/>!=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca7eff1b48be7cbe38e7135ce320e01759" kindref="member">CY_PDALTMODE_VDM_TASK_EXIT</ref>)</highlight></codeline>
<codeline lineno="906"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="907"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca519562b24f860ad1d56c945d74f4a792" kindref="member">CY_PDALTMODE_VDM_TASK_USB4_TBT</ref>;</highlight></codeline>
<codeline lineno="908"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="909"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="910"><highlight class="normal"></highlight></codeline>
<codeline lineno="911"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>if<sp/>Set<sp/>Discovery<sp/>SVID<sp/>process<sp/>can<sp/>be<sp/>provided<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="912"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga7290b6708379548ab1896067d82b4e34" kindref="member">Cy_PdAltMode_VdmTask_GotoDiscSvid</ref>)(ptrAltModeContext)<sp/>==<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="913"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="914"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="915"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="916"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Send<sp/>Disc<sp/>SVID<sp/>cmd<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="917"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a7e69c43b3b2dd3eed1c6932869deb63d" kindref="member">vdmEvt</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga53976be265d41463919b3ea93da4cf30abd914a67376582616bd3cd1949b105ca" kindref="member">CY_PDALTMODE_VDM_EVT_RUN</ref>;</highlight></codeline>
<codeline lineno="918"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca72edaaa68587cf25316c845237d32cef" kindref="member">CY_PDALTMODE_VDM_TASK_DISC_SVID</ref>;</highlight></codeline>
<codeline lineno="919"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="920"><highlight class="normal"></highlight></codeline>
<codeline lineno="921"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>is<sp/>current<sp/>port<sp/>data<sp/>role<sp/>UFP<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="922"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pd3Ufp)</highlight></codeline>
<codeline lineno="923"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="924"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Send<sp/>Disc<sp/>SVID<sp/>cmd<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="925"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a7e69c43b3b2dd3eed1c6932869deb63d" kindref="member">vdmEvt</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga53976be265d41463919b3ea93da4cf30abd914a67376582616bd3cd1949b105ca" kindref="member">CY_PDALTMODE_VDM_EVT_RUN</ref>;</highlight></codeline>
<codeline lineno="926"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca72edaaa68587cf25316c845237d32cef" kindref="member">CY_PDALTMODE_VDM_TASK_DISC_SVID</ref>;</highlight></codeline>
<codeline lineno="927"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="928"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="929"><highlight class="normal"></highlight></codeline>
<codeline lineno="930"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga53976be265d41463919b3ea93da4cf30a4b471a5f9cc7707f702e5d2bf6848af1" kindref="member">CY_PDALTMODE_VDM_EVT_FAIL</ref>:</highlight></codeline>
<codeline lineno="931"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>is<sp/>current<sp/>port<sp/>data<sp/>role<sp/>UFP<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="932"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pd3Ufp)</highlight></codeline>
<codeline lineno="933"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="934"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Send<sp/>Disc<sp/>SVID<sp/>cmd<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="935"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a7e69c43b3b2dd3eed1c6932869deb63d" kindref="member">vdmEvt</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga53976be265d41463919b3ea93da4cf30abd914a67376582616bd3cd1949b105ca" kindref="member">CY_PDALTMODE_VDM_EVT_RUN</ref>;</highlight></codeline>
<codeline lineno="936"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca72edaaa68587cf25316c845237d32cef" kindref="member">CY_PDALTMODE_VDM_TASK_DISC_SVID</ref>;</highlight></codeline>
<codeline lineno="937"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="938"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Update<sp/>USB<sp/>support<sp/>variables<sp/>based<sp/>on<sp/>cable<sp/>capabilities<sp/>alone.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="939"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Cy_PdAltMode_VdmTask_UpdateUsbSupportVars<sp/>(ptrAltModeContext,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="940"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="941"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="942"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Do<sp/>nothing<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="943"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="944"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="945"><highlight class="normal"></highlight></codeline>
<codeline lineno="946"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="947"><highlight class="normal">}</highlight></codeline>
<codeline lineno="948"><highlight class="normal"></highlight></codeline>
<codeline lineno="949"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Checks<sp/>if<sp/>input<sp/>SVID<sp/>already<sp/>saved<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="950"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga58aebe4014458b4d6e100c404a397e21" kindref="member">Cy_PdAltMode_VdmTask_IsSvidStored</ref>(uint16_t<sp/>*svid_arr,<sp/>uint16_t<sp/>svid)</highlight></codeline>
<codeline lineno="951"><highlight class="normal">{</highlight></codeline>
<codeline lineno="952"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/><sp/>idx;</highlight></codeline>
<codeline lineno="953"><highlight class="normal"></highlight></codeline>
<codeline lineno="954"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Go<sp/>through<sp/>all<sp/>SVIDs<sp/>and<sp/>compare<sp/>with<sp/>input<sp/>SVID<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="955"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(idx<sp/>=<sp/>0;<sp/>idx<sp/>&lt;<sp/><ref refid="group__group__pdaltmode__common__macros_1gad8212f19aa785ee9a8a02634357883b5" kindref="member">CY_PDALTMODE_MAX_SVID_VDO_SUPP</ref>;<sp/>idx++)</highlight></codeline>
<codeline lineno="956"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="957"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>input<sp/>SVID<sp/>is<sp/>already<sp/>saved<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="958"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(svid_arr[idx]<sp/>==<sp/>svid)</highlight></codeline>
<codeline lineno="959"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="960"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="961"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="962"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="963"><highlight class="normal"></highlight></codeline>
<codeline lineno="964"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="965"><highlight class="normal">}</highlight></codeline>
<codeline lineno="966"><highlight class="normal"></highlight></codeline>
<codeline lineno="967"><highlight class="normal"></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="968"><highlight class="comment"><sp/><sp/><sp/>This<sp/>function<sp/>saves<sp/>received<sp/>Discover<sp/>SVID<sp/>response,</highlight></codeline>
<codeline lineno="969"><highlight class="comment"><sp/><sp/><sp/>returns<sp/>true<sp/>if<sp/>a<sp/>NULL<sp/>SVID<sp/>was<sp/>received.</highlight></codeline>
<codeline lineno="970"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="971"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gab5e1a09da0d6f788003b7c90f4d534f7" kindref="member">Cy_PdAltMode_VdmTask_SaveSvids</ref>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext,<sp/>uint16_t<sp/>*svid_arr,<sp/>uint8_t<sp/>max_svid)</highlight></codeline>
<codeline lineno="972"><highlight class="normal">{</highlight></codeline>
<codeline lineno="973"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>idx,<sp/>vdo_count;</highlight></codeline>
<codeline lineno="974"><highlight class="normal"><sp/><sp/><sp/><sp/>uint16_t<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>svid;</highlight></codeline>
<codeline lineno="975"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>svidIdx<sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a3c5c7944d78609a176c55f7a3f93a7de" kindref="member">svidIdx</ref>;</highlight></codeline>
<codeline lineno="976"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>retval<sp/><sp/><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="977"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structcy__stc__pdaltmode__vdm__msg__info__t" kindref="compound">cy_stc_pdaltmode_vdm_msg_info_t</ref><sp/><sp/>*msgP<sp/><sp/><sp/>=<sp/>&amp;ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1ae35514d1f3ab5b9c3e9a3b467934ed08" kindref="member">vdmMsg</ref>;</highlight></codeline>
<codeline lineno="978"><highlight class="normal"></highlight></codeline>
<codeline lineno="979"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Compare<sp/>received<sp/>SVIDs<sp/>with<sp/>supported<sp/>SVIDs<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="980"><highlight class="normal"><sp/><sp/><sp/><sp/>vdo_count<sp/>=<sp/>msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1ae865fc2b1c65b511f72dc31f4d1e77fa" kindref="member">vdoNumb</ref>;</highlight></codeline>
<codeline lineno="981"><highlight class="normal"></highlight></codeline>
<codeline lineno="982"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Stop<sp/>further<sp/>discovery<sp/>if<sp/>this<sp/>response<sp/>does<sp/>not<sp/>have<sp/>the<sp/>maximum<sp/>number<sp/>of<sp/>DOs.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="983"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(vdo_count<sp/>&lt;<sp/>(CY_PD_MAX_NO_OF_DO<sp/>-<sp/>1U))</highlight></codeline>
<codeline lineno="984"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="985"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>retval<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="986"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="987"><highlight class="normal"></highlight></codeline>
<codeline lineno="988"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(idx<sp/>=<sp/>0U;<sp/>idx<sp/>&lt;<sp/>(vdo_count<sp/>*<sp/>2U);<sp/>idx++)</highlight></codeline>
<codeline lineno="989"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="990"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((idx<sp/>&amp;<sp/>1U)<sp/>==<sp/>0U)</highlight></codeline>
<codeline lineno="991"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="992"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Upper<sp/>half<sp/>of<sp/>the<sp/>DO<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="993"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>svid<sp/>=<sp/>(uint16_t)(msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a96568aa7466ed90908c4fc903678f203" kindref="member">vdo</ref>[idx<sp/>&gt;&gt;<sp/>1].val<sp/>&gt;&gt;<sp/>16u);</highlight></codeline>
<codeline lineno="994"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="995"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="996"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="997"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Lower<sp/>half<sp/>of<sp/>the<sp/>DO<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="998"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>svid<sp/>=<sp/>(uint16_t)(msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a96568aa7466ed90908c4fc903678f203" kindref="member">vdo</ref>[idx<sp/>&gt;&gt;<sp/>1].val<sp/>&amp;<sp/>0xFFFFu);</highlight></codeline>
<codeline lineno="999"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1000"><highlight class="normal"></highlight></codeline>
<codeline lineno="1001"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(svidIdx<sp/>&lt;<sp/>(max_svid<sp/>-<sp/>1U))</highlight></codeline>
<codeline lineno="1002"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1003"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Stop<sp/>on<sp/>NULL<sp/>SVID<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1004"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(svid<sp/>==<sp/><ref refid="group__group__pdaltmode__common__macros_1ga2cb7840adbf420357dfbb997f0f2b3a3" kindref="member">CY_PDALTMODE_MNGR_NO_DATA</ref>)</highlight></codeline>
<codeline lineno="1005"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1006"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>retval<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1007"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1008"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1009"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1010"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>SVID<sp/>is<sp/>not<sp/>saved<sp/>previously<sp/>then<sp/>save<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1011"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga58aebe4014458b4d6e100c404a397e21" kindref="member">Cy_PdAltMode_VdmTask_IsSvidStored</ref>)(svid_arr,<sp/>svid)<sp/>==<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1012"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1013"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight></codeline>
<codeline lineno="1014"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga752e755627029c3e7d0fc4976a293501" kindref="member">Cy_PdAltMode_Mngr_GetAltModesConfigSvidIdx</ref>)(ptrAltModeContext,<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a34f18ac1a604068a73e013c483d55104" kindref="member">pdStackContext</ref>-&gt;dpmConfig.curPortType,<sp/>svid)<sp/>!=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__macros_1gab902473a58fc39742864730a1845d172" kindref="member">CY_PDALTMODE_MNGR_MODE_NOT_SUPPORTED</ref>)</highlight></codeline>
<codeline lineno="1015"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||<sp/>((svid<sp/>==<sp/><ref refid="group__group__pdaltmode__common__macros_1ga73240a1c8f3d99e29393c3ead7a4bbce" kindref="member">CY_PDALTMODE_TBT_SVID</ref>)<sp/>&amp;&amp;<sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1ae35514d1f3ab5b9c3e9a3b467934ed08" kindref="member">vdmMsg</ref>.<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a6d0df2c229bd3ab17d8b8332b3da6d37" kindref="member">sopType</ref><sp/>==<sp/>((uint32_t)CY_PD_SOP_PRIME)))</highlight></codeline>
<codeline lineno="1016"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="1017"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1018"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>svid_arr[svidIdx]<sp/>=<sp/>svid;</highlight></codeline>
<codeline lineno="1019"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>svidIdx++;</highlight></codeline>
<codeline lineno="1020"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1021"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1022"><highlight class="normal"></highlight></codeline>
<codeline lineno="1023"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>if<sp/>TBT<sp/>SVID<sp/>is<sp/>supported<sp/>by<sp/>cable,<sp/>if<sp/>USB4<sp/>related</highlight></codeline>
<codeline lineno="1024"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>TBT<sp/>cable<sp/>Disc<sp/>Mode<sp/>procedure<sp/>should<sp/>be<sp/>provided.</highlight></codeline>
<codeline lineno="1025"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1026"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight></codeline>
<codeline lineno="1027"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1ae35514d1f3ab5b9c3e9a3b467934ed08" kindref="member">vdmMsg</ref>.<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a6d0df2c229bd3ab17d8b8332b3da6d37" kindref="member">sopType</ref><sp/>==<sp/>(uint8_t)CY_PD_SOP_PRIME)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="1028"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a1189fb5cced531d9b3d9436abe7d1e25" kindref="member">usb4Flag</ref><sp/>==<sp/><ref refid="group__group__pdaltmode__usb4__enums_1ggaed6a0bdb5fa1306874c9f9dc6703ecd7a64a496858d5eb535490c9581ae541a5d" kindref="member">CY_PDALTMODE_USB4_TBT_CBL_FIND</ref>)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="1029"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(svid<sp/>==<sp/><ref refid="group__group__pdaltmode__common__macros_1ga73240a1c8f3d99e29393c3ead7a4bbce" kindref="member">CY_PDALTMODE_TBT_SVID</ref>)</highlight></codeline>
<codeline lineno="1030"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="1031"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1032"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Start<sp/>TBT<sp/>cable<sp/>Discover<sp/>mode<sp/>process<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1033"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a1189fb5cced531d9b3d9436abe7d1e25" kindref="member">usb4Flag</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__usb4__enums_1ggaed6a0bdb5fa1306874c9f9dc6703ecd7a1d37d1fb7a64f1fc73ef46cd6c39cfbc" kindref="member">CY_PDALTMODE_USB4_TBT_CBL_DISC_RUN</ref>;</highlight></codeline>
<codeline lineno="1034"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1035"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1036"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1037"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1038"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1039"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Cannot<sp/>continue<sp/>as<sp/>there<sp/>is<sp/>no<sp/>more<sp/>space.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1040"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>retval<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1041"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1042"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1043"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1044"><highlight class="normal"></highlight></codeline>
<codeline lineno="1045"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>zero<sp/>after<sp/>last<sp/>SVID<sp/>in<sp/>info<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1046"><highlight class="normal"><sp/><sp/><sp/><sp/>svid_arr[svidIdx]<sp/>=<sp/><ref refid="group__group__pdaltmode__common__macros_1ga2cb7840adbf420357dfbb997f0f2b3a3" kindref="member">CY_PDALTMODE_MNGR_NO_DATA</ref>;</highlight></codeline>
<codeline lineno="1047"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a3c5c7944d78609a176c55f7a3f93a7de" kindref="member">svidIdx</ref><sp/>=<sp/>svidIdx;</highlight></codeline>
<codeline lineno="1048"><highlight class="normal"></highlight></codeline>
<codeline lineno="1049"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Terminate<sp/>discovery<sp/>after<sp/>CY_PDALTMODE_VDMTASK_MAX_DISC_SVID_COUNT<sp/>attempts.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1050"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a5bb8c89879c7b42d425dd78d681095cf" kindref="member">dSvidCnt</ref>++;</highlight></codeline>
<codeline lineno="1051"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a5bb8c89879c7b42d425dd78d681095cf" kindref="member">dSvidCnt</ref><sp/>&gt;=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__macros_1ga350aa0cbccffca41fd8fc2679b33e67b" kindref="member">CY_PDALTMODE_VDMTASK_MAX_DISC_SVID_COUNT</ref>){</highlight></codeline>
<codeline lineno="1052"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>retval<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1053"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1054"><highlight class="normal"></highlight></codeline>
<codeline lineno="1055"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>retval;</highlight></codeline>
<codeline lineno="1056"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1057"><highlight class="normal"></highlight></codeline>
<codeline lineno="1058"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga29e2ba099601d20e583cc7e4d070e5f8" kindref="member">Cy_PdAltMode_VdmTask_IsVconnPresent</ref>(cy_stc_pdstack_context_t<sp/>*ptrPdStackContext,<sp/>uint8_t<sp/>channel)</highlight></codeline>
<codeline lineno="1059"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1060"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>Cy_USBPD_Vconn_IsPresent(ptrPdStackContext-&gt;ptrUsbPdContext,<sp/>channel);</highlight></codeline>
<codeline lineno="1061"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1062"><highlight class="normal"></highlight></codeline>
<codeline lineno="1063"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gaa45ecb672ca0bf35e1de98e7057e448b" kindref="member">Cy_PdAltMode_VdmTask_IsCblSvidReq</ref>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext)</highlight></codeline>
<codeline lineno="1064"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1065"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_stc_pdstack_context_t<sp/>*ptrPdStackContext<sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a34f18ac1a604068a73e013c483d55104" kindref="member">pdStackContext</ref>;</highlight></codeline>
<codeline lineno="1066"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>faultStatus<sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1aba3f2832d6acbf0f5c866d67f8e0090b" kindref="member">appStatusContext</ref>-&gt;faultStatus;</highlight></codeline>
<codeline lineno="1067"><highlight class="normal"></highlight></codeline>
<codeline lineno="1068"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>ret<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1069"><highlight class="normal"></highlight></codeline>
<codeline lineno="1070"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>cable<sp/>supports<sp/>Alternate<sp/>Modes,<sp/>send<sp/>SOP&apos;<sp/>disc<sp/>SVID<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1071"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(ptrPdStackContext-&gt;dpmStat.cblModeEn<sp/>!=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1072"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1073"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((ptrPdStackContext-&gt;dpmConfig.vconnLogical)<sp/>&amp;&amp;<sp/>((faultStatus<sp/>&amp;<sp/><ref refid="group__group__pdaltmode__common__macros_1gaee7f2a6d6cb94b4729a9ddfb53f2aa72" kindref="member">CY_PDALTMODE_FAULT_APP_PORT_VCONN_FAULT_ACTIVE</ref>)<sp/>==<sp/>0u))</highlight></codeline>
<codeline lineno="1074"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1075"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga29e2ba099601d20e583cc7e4d070e5f8" kindref="member">Cy_PdAltMode_VdmTask_IsVconnPresent</ref>)(ptrPdStackContext,<sp/>ptrPdStackContext-&gt;dpmConfig.revPol)<sp/>==<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1076"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1077"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="1078"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>Currently<sp/>you<sp/>are<sp/>the<sp/>VConn<sp/>source,<sp/>and<sp/>VConn<sp/>is<sp/>off.<sp/>Enable<sp/>and<sp/>apply<sp/>a<sp/>delay<sp/>to<sp/>let</highlight></codeline>
<codeline lineno="1079"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>the<sp/>EMCA<sp/>power<sp/>up.</highlight></codeline>
<codeline lineno="1080"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1081"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a34f18ac1a604068a73e013c483d55104" kindref="member">pdStackContext</ref>-&gt;ptrAppCbk-&gt;vconn_enable<sp/>(ptrPdStackContext,<sp/>ptrPdStackContext-&gt;dpmConfig.revPol))</highlight></codeline>
<codeline lineno="1082"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1083"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>a<sp/>flag<sp/>to<sp/>indicate<sp/>that<sp/>there<sp/>is<sp/>need<sp/>for<sp/>cable<sp/>SVID<sp/>checks<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1084"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1085"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Start<sp/>a<sp/>timer<sp/>to<sp/>delay<sp/>the<sp/>retry<sp/>attempt<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1086"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(void)TIMER_CALL_MAP(Cy_PdUtils_SwTimer_Start)<sp/>(ptrPdStackContext-&gt;ptrTimerContext,<sp/>ptrPdStackContext,</highlight></codeline>
<codeline lineno="1087"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>CY_PDALTMODE_GET_TIMER_ID(ptrPdStackContext,<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga8ce268202ee29df67f500d14a1273881a49535375901fa7e1420cd491a8cf4b3e" kindref="member">CY_PDALTMODE_VDM_BUSY_TIMER</ref>),</highlight></codeline>
<codeline lineno="1088"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__group__pdaltmode__common__macros_1ga37d01b806b44c8ab84c037c0edd64a57" kindref="member">CY_PDALTMODE_APP_CABLE_POWER_UP_DELAY</ref>,<sp/>NULL);</highlight></codeline>
<codeline lineno="1089"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1090"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1091"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1092"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1093"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>a<sp/>flag<sp/>to<sp/>indicate<sp/>that<sp/>there<sp/>is<sp/>need<sp/>for<sp/>cable<sp/>SVID<sp/>checks<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1094"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1095"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1096"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1097"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="1098"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="1099"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="1100"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1101"><highlight class="normal"></highlight></codeline>
<codeline lineno="1102"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga399c1777f494368601cad31a40afca9c" kindref="member">cy_en_pdaltmode_vdm_task_t</ref><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga4120453105a897857a01d614104b4705" kindref="member">Cy_PdAltMode_VdmTask_HandleSopSvidResp</ref>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext)</highlight></codeline>
<codeline lineno="1103"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1104"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga399c1777f494368601cad31a40afca9c" kindref="member">cy_en_pdaltmode_vdm_task_t</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca7eff1b48be7cbe38e7135ce320e01759" kindref="member">CY_PDALTMODE_VDM_TASK_EXIT</ref>;</highlight></codeline>
<codeline lineno="1105"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structcy__stc__pdaltmode__vdm__msg__info__t" kindref="compound">cy_stc_pdaltmode_vdm_msg_info_t</ref><sp/><sp/><sp/><sp/><sp/>*msgP<sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>&amp;ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1ae35514d1f3ab5b9c3e9a3b467934ed08" kindref="member">vdmMsg</ref>;</highlight></codeline>
<codeline lineno="1106"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>tmp;</highlight></codeline>
<codeline lineno="1107"><highlight class="normal"></highlight></codeline>
<codeline lineno="1108"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a3c5c7944d78609a176c55f7a3f93a7de" kindref="member">svidIdx</ref><sp/>==<sp/>0u)</highlight></codeline>
<codeline lineno="1109"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1110"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Save<sp/>the<sp/>Disc<sp/>SVID<sp/>response<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a1f056c297695b7e3e729311aba3fa5bb" kindref="member">vdmDiscSvidResp</ref>[0]<sp/>=<sp/>(uint32_t)msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a450b366ec51f4b9bb3dc3c9ea22997c9" kindref="member">vdmHeader</ref>.val;</highlight></codeline>
<codeline lineno="1112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>TIMER_CALL_MAP(Cy_PdUtils_MemCopy)<sp/>((uint8_t<sp/>*)&amp;ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a1f056c297695b7e3e729311aba3fa5bb" kindref="member">vdmDiscSvidResp</ref>[1],<sp/>(uint8_t<sp/>*)msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a96568aa7466ed90908c4fc903678f203" kindref="member">vdo</ref>,<sp/>(uint32_t)msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1ae865fc2b1c65b511f72dc31f4d1e77fa" kindref="member">vdoNumb</ref><sp/>*<sp/>sizeof<sp/>(uint32_t));</highlight></codeline>
<codeline lineno="1113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1afb2bc35e49841dc30669c91ff27ad5c7" kindref="member">vdmDiscSvidRespLen</ref><sp/>=<sp/>msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1ae865fc2b1c65b511f72dc31f4d1e77fa" kindref="member">vdoNumb</ref><sp/>+<sp/>1u;</highlight></codeline>
<codeline lineno="1114"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1115"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1116"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Save<sp/>the<sp/>incremental<sp/>Disc<sp/>SVID<sp/>response<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp<sp/>=<sp/>(msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1ae865fc2b1c65b511f72dc31f4d1e77fa" kindref="member">vdoNumb</ref><sp/>&gt;<sp/>((uint8_t)<ref refid="group__group__pdaltmode__common__macros_1ga0828b64a6529f5b237cf417395253510" kindref="member">CY_PDALTMODE_MAX_DISC_SVID_RESP_LEN</ref><sp/>-<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1afb2bc35e49841dc30669c91ff27ad5c7" kindref="member">vdmDiscSvidRespLen</ref>))<sp/>?</highlight></codeline>
<codeline lineno="1119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((uint8_t)<ref refid="group__group__pdaltmode__common__macros_1ga0828b64a6529f5b237cf417395253510" kindref="member">CY_PDALTMODE_MAX_DISC_SVID_RESP_LEN</ref><sp/>-<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1afb2bc35e49841dc30669c91ff27ad5c7" kindref="member">vdmDiscSvidRespLen</ref>)<sp/>:<sp/>msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1ae865fc2b1c65b511f72dc31f4d1e77fa" kindref="member">vdoNumb</ref>;</highlight></codeline>
<codeline lineno="1120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>TIMER_CALL_MAP(Cy_PdUtils_MemCopy)<sp/>((uint8_t<sp/>*)&amp;ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a1f056c297695b7e3e729311aba3fa5bb" kindref="member">vdmDiscSvidResp</ref>[ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1afb2bc35e49841dc30669c91ff27ad5c7" kindref="member">vdmDiscSvidRespLen</ref>],<sp/>(uint8_t<sp/>*)msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a96568aa7466ed90908c4fc903678f203" kindref="member">vdo</ref>,</highlight></codeline>
<codeline lineno="1121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(uint32_t)tmp<sp/>*<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(uint32_t));</highlight></codeline>
<codeline lineno="1122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1afb2bc35e49841dc30669c91ff27ad5c7" kindref="member">vdmDiscSvidRespLen</ref><sp/>+=<sp/>tmp;</highlight></codeline>
<codeline lineno="1123"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1124"><highlight class="normal"></highlight></codeline>
<codeline lineno="1125"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight></codeline>
<codeline lineno="1126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a96568aa7466ed90908c4fc903678f203" kindref="member">vdo</ref>[0].val<sp/>==<sp/><ref refid="group__group__pdaltmode__common__macros_1ga2cb7840adbf420357dfbb997f0f2b3a3" kindref="member">CY_PDALTMODE_MNGR_NO_DATA</ref>)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="1127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a5bb8c89879c7b42d425dd78d681095cf" kindref="member">dSvidCnt</ref><sp/>==<sp/>0x00U)</highlight></codeline>
<codeline lineno="1128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="1129"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>No<sp/>SVID<sp/>supported<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="1132"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1133"><highlight class="normal"></highlight></codeline>
<codeline lineno="1134"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Save<sp/>received<sp/>SVIDs<sp/>and<sp/>check<sp/>if<sp/>a<sp/>NULL<sp/>SVID<sp/>was<sp/>received.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1135"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gab5e1a09da0d6f788003b7c90f4d534f7" kindref="member">Cy_PdAltMode_VdmTask_SaveSvids</ref>)(ptrAltModeContext,<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a9ed652c4200ff02aee0fe7d2038a7f53" kindref="member">atchTgt</ref>.<ref refid="structcy__stc__pdaltmode__atch__tgt__info__t_1a384eb0f65e624d38b18c9b4916251333" kindref="member">tgtSvid</ref>,<sp/><ref refid="group__group__pdaltmode__common__macros_1gad8212f19aa785ee9a8a02634357883b5" kindref="member">CY_PDALTMODE_MAX_SVID_VDO_SUPP</ref>)<sp/>!=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1136"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>if<sp/>cable<sp/>Disc<sp/>SVID<sp/>should<sp/>be<sp/>done<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gaa45ecb672ca0bf35e1de98e7057e448b" kindref="member">Cy_PdAltMode_VdmTask_IsCblSvidReq</ref>)(ptrAltModeContext)<sp/>!=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a3c5c7944d78609a176c55f7a3f93a7de" kindref="member">svidIdx</ref><sp/><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a5bb8c89879c7b42d425dd78d681095cf" kindref="member">dSvidCnt</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga0779fd0bc9432201c398f1a27ac5b270" kindref="member">Cy_PdAltMode_VdmTask_SetDiscParam</ref>)(ptrAltModeContext,<sp/>(uint8_t)CY_PD_SOP_PRIME,<sp/>CY_PDSTACK_VDM_CMD_DSC_SVIDS);</highlight></codeline>
<codeline lineno="1143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca975ad4fb2e6c7feb0cb1127be8325e3c" kindref="member">CY_PDALTMODE_VDM_TASK_SEND_MSG</ref>;</highlight></codeline>
<codeline lineno="1144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="1148"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>You<sp/>are<sp/>now<sp/>either<sp/>not<sp/>the<sp/>VConn<sp/>source,<sp/>or<sp/>failed<sp/>to<sp/>turn<sp/>the<sp/>VConn<sp/>ON.</highlight></codeline>
<codeline lineno="1149"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>Skip<sp/>SOP&apos;<sp/>checks<sp/>in<sp/>the<sp/>unlikely<sp/>case<sp/>where<sp/>this<sp/>happens.</highlight></codeline>
<codeline lineno="1150"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a7e69c43b3b2dd3eed1c6932869deb63d" kindref="member">vdmEvt</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga53976be265d41463919b3ea93da4cf30abd914a67376582616bd3cd1949b105ca" kindref="member">CY_PDALTMODE_VDM_EVT_RUN</ref>;</highlight></codeline>
<codeline lineno="1152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca26cf41d32bf19ca82712858c4e3b2038" kindref="member">CY_PDALTMODE_VDM_TASK_REG_ATCH_TGT_INFO</ref>;</highlight></codeline>
<codeline lineno="1153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1154"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1155"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1156"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>not<sp/>all<sp/>SVID<sp/>is<sp/>received,<sp/>ask<sp/>for<sp/>the<sp/>next<sp/>set<sp/>of<sp/>SVIDs.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga0779fd0bc9432201c398f1a27ac5b270" kindref="member">Cy_PdAltMode_VdmTask_SetDiscParam</ref>)(ptrAltModeContext,<sp/>(uint8_t)CY_PD_SOP,<sp/>CY_PDSTACK_VDM_CMD_DSC_SVIDS);</highlight></codeline>
<codeline lineno="1159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca975ad4fb2e6c7feb0cb1127be8325e3c" kindref="member">CY_PDALTMODE_VDM_TASK_SEND_MSG</ref>;</highlight></codeline>
<codeline lineno="1160"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1161"><highlight class="normal"></highlight></codeline>
<codeline lineno="1162"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="1163"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1164"><highlight class="normal"></highlight></codeline>
<codeline lineno="1165"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga399c1777f494368601cad31a40afca9c" kindref="member">cy_en_pdaltmode_vdm_task_t</ref><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gac65862533e26aef7fd32491f9bdd9a40" kindref="member">Cy_PdAltMode_VdmTask_HandleCblSvidResp</ref>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext)</highlight></codeline>
<codeline lineno="1166"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1167"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga399c1777f494368601cad31a40afca9c" kindref="member">cy_en_pdaltmode_vdm_task_t</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/><sp/><sp/><sp/><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca7eff1b48be7cbe38e7135ce320e01759" kindref="member">CY_PDALTMODE_VDM_TASK_EXIT</ref>;</highlight></codeline>
<codeline lineno="1168"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structcy__stc__pdaltmode__vdm__msg__info__t" kindref="compound">cy_stc_pdaltmode_vdm_msg_info_t</ref><sp/><sp/><sp/><sp/><sp/>*msgP<sp/><sp/><sp/>=<sp/>&amp;ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1ae35514d1f3ab5b9c3e9a3b467934ed08" kindref="member">vdmMsg</ref>;</highlight></codeline>
<codeline lineno="1169"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_stc_pdstack_context_t<sp/>*ptrPdStackContext<sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a34f18ac1a604068a73e013c483d55104" kindref="member">pdStackContext</ref>;</highlight></codeline>
<codeline lineno="1170"><highlight class="normal"></highlight></codeline>
<codeline lineno="1171"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>the<sp/>EMCA<sp/>returned<sp/>any<sp/>DOs,<sp/>save<sp/>the<sp/>content.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1172"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a96568aa7466ed90908c4fc903678f203" kindref="member">vdo</ref>[<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__macros_1gae4e2aa15a2cf04e0d55157a9d86b51bd" kindref="member">CY_PDALTMODE_MNGR_VDO_START_IDX</ref><sp/>-<sp/>1U].val<sp/>!=<sp/><ref refid="group__group__pdaltmode__common__macros_1ga2cb7840adbf420357dfbb997f0f2b3a3" kindref="member">CY_PDALTMODE_MNGR_NO_DATA</ref>)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="1173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gab5e1a09da0d6f788003b7c90f4d534f7" kindref="member">Cy_PdAltMode_VdmTask_SaveSvids</ref>)(ptrAltModeContext,<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a9ed652c4200ff02aee0fe7d2038a7f53" kindref="member">atchTgt</ref>.<ref refid="structcy__stc__pdaltmode__atch__tgt__info__t_1aea3aced4010a45030cb5bc8f319887c8" kindref="member">cblSvid</ref>,<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__macros_1gab98fd4a76d700ebeff9c2fe2c51cd8e7" kindref="member">CY_PDALTMODE_VDMTASK_MAX_CABLE_SVID_SUPP</ref>)<sp/>==<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="1174"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>not<sp/>all<sp/>SVID<sp/>is<sp/>received,<sp/>ask<sp/>for<sp/>the<sp/>next<sp/>set<sp/>of<sp/>SVIDs.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga0779fd0bc9432201c398f1a27ac5b270" kindref="member">Cy_PdAltMode_VdmTask_SetDiscParam</ref>)(ptrAltModeContext,<sp/>(uint8_t)CY_PD_SOP_PRIME,<sp/>CY_PDSTACK_VDM_CMD_DSC_SVIDS);</highlight></codeline>
<codeline lineno="1177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca975ad4fb2e6c7feb0cb1127be8325e3c" kindref="member">CY_PDALTMODE_VDM_TASK_SEND_MSG</ref>;</highlight></codeline>
<codeline lineno="1178"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1179"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1180"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="1182"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>If<sp/>EMCA<sp/>did<sp/>not<sp/>support<sp/>any<sp/>SVIDs<sp/>of<sp/>interest<sp/>and<sp/>does<sp/>not<sp/>require<sp/>VConn<sp/>for<sp/>operation,<sp/>disable<sp/>VConn.</highlight></codeline>
<codeline lineno="1183"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a9ed652c4200ff02aee0fe7d2038a7f53" kindref="member">atchTgt</ref>.<ref refid="structcy__stc__pdaltmode__atch__tgt__info__t_1aea3aced4010a45030cb5bc8f319887c8" kindref="member">cblSvid</ref>[0]<sp/>==<sp/><ref refid="group__group__pdaltmode__common__macros_1ga2cb7840adbf420357dfbb997f0f2b3a3" kindref="member">CY_PDALTMODE_MNGR_NO_DATA</ref>)</highlight></codeline>
<codeline lineno="1185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight></codeline>
<codeline lineno="1187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrPdStackContext-&gt;dpmStat.vconnRetain<sp/>==<sp/>0x0U)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="1188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrPdStackContext-&gt;dpmStat.cblVdo.std_cbl_vdo.cblTerm<sp/>==<sp/>(uint32_t)CY_PDSTACK_CBL_TERM_BOTH_PAS_VCONN_NOT_REQ)</highlight></codeline>
<codeline lineno="1189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="1190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrPdStackContext-&gt;ptrAppCbk-&gt;vconn_disable(ptrPdStackContext,<sp/>ptrPdStackContext-&gt;dpmConfig.revPol);</highlight></codeline>
<codeline lineno="1192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1194"><highlight class="normal"></highlight></codeline>
<codeline lineno="1195"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Move<sp/>to<sp/>the<sp/>next<sp/>step<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a7e69c43b3b2dd3eed1c6932869deb63d" kindref="member">vdmEvt</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga53976be265d41463919b3ea93da4cf30abd914a67376582616bd3cd1949b105ca" kindref="member">CY_PDALTMODE_VDM_EVT_RUN</ref>;</highlight></codeline>
<codeline lineno="1197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca26cf41d32bf19ca82712858c4e3b2038" kindref="member">CY_PDALTMODE_VDM_TASK_REG_ATCH_TGT_INFO</ref>;</highlight></codeline>
<codeline lineno="1198"><highlight class="normal"></highlight></codeline>
<codeline lineno="1199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a1189fb5cced531d9b3d9436abe7d1e25" kindref="member">usb4Flag</ref><sp/>==<sp/><ref refid="group__group__pdaltmode__usb4__enums_1ggaed6a0bdb5fa1306874c9f9dc6703ecd7a1d37d1fb7a64f1fc73ef46cd6c39cfbc" kindref="member">CY_PDALTMODE_USB4_TBT_CBL_DISC_RUN</ref>)</highlight></codeline>
<codeline lineno="1200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Run<sp/>Enter<sp/>USB4<sp/>related<sp/>Disc<sp/>mode<sp/>process<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca519562b24f860ad1d56c945d74f4a792" kindref="member">CY_PDALTMODE_VDM_TASK_USB4_TBT</ref>;</highlight></codeline>
<codeline lineno="1203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight></codeline>
<codeline lineno="1205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a1189fb5cced531d9b3d9436abe7d1e25" kindref="member">usb4Flag</ref><sp/>==<sp/><ref refid="group__group__pdaltmode__usb4__enums_1ggaed6a0bdb5fa1306874c9f9dc6703ecd7a64a496858d5eb535490c9581ae541a5d" kindref="member">CY_PDALTMODE_USB4_TBT_CBL_FIND</ref>)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="1206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrPdStackContext-&gt;dpmStat.cblType<sp/>==<sp/>CY_PDSTACK_PROD_TYPE_PAS_CBL)</highlight></codeline>
<codeline lineno="1207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="1208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Enter<sp/>USB4<sp/>mode<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1210"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__usb4__functions_1gaca0998c989866cffc03ab22c4e3c5939" kindref="member">Cy_PdAltMode_Usb4_Enter</ref>)(ptrAltModeContext,<sp/>CY_PD_SOP,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1214"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Do<sp/>nothing<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1216"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1217"><highlight class="normal"></highlight></codeline>
<codeline lineno="1218"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="1219"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1220"><highlight class="normal"></highlight></codeline>
<codeline lineno="1221"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga399c1777f494368601cad31a40afca9c" kindref="member">cy_en_pdaltmode_vdm_task_t</ref><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga7b0abbf4250ef5d595d674e0507a1229" kindref="member">Cy_PdAltMode_VdmTask_HandleFailSvidResp</ref>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext)</highlight></codeline>
<codeline lineno="1222"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1223"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga399c1777f494368601cad31a40afca9c" kindref="member">cy_en_pdaltmode_vdm_task_t</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca7eff1b48be7cbe38e7135ce320e01759" kindref="member">CY_PDALTMODE_VDM_TASK_EXIT</ref>;</highlight></codeline>
<codeline lineno="1224"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structcy__stc__pdaltmode__vdm__msg__info__t" kindref="compound">cy_stc_pdaltmode_vdm_msg_info_t</ref><sp/><sp/><sp/><sp/><sp/>*msgP<sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>&amp;ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1ae35514d1f3ab5b9c3e9a3b467934ed08" kindref="member">vdmMsg</ref>;</highlight></codeline>
<codeline lineno="1225"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_stc_pdstack_context_t<sp/>*ptrPdStackContext<sp/><sp/><sp/><sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a34f18ac1a604068a73e013c483d55104" kindref="member">pdStackContext</ref>;</highlight></codeline>
<codeline lineno="1226"><highlight class="normal"></highlight></codeline>
<codeline lineno="1227"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1a5b2942deed6c6a4382e9d669a62d68c5" kindref="member">usb4Active</ref><sp/>==<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1228"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1229"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a1189fb5cced531d9b3d9436abe7d1e25" kindref="member">usb4Flag</ref><sp/>&gt;<sp/><ref refid="group__group__pdaltmode__usb4__enums_1ggaed6a0bdb5fa1306874c9f9dc6703ecd7a0cb36f4e7471795aa91f2d2e83516297" kindref="member">CY_PDALTMODE_USB4_FAILED</ref>)</highlight></codeline>
<codeline lineno="1230"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1231"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrPdStackContext-&gt;dpmStat.cblType<sp/>==<sp/>CY_PDSTACK_PROD_TYPE_PAS_CBL)</highlight></codeline>
<codeline lineno="1232"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1233"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Enter<sp/>USB4<sp/>mode<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1234"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__usb4__functions_1gaca0998c989866cffc03ab22c4e3c5939" kindref="member">Cy_PdAltMode_Usb4_Enter</ref>)(ptrAltModeContext,<sp/>CY_PD_SOP,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1235"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1237"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1238"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Resume<sp/>VDM<sp/>handling<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1239"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/>ALT_MODE_CALL_MAP(Cy_PdAltMode_VdmTask_ResumeHandler)(ptrAltModeContext);</highlight></codeline>
<codeline lineno="1240"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="1242"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1243"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1244"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1245"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9cafdaff6d78ac13c01c80024f4d1c0d1f1" kindref="member">CY_PDALTMODE_VDM_TASK_WAIT</ref>;</highlight></codeline>
<codeline lineno="1247"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1248"><highlight class="normal"></highlight></codeline>
<codeline lineno="1249"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>cable<sp/>SVID<sp/>fails<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1250"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a6d0df2c229bd3ab17d8b8332b3da6d37" kindref="member">sopType</ref><sp/>==<sp/>(uint8_t)CY_PD_SOP_PRIME)</highlight></codeline>
<codeline lineno="1251"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1252"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a7e69c43b3b2dd3eed1c6932869deb63d" kindref="member">vdmEvt</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga53976be265d41463919b3ea93da4cf30abd914a67376582616bd3cd1949b105ca" kindref="member">CY_PDALTMODE_VDM_EVT_RUN</ref>;</highlight></codeline>
<codeline lineno="1253"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca26cf41d32bf19ca82712858c4e3b2038" kindref="member">CY_PDALTMODE_VDM_TASK_REG_ATCH_TGT_INFO</ref>;</highlight></codeline>
<codeline lineno="1254"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1255"><highlight class="normal"></highlight></codeline>
<codeline lineno="1256"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="1257"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1258"><highlight class="normal"></highlight></codeline>
<codeline lineno="1259"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga399c1777f494368601cad31a40afca9c" kindref="member">cy_en_pdaltmode_vdm_task_t</ref><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gaade89d4c99b2b98a132b32dc3cb87377" kindref="member">Cy_PdAltMode_VdmTask_MngDiscSvid</ref>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext,<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga53976be265d41463919b3ea93da4cf30" kindref="member">cy_en_pdaltmode_vdm_evt_t</ref><sp/>vdmEvt)</highlight></codeline>
<codeline lineno="1260"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1261"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_stc_pdstack_context_t<sp/>*ptrPdStackContext<sp/><sp/><sp/><sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a34f18ac1a604068a73e013c483d55104" kindref="member">pdStackContext</ref>;</highlight></codeline>
<codeline lineno="1262"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga399c1777f494368601cad31a40afca9c" kindref="member">cy_en_pdaltmode_vdm_task_t</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca7eff1b48be7cbe38e7135ce320e01759" kindref="member">CY_PDALTMODE_VDM_TASK_EXIT</ref>;</highlight></codeline>
<codeline lineno="1263"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structcy__stc__pdaltmode__vdm__msg__info__t" kindref="compound">cy_stc_pdaltmode_vdm_msg_info_t</ref><sp/><sp/><sp/><sp/><sp/>*msgP<sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>&amp;ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1ae35514d1f3ab5b9c3e9a3b467934ed08" kindref="member">vdmMsg</ref>;</highlight></codeline>
<codeline lineno="1264"><highlight class="normal"></highlight></codeline>
<codeline lineno="1265"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>pd3Ufp<sp/>=<sp/>((ptrPdStackContext-&gt;dpmConfig.specRevSopLive<sp/>&gt;=<sp/>CY_PD_REV3)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="1266"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrPdStackContext-&gt;dpmConfig.curPortType<sp/>==<sp/>CY_PD_PRT_TYPE_UFP));</highlight></codeline>
<codeline lineno="1267"><highlight class="normal"></highlight></codeline>
<codeline lineno="1268"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(vdmEvt)</highlight></codeline>
<codeline lineno="1269"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1270"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga53976be265d41463919b3ea93da4cf30abd914a67376582616bd3cd1949b105ca" kindref="member">CY_PDALTMODE_VDM_EVT_RUN</ref>:</highlight></codeline>
<codeline lineno="1271"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a1189fb5cced531d9b3d9436abe7d1e25" kindref="member">usb4Flag</ref><sp/>==<sp/><ref refid="group__group__pdaltmode__usb4__enums_1ggaed6a0bdb5fa1306874c9f9dc6703ecd7a64a496858d5eb535490c9581ae541a5d" kindref="member">CY_PDALTMODE_USB4_TBT_CBL_FIND</ref>)</highlight></codeline>
<codeline lineno="1272"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Enable<sp/>Vconn<sp/>if<sp/>required<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(void)ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gaa45ecb672ca0bf35e1de98e7057e448b" kindref="member">Cy_PdAltMode_VdmTask_IsCblSvidReq</ref>)(ptrAltModeContext);</highlight></codeline>
<codeline lineno="1275"><highlight class="normal"></highlight></codeline>
<codeline lineno="1276"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Form<sp/>Discover<sp/>SVID<sp/>VDM<sp/>packet<sp/>to<sp/>find<sp/>out<sp/>TBT<sp/>cable<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1277"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga0779fd0bc9432201c398f1a27ac5b270" kindref="member">Cy_PdAltMode_VdmTask_SetDiscParam</ref>)(ptrAltModeContext,<sp/>(uint8_t)CY_PD_SOP_PRIME,<sp/>CY_PDSTACK_VDM_CMD_DSC_SVIDS);</highlight></codeline>
<codeline lineno="1278"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca975ad4fb2e6c7feb0cb1127be8325e3c" kindref="member">CY_PDALTMODE_VDM_TASK_SEND_MSG</ref>;</highlight></codeline>
<codeline lineno="1279"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1280"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1281"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1282"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Form<sp/>Discover<sp/>SVID<sp/>VDM<sp/>packet<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1283"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga0779fd0bc9432201c398f1a27ac5b270" kindref="member">Cy_PdAltMode_VdmTask_SetDiscParam</ref>)(ptrAltModeContext,<sp/>(uint8_t)CY_PD_SOP,<sp/>CY_PDSTACK_VDM_CMD_DSC_SVIDS);</highlight></codeline>
<codeline lineno="1284"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca975ad4fb2e6c7feb0cb1127be8325e3c" kindref="member">CY_PDALTMODE_VDM_TASK_SEND_MSG</ref>;</highlight></codeline>
<codeline lineno="1285"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1286"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1287"><highlight class="normal"></highlight></codeline>
<codeline lineno="1288"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga53976be265d41463919b3ea93da4cf30a981de98f344b91aee860d9ae494d0444" kindref="member">CY_PDALTMODE_VDM_EVT_EVAL</ref>:</highlight></codeline>
<codeline lineno="1289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>is<sp/>current<sp/>port<sp/>data<sp/>role<sp/>DFP<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(ptrPdStackContext-&gt;dpmConfig.curPortType<sp/>!=<sp/>CY_PD_PRT_TYPE_UFP)</highlight></codeline>
<codeline lineno="1291"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1292"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>For<sp/>attached<sp/>target<sp/>response<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1293"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a6d0df2c229bd3ab17d8b8332b3da6d37" kindref="member">sopType</ref><sp/>==<sp/>(uint8_t)CY_PD_SOP)</highlight></codeline>
<codeline lineno="1294"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1295"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga4120453105a897857a01d614104b4705" kindref="member">Cy_PdAltMode_VdmTask_HandleSopSvidResp</ref>)(ptrAltModeContext);</highlight></codeline>
<codeline lineno="1296"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1297"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>For<sp/>cable<sp/>response<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1298"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1299"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1300"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gac65862533e26aef7fd32491f9bdd9a40" kindref="member">Cy_PdAltMode_VdmTask_HandleCblSvidResp</ref>)(ptrAltModeContext);</highlight></codeline>
<codeline lineno="1301"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1302"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1303"><highlight class="normal"></highlight></codeline>
<codeline lineno="1304"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>is<sp/>current<sp/>port<sp/>data<sp/>role<sp/>UFP<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pd3Ufp)</highlight></codeline>
<codeline lineno="1306"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Send<sp/>Disc<sp/>SVID<sp/>cmd<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1308"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a7e69c43b3b2dd3eed1c6932869deb63d" kindref="member">vdmEvt</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga53976be265d41463919b3ea93da4cf30abd914a67376582616bd3cd1949b105ca" kindref="member">CY_PDALTMODE_VDM_EVT_RUN</ref>;</highlight></codeline>
<codeline lineno="1309"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca26cf41d32bf19ca82712858c4e3b2038" kindref="member">CY_PDALTMODE_VDM_TASK_REG_ATCH_TGT_INFO</ref>;</highlight></codeline>
<codeline lineno="1310"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1311"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1312"><highlight class="normal"></highlight></codeline>
<codeline lineno="1313"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga53976be265d41463919b3ea93da4cf30a4b471a5f9cc7707f702e5d2bf6848af1" kindref="member">CY_PDALTMODE_VDM_EVT_FAIL</ref>:</highlight></codeline>
<codeline lineno="1314"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga7b0abbf4250ef5d595d674e0507a1229" kindref="member">Cy_PdAltMode_VdmTask_HandleFailSvidResp</ref>)(ptrAltModeContext);</highlight></codeline>
<codeline lineno="1315"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1316"><highlight class="normal"></highlight></codeline>
<codeline lineno="1317"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1318"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Do<sp/>nothing<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1319"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1320"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1321"><highlight class="normal"></highlight></codeline>
<codeline lineno="1322"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="1323"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1324"><highlight class="normal"></highlight></codeline>
<codeline lineno="1325"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga8333ffa89cf422c2c4bf1ac1514c0541" kindref="member">Cy_PdAltMode_VdmTask_ResetMngr</ref>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext)</highlight></codeline>
<codeline lineno="1326"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1327"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_stc_pdstack_context_t<sp/>*ptrPdStackContext<sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a34f18ac1a604068a73e013c483d55104" kindref="member">pdStackContext</ref>;</highlight></codeline>
<codeline lineno="1328"><highlight class="normal"></highlight></codeline>
<codeline lineno="1329"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a4b36298faf799e5e6e8af46058c05ab8" kindref="member">recRetryCnt</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><ref refid="group__group__pdaltmode__common__macros_1ga2cb7840adbf420357dfbb997f0f2b3a3" kindref="member">CY_PDALTMODE_MNGR_NO_DATA</ref>;</highlight></codeline>
<codeline lineno="1330"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a3c5c7944d78609a176c55f7a3f93a7de" kindref="member">svidIdx</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><ref refid="group__group__pdaltmode__common__macros_1ga2cb7840adbf420357dfbb997f0f2b3a3" kindref="member">CY_PDALTMODE_MNGR_NO_DATA</ref>;</highlight></codeline>
<codeline lineno="1331"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a5bb8c89879c7b42d425dd78d681095cf" kindref="member">dSvidCnt</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><ref refid="group__group__pdaltmode__common__macros_1ga2cb7840adbf420357dfbb997f0f2b3a3" kindref="member">CY_PDALTMODE_MNGR_NO_DATA</ref>;</highlight></codeline>
<codeline lineno="1332"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a058a7eddfaa145f9f7353c752a4354e8" kindref="member">usb4UpdatePending</ref><sp/>=<sp/>0x00U;</highlight></codeline>
<codeline lineno="1333"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1afa8bd4e691dc7692651dc3e4ab6a5274" kindref="member">usb4EnterRetryCount</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__common__macros_1ga2cb7840adbf420357dfbb997f0f2b3a3" kindref="member">CY_PDALTMODE_MNGR_NO_DATA</ref>;</highlight></codeline>
<codeline lineno="1334"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a9691ecac8b26767485b91bd4e75996f7" kindref="member">altModesNotSupp</ref><sp/><sp/><sp/>=<sp/><ref refid="group__group__pdaltmode__common__macros_1ga2cb7840adbf420357dfbb997f0f2b3a3" kindref="member">CY_PDALTMODE_MNGR_NO_DATA</ref>;</highlight></codeline>
<codeline lineno="1335"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a1189fb5cced531d9b3d9436abe7d1e25" kindref="member">usb4Flag</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><ref refid="group__group__pdaltmode__usb4__enums_1ggaed6a0bdb5fa1306874c9f9dc6703ecd7a709bfd59b76b4df69bfebcf15d2c3c08" kindref="member">CY_PDALTMODE_USB4_NONE</ref>;</highlight></codeline>
<codeline lineno="1336"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1ab8c2f329d9d1b6d732b553eb0072f601" kindref="member">vdmVcsRqtState</ref><sp/><sp/><sp/><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ggaa31ccb72f7bd9114cb70754d774959b3a80d5724dcb75f4e86ddb2fe2c72b43b9" kindref="member">CY_PDALTMODE_VCONN_RQT_INACTIVE</ref>;</highlight></codeline>
<codeline lineno="1337"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a72e22b01318f07884cf6d4aad92b8490" kindref="member">vdmVcsRqtCount</ref><sp/><sp/><sp/><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1338"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Clear<sp/>the<sp/>SOP&apos;&apos;<sp/>reset<sp/>state<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1339"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a3df87d55e5b872a87e857e8dfddf8f1a" kindref="member">vdmEmcaRstState</ref><sp/><sp/><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ggaa7da3e23558bed3d229bdad5c90401a1a7c86f482fd163d4cd731179fd325725f" kindref="member">CY_PDALTMODE_CABLE_DP_RESET_IDLE</ref>;</highlight></codeline>
<codeline lineno="1340"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a51bd6a028f126c36e5b2cfac890f52a7" kindref="member">vdmEmcaRstCount</ref><sp/><sp/><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1341"><highlight class="normal"></highlight></codeline>
<codeline lineno="1342"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Clear<sp/>EUDO<sp/>buffer<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1343"><highlight class="normal"><sp/><sp/><sp/><sp/>UTILS_CALL_MAP(Cy_PdUtils_MemSet)((uint8_t<sp/>*)&amp;ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a789c5bea31bbce4da60511291047cdac" kindref="member">eudoBuf</ref>,<sp/><ref refid="group__group__pdaltmode__common__macros_1ga2cb7840adbf420357dfbb997f0f2b3a3" kindref="member">CY_PDALTMODE_MNGR_NO_DATA</ref>,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(cy_stc_pdstack_dpm_pd_cmd_buf_t));</highlight></codeline>
<codeline lineno="1344"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Clear<sp/>arrays<sp/>which<sp/>hold<sp/>SVIDs<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1345"><highlight class="normal"><sp/><sp/><sp/><sp/>UTILS_CALL_MAP(Cy_PdUtils_MemSet)((uint8_t<sp/>*)&amp;ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a9ed652c4200ff02aee0fe7d2038a7f53" kindref="member">atchTgt</ref>,<sp/><ref refid="group__group__pdaltmode__common__macros_1ga2cb7840adbf420357dfbb997f0f2b3a3" kindref="member">CY_PDALTMODE_MNGR_NO_DATA</ref>,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="structcy__stc__pdaltmode__atch__tgt__info__t" kindref="compound">cy_stc_pdaltmode_atch_tgt_info_t</ref>));</highlight></codeline>
<codeline lineno="1346"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Store<sp/>the<sp/>pointer<sp/>to<sp/>the<sp/>cable<sp/>VDO<sp/>discovered<sp/>by<sp/>PD<sp/>Stack<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1347"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a9ed652c4200ff02aee0fe7d2038a7f53" kindref="member">atchTgt</ref>.<ref refid="structcy__stc__pdaltmode__atch__tgt__info__t_1a8f281e3f3e2462ee8dc336e634361fb4" kindref="member">cblVdo</ref><sp/>=<sp/>(cy_pd_pd_do_t*)&amp;ptrPdStackContext-&gt;dpmStat.cblVdo;</highlight></codeline>
<codeline lineno="1348"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Stop<sp/>the<sp/>VDM<sp/>task<sp/>delay<sp/>timer<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1349"><highlight class="normal"><sp/><sp/><sp/><sp/>TIMER_CALL_MAP(Cy_PdUtils_SwTimer_Stop)(ptrPdStackContext-&gt;ptrTimerContext,<sp/>CY_PDALTMODE_GET_TIMER_ID(ptrPdStackContext,<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga8ce268202ee29df67f500d14a1273881a49535375901fa7e1420cd491a8cf4b3e" kindref="member">CY_PDALTMODE_VDM_BUSY_TIMER</ref>));</highlight></codeline>
<codeline lineno="1350"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1351"><highlight class="normal"></highlight></codeline>
<codeline lineno="1352"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga399c1777f494368601cad31a40afca9c" kindref="member">cy_en_pdaltmode_vdm_task_t</ref><sp/>Cy_PdAltMode_VdmTask_ResumeHandler(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext)</highlight></codeline>
<codeline lineno="1353"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1354"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Remove<sp/>USB4<sp/>pending<sp/>flag<sp/>to<sp/>allow<sp/>VDM<sp/>manager<sp/>handling<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1355"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a1189fb5cced531d9b3d9436abe7d1e25" kindref="member">usb4Flag</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__usb4__enums_1ggaed6a0bdb5fa1306874c9f9dc6703ecd7a0cb36f4e7471795aa91f2d2e83516297" kindref="member">CY_PDALTMODE_USB4_FAILED</ref>;</highlight></codeline>
<codeline lineno="1356"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a3c5c7944d78609a176c55f7a3f93a7de" kindref="member">svidIdx</ref><sp/><sp/>=<sp/><ref refid="group__group__pdaltmode__common__macros_1ga2cb7840adbf420357dfbb997f0f2b3a3" kindref="member">CY_PDALTMODE_MNGR_NO_DATA</ref>;</highlight></codeline>
<codeline lineno="1357"><highlight class="normal"><sp/><sp/><sp/><sp/>UTILS_CALL_MAP(Cy_PdUtils_MemSet)((uint8_t<sp/>*)ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a9ed652c4200ff02aee0fe7d2038a7f53" kindref="member">atchTgt</ref>.<ref refid="structcy__stc__pdaltmode__atch__tgt__info__t_1aea3aced4010a45030cb5bc8f319887c8" kindref="member">cblSvid</ref>,<sp/><ref refid="group__group__pdaltmode__common__macros_1ga2cb7840adbf420357dfbb997f0f2b3a3" kindref="member">CY_PDALTMODE_MNGR_NO_DATA</ref>,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a9ed652c4200ff02aee0fe7d2038a7f53" kindref="member">atchTgt</ref>.<ref refid="structcy__stc__pdaltmode__atch__tgt__info__t_1aea3aced4010a45030cb5bc8f319887c8" kindref="member">cblSvid</ref>));</highlight></codeline>
<codeline lineno="1358"><highlight class="normal"><sp/><sp/><sp/><sp/>UTILS_CALL_MAP(Cy_PdUtils_MemSet)((uint8_t<sp/>*)ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a9ed652c4200ff02aee0fe7d2038a7f53" kindref="member">atchTgt</ref>.<ref refid="structcy__stc__pdaltmode__atch__tgt__info__t_1a384eb0f65e624d38b18c9b4916251333" kindref="member">tgtSvid</ref>,<sp/><ref refid="group__group__pdaltmode__common__macros_1ga2cb7840adbf420357dfbb997f0f2b3a3" kindref="member">CY_PDALTMODE_MNGR_NO_DATA</ref>,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a9ed652c4200ff02aee0fe7d2038a7f53" kindref="member">atchTgt</ref>.<ref refid="structcy__stc__pdaltmode__atch__tgt__info__t_1a384eb0f65e624d38b18c9b4916251333" kindref="member">tgtSvid</ref>));</highlight></codeline>
<codeline lineno="1359"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a7e69c43b3b2dd3eed1c6932869deb63d" kindref="member">vdmEvt</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga53976be265d41463919b3ea93da4cf30abd914a67376582616bd3cd1949b105ca" kindref="member">CY_PDALTMODE_VDM_EVT_RUN</ref>;</highlight></codeline>
<codeline lineno="1360"><highlight class="normal"></highlight></codeline>
<codeline lineno="1361"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Resume<sp/>VDM<sp/>flow<sp/>or<sp/>exit<sp/>VDM<sp/>handler<sp/>based<sp/>on<sp/>Alt<sp/>Mode<sp/>support<sp/>flag<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1362"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1acb352c125c763362864a110417fee400" kindref="member">vdmTask</ref><sp/>=<sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a9691ecac8b26767485b91bd4e75996f7" kindref="member">altModesNotSupp</ref><sp/>==<sp/>0x0U)<sp/>?<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca72edaaa68587cf25316c845237d32cef" kindref="member">CY_PDALTMODE_VDM_TASK_DISC_SVID</ref><sp/>:<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca7eff1b48be7cbe38e7135ce320e01759" kindref="member">CY_PDALTMODE_VDM_TASK_EXIT</ref>;</highlight></codeline>
<codeline lineno="1363"><highlight class="normal"></highlight></codeline>
<codeline lineno="1364"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1acb352c125c763362864a110417fee400" kindref="member">vdmTask</ref>;</highlight></codeline>
<codeline lineno="1365"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1366"><highlight class="normal"></highlight></codeline>
<codeline lineno="1367"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gaa3cffcb7d5f8a8f64259274abcd58b92" kindref="member">Cy_PdAltMode_VdmTask_MngrDeInit</ref>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext)</highlight></codeline>
<codeline lineno="1368"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1369"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_stc_pdstack_context_t<sp/>*ptrPdStackContext<sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a34f18ac1a604068a73e013c483d55104" kindref="member">pdStackContext</ref>;</highlight></codeline>
<codeline lineno="1370"><highlight class="normal"></highlight></codeline>
<codeline lineno="1371"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1aa64a8201b153c51cc5099bfd8a02059b" kindref="member">vdmPrcsFailed</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1372"><highlight class="normal"></highlight></codeline>
<codeline lineno="1373"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>VDM<sp/>task<sp/>is<sp/>not<sp/>active,<sp/>no<sp/>need<sp/>to<sp/>go<sp/>through<sp/>the<sp/>rest<sp/>of<sp/>the<sp/>steps.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1374"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1a5ea8f165a1c5b45f73dc45cf5d98f4fd" kindref="member">vdmTaskEn</ref><sp/>!=<sp/>0x0U)</highlight></codeline>
<codeline lineno="1375"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1376"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga8333ffa89cf422c2c4bf1ac1514c0541" kindref="member">Cy_PdAltMode_VdmTask_ResetMngr</ref>)(ptrAltModeContext);</highlight></codeline>
<codeline lineno="1377"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Clear<sp/>all<sp/>application<sp/>status<sp/>flags.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1378"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1a0072068202d415dda15bee222f81a4e6" kindref="member">trigTbtVdoDisc</ref><sp/><sp/><sp/><sp/><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1379"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a058a7eddfaa145f9f7353c752a4354e8" kindref="member">usb4UpdatePending</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x00U;</highlight></codeline>
<codeline lineno="1380"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1a5ea8f165a1c5b45f73dc45cf5d98f4fd" kindref="member">vdmTaskEn</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0x0U;</highlight></codeline>
<codeline lineno="1381"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1a2dd2e4b11b83b9f2e8538ba5857f2b15" kindref="member">altModeEntered</ref><sp/><sp/><sp/><sp/><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1382"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1ac11ac509c77e1c62758b13ca2de1e50d" kindref="member">cblRstDone</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1383"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1a20b1199471de10b3bdb57d381364cd42" kindref="member">trigCblRst</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1384"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1a70b3ba1273c59660d7a0dfb8369d3aa0" kindref="member">tbtCblEntered</ref><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1385"><highlight class="normal"></highlight></codeline>
<codeline lineno="1386"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Exit<sp/>from<sp/>Alt<sp/>Mode<sp/>manager<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1387"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(void)<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga3bf3d903b17da9773d466736097918ec" kindref="member">Cy_PdAltMode_Mngr_AltModeProcess</ref>(ptrAltModeContext,<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga53976be265d41463919b3ea93da4cf30a80a5ba7f033ccc4def5f66ddb7e79398" kindref="member">CY_PDALTMODE_VDM_EVT_EXIT</ref>);</highlight></codeline>
<codeline lineno="1388"><highlight class="normal"></highlight></codeline>
<codeline lineno="1389"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Skip<sp/>MUX<sp/>update<sp/>if<sp/>port<sp/>was<sp/>de-attached<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1390"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrPdStackContext-&gt;dpmConfig.attach<sp/>==<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1391"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1392"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1ab9d270cdb5005b6e616233e44eb41665" kindref="member">skipMuxConfig</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1393"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1394"><highlight class="normal"></highlight></codeline>
<codeline lineno="1395"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Deinit<sp/>App<sp/>HW<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1396"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__group__pdaltmode__alt__mode__hw__functions_1ga663c36b739760f4682755262bb98d18e" kindref="member">Cy_PdAltMode_HW_DeInit</ref>(ptrAltModeContext);</highlight></codeline>
<codeline lineno="1397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="1398"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1ab9d270cdb5005b6e616233e44eb41665" kindref="member">skipMuxConfig</ref><sp/><sp/><sp/><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1399"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1400"><highlight class="normal"></highlight></codeline>
<codeline lineno="1401"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>CY_PD_USB4_SUPPORT_ENABLE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1402"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Reset<sp/>the<sp/>Enter<sp/>USB<sp/>retry<sp/>count<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1403"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1afa8bd4e691dc7692651dc3e4ab6a5274" kindref="member">usb4EnterRetryCount</ref><sp/>=<sp/>0u;</highlight></codeline>
<codeline lineno="1404"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>CY_PD_USB4_SUPPORT_ENABLE<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1405"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1406"><highlight class="normal"></highlight></codeline>
<codeline lineno="1407"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga5e19654e4d8fe00e8b929ed8cc563462" kindref="member">Cy_PdAltMode_VdmTask_MngrExitModes</ref>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext)</highlight></codeline>
<codeline lineno="1408"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1409"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_stc_pdstack_context_t<sp/>*ptrPdStackContext<sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a34f18ac1a604068a73e013c483d55104" kindref="member">pdStackContext</ref>;</highlight></codeline>
<codeline lineno="1410"><highlight class="normal"></highlight></codeline>
<codeline lineno="1411"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight></codeline>
<codeline lineno="1412"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrPdStackContext-&gt;dpmConfig.curPortType<sp/>==<sp/>CY_PD_PRT_TYPE_DFP)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="1413"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1a2dd2e4b11b83b9f2e8538ba5857f2b15" kindref="member">altModeEntered</ref><sp/>!=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1414"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="1415"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1416"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Exit<sp/>from<sp/>Alt<sp/>Mode<sp/>manager<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1417"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(void)<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga3bf3d903b17da9773d466736097918ec" kindref="member">Cy_PdAltMode_Mngr_AltModeProcess</ref>(ptrAltModeContext,<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga53976be265d41463919b3ea93da4cf30a80a5ba7f033ccc4def5f66ddb7e79398" kindref="member">CY_PDALTMODE_VDM_EVT_EXIT</ref>);</highlight></codeline>
<codeline lineno="1418"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1419"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1420"><highlight class="normal"></highlight></codeline>
<codeline lineno="1421"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga99f1080aeb4ec6773b79c1bc94b504bf" kindref="member">Cy_PdAltMode_VdmTask_SopDpSoftResetCb</ref>(cy_stc_pdstack_context_t<sp/>*ptrPdStackContext,<sp/>cy_en_pdstack_resp_status_t<sp/>resp,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>cy_stc_pdstack_pd_packet_t<sp/>*pktPtr)</highlight></codeline>
<codeline lineno="1422"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1423"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext<sp/>=<sp/>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*)ptrPdStackContext-&gt;ptrAltModeContext;</highlight></codeline>
<codeline lineno="1424"><highlight class="normal"></highlight></codeline>
<codeline lineno="1425"><highlight class="normal"><sp/><sp/><sp/><sp/>switch<sp/>(resp)</highlight></codeline>
<codeline lineno="1426"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1427"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>CY_PDSTACK_CMD_SENT:</highlight></codeline>
<codeline lineno="1428"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Do<sp/>nothing<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1429"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1430"><highlight class="normal"></highlight></codeline>
<codeline lineno="1431"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>CY_PDSTACK_RES_RCVD:</highlight></codeline>
<codeline lineno="1432"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Proceed<sp/>with<sp/>rest<sp/>of<sp/>Alternate<sp/>mode<sp/>state<sp/>machine<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1433"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a3df87d55e5b872a87e857e8dfddf8f1a" kindref="member">vdmEmcaRstState</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ggaa7da3e23558bed3d229bdad5c90401a1aad77bde21fa638472cf2590eead3d21b" kindref="member">CY_PDALTMODE_CABLE_DP_RESET_DONE</ref>;</highlight></codeline>
<codeline lineno="1434"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1435"><highlight class="normal"></highlight></codeline>
<codeline lineno="1436"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1437"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Retry<sp/>the<sp/>cable<sp/>SOFT_RESET<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1438"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a51bd6a028f126c36e5b2cfac890f52a7" kindref="member">vdmEmcaRstCount</ref>++;</highlight></codeline>
<codeline lineno="1439"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a51bd6a028f126c36e5b2cfac890f52a7" kindref="member">vdmEmcaRstCount</ref><sp/>&gt;=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__macros_1ga03715cb83c82cccfcb22d7b97ca4ccb4" kindref="member">CY_PDALTMODE_VDMTASK_MAX_EMCA_DP_RESET_COUNT</ref>)</highlight></codeline>
<codeline lineno="1440"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1441"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a3df87d55e5b872a87e857e8dfddf8f1a" kindref="member">vdmEmcaRstState</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ggaa7da3e23558bed3d229bdad5c90401a1aad77bde21fa638472cf2590eead3d21b" kindref="member">CY_PDALTMODE_CABLE_DP_RESET_DONE</ref>;</highlight></codeline>
<codeline lineno="1442"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1443"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1444"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1445"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a3df87d55e5b872a87e857e8dfddf8f1a" kindref="member">vdmEmcaRstState</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ggaa7da3e23558bed3d229bdad5c90401a1ab7dc624daffc9a03c4d9cb9995716fe4" kindref="member">CY_PDALTMODE_CABLE_DP_RESET_RETRY</ref>;</highlight></codeline>
<codeline lineno="1446"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1447"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1448"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1449"><highlight class="normal"></highlight></codeline>
<codeline lineno="1450"><highlight class="normal"><sp/><sp/><sp/><sp/>(void)<sp/>pktPtr;</highlight></codeline>
<codeline lineno="1451"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1452"><highlight class="normal"></highlight></codeline>
<codeline lineno="1453"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gae9131b85b5acc6edad37ef4a67969536" kindref="member">Cy_PdAltMode_VdmTask_SendSopDpSoftReset</ref>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext)</highlight></codeline>
<codeline lineno="1454"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1455"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_stc_pdstack_context_t<sp/>*ptrPdStackContext<sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a34f18ac1a604068a73e013c483d55104" kindref="member">pdStackContext</ref>;</highlight></codeline>
<codeline lineno="1456"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_stc_pdstack_dpm_pd_cmd_buf_t<sp/>dpm_cmd_param;</highlight></codeline>
<codeline lineno="1457"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_en_pdstack_status_t<sp/><sp/><sp/><sp/><sp/>api_stat;</highlight></codeline>
<codeline lineno="1458"><highlight class="normal"></highlight></codeline>
<codeline lineno="1459"><highlight class="normal"><sp/><sp/><sp/><sp/>dpm_cmd_param.cmdSop<sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>CY_PD_SOP_DPRIME;</highlight></codeline>
<codeline lineno="1460"><highlight class="normal"><sp/><sp/><sp/><sp/>dpm_cmd_param.noOfCmdDo<sp/><sp/><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1461"><highlight class="normal"><sp/><sp/><sp/><sp/>dpm_cmd_param.datPtr<sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="1462"><highlight class="normal"><sp/><sp/><sp/><sp/>dpm_cmd_param.timeout<sp/><sp/><sp/><sp/><sp/>=<sp/>15;</highlight></codeline>
<codeline lineno="1463"><highlight class="normal"></highlight></codeline>
<codeline lineno="1464"><highlight class="normal"><sp/><sp/><sp/><sp/>api_stat<sp/>=<sp/>PDSTACK_CALL_MAP(Cy_PdStack_Dpm_SendPdCommand)(ptrPdStackContext,<sp/>CY_PDSTACK_DPM_CMD_SEND_SOFT_RESET_EMCA,<sp/>&amp;dpm_cmd_param,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">,<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga99f1080aeb4ec6773b79c1bc94b504bf" kindref="member">Cy_PdAltMode_VdmTask_SopDpSoftResetCb</ref>);</highlight></codeline>
<codeline lineno="1465"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(api_stat)</highlight></codeline>
<codeline lineno="1466"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1467"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>CY_PDSTACK_STAT_SUCCESS:</highlight></codeline>
<codeline lineno="1468"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Wait<sp/>for<sp/>the<sp/>cable<sp/>SOFT_RESET<sp/>response<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1469"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a3df87d55e5b872a87e857e8dfddf8f1a" kindref="member">vdmEmcaRstState</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ggaa7da3e23558bed3d229bdad5c90401a1a17ac0ad683cafdf10364fef4a64f4a67" kindref="member">CY_PDALTMODE_CABLE_DP_RESET_WAIT</ref>;</highlight></codeline>
<codeline lineno="1470"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1471"><highlight class="normal"></highlight></codeline>
<codeline lineno="1472"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>CY_PDSTACK_STAT_BUSY:</highlight></codeline>
<codeline lineno="1473"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>CY_PDSTACK_STAT_NOT_READY:</highlight></codeline>
<codeline lineno="1474"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Need<sp/>to<sp/>retry<sp/>the<sp/>command<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1475"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a3df87d55e5b872a87e857e8dfddf8f1a" kindref="member">vdmEmcaRstState</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ggaa7da3e23558bed3d229bdad5c90401a1ab7dc624daffc9a03c4d9cb9995716fe4" kindref="member">CY_PDALTMODE_CABLE_DP_RESET_RETRY</ref>;</highlight></codeline>
<codeline lineno="1476"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1477"><highlight class="normal"></highlight></codeline>
<codeline lineno="1478"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1479"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Connection<sp/>state<sp/>changed.<sp/>Abort<sp/>the<sp/>cable<sp/>SOFT_RESET<sp/>process.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1480"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a3df87d55e5b872a87e857e8dfddf8f1a" kindref="member">vdmEmcaRstState</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ggaa7da3e23558bed3d229bdad5c90401a1aad77bde21fa638472cf2590eead3d21b" kindref="member">CY_PDALTMODE_CABLE_DP_RESET_DONE</ref>;</highlight></codeline>
<codeline lineno="1481"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1482"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1483"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1484"><highlight class="normal"></highlight></codeline>
<codeline lineno="1485"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga26476af05a71c4ba1a24b398df0c10cf" kindref="member">Cy_PdAltMode_VdmTask_VconnSwapCb</ref>(cy_stc_pdstack_context_t<sp/>*ptrPdStackContext,<sp/>cy_en_pdstack_resp_status_t<sp/>resp,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>cy_stc_pdstack_pd_packet_t<sp/>*pktPtr)</highlight></codeline>
<codeline lineno="1486"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1487"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext<sp/>=<sp/>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*)ptrPdStackContext-&gt;ptrAltModeContext;</highlight></codeline>
<codeline lineno="1488"><highlight class="normal"></highlight></codeline>
<codeline lineno="1489"><highlight class="normal"><sp/><sp/><sp/><sp/>switch<sp/>(resp)</highlight></codeline>
<codeline lineno="1490"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1491"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>CY_PDSTACK_CMD_SENT:</highlight></codeline>
<codeline lineno="1492"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Do<sp/>nothing<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1493"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1494"><highlight class="normal"></highlight></codeline>
<codeline lineno="1495"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>CY_PDSTACK_RES_RCVD:</highlight></codeline>
<codeline lineno="1496"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Proceed<sp/>with<sp/>rest<sp/>of<sp/>Alternate<sp/>Mode<sp/>state<sp/>machine<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1497"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>((cy_en_pd_ctrl_msg_t)pktPtr-&gt;msg)</highlight></codeline>
<codeline lineno="1498"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1499"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>CY_PD_CTRL_MSG_ACCEPT:</highlight></codeline>
<codeline lineno="1500"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="1501"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>If<sp/>EMCA<sp/>has<sp/>already<sp/>been<sp/>detected,<sp/>apply<sp/>a<sp/>delay<sp/>and<sp/>proceed<sp/>with<sp/>next<sp/>steps.</highlight></codeline>
<codeline lineno="1502"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>Otherwise,<sp/>keep<sp/>waiting<sp/>for<sp/>cable<sp/>discovery-related<sp/>events.</highlight></codeline>
<codeline lineno="1503"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1504"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(ptrPdStackContext-&gt;dpmConfig.emcaPresent)</highlight></codeline>
<codeline lineno="1505"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1506"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(void)TIMER_CALL_MAP(Cy_PdUtils_SwTimer_StartWocb)(ptrPdStackContext-&gt;ptrTimerContext,</highlight></codeline>
<codeline lineno="1507"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>CY_PDALTMODE_GET_TIMER_ID(ptrPdStackContext,<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga8ce268202ee29df67f500d14a1273881a49535375901fa7e1420cd491a8cf4b3e" kindref="member">CY_PDALTMODE_VDM_BUSY_TIMER</ref>),<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a2083b9e4f1976568c605c50a24a67d18" kindref="member">appCblStartDelay</ref>);</highlight></codeline>
<codeline lineno="1508"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1ab8c2f329d9d1b6d732b553eb0072f601" kindref="member">vdmVcsRqtState</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ggaa31ccb72f7bd9114cb70754d774959b3a80d5724dcb75f4e86ddb2fe2c72b43b9" kindref="member">CY_PDALTMODE_VCONN_RQT_INACTIVE</ref>;</highlight></codeline>
<codeline lineno="1509"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1510"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1511"><highlight class="normal"></highlight></codeline>
<codeline lineno="1512"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>CY_PD_CTRL_MSG_WAIT:</highlight></codeline>
<codeline lineno="1513"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a72e22b01318f07884cf6d4aad92b8490" kindref="member">vdmVcsRqtCount</ref>++;</highlight></codeline>
<codeline lineno="1514"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a72e22b01318f07884cf6d4aad92b8490" kindref="member">vdmVcsRqtCount</ref><sp/>&gt;=<sp/>10u)</highlight></codeline>
<codeline lineno="1515"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1516"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a72e22b01318f07884cf6d4aad92b8490" kindref="member">vdmVcsRqtCount</ref><sp/>=<sp/>(uint8_t)<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ggaa31ccb72f7bd9114cb70754d774959b3a57e829a97291052df3c78d859b9cd38d" kindref="member">CY_PDALTMODE_VCONN_RQT_FAILED</ref>;</highlight></codeline>
<codeline lineno="1517"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1518"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1519"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1520"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Start<sp/>a<sp/>timer<sp/>to<sp/>repeat<sp/>the<sp/>VConn<sp/>Swap<sp/>request<sp/>after<sp/>a<sp/>delay.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1521"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(void)TIMER_CALL_MAP(Cy_PdUtils_SwTimer_StartWocb)(ptrPdStackContext-&gt;ptrTimerContext,</highlight></codeline>
<codeline lineno="1522"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>CY_PDALTMODE_GET_TIMER_ID(ptrPdStackContext,<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga8ce268202ee29df67f500d14a1273881a49535375901fa7e1420cd491a8cf4b3e" kindref="member">CY_PDALTMODE_VDM_BUSY_TIMER</ref>),<sp/>10u);</highlight></codeline>
<codeline lineno="1523"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1524"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1525"><highlight class="normal"></highlight></codeline>
<codeline lineno="1526"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1527"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1ab8c2f329d9d1b6d732b553eb0072f601" kindref="member">vdmVcsRqtState</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ggaa31ccb72f7bd9114cb70754d774959b3a57e829a97291052df3c78d859b9cd38d" kindref="member">CY_PDALTMODE_VCONN_RQT_FAILED</ref>;</highlight></codeline>
<codeline lineno="1528"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1529"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1530"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1531"><highlight class="normal"></highlight></codeline>
<codeline lineno="1532"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1533"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Keep<sp/>retrying<sp/>the<sp/>VConn<sp/>Swap<sp/>request<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1534"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1ab8c2f329d9d1b6d732b553eb0072f601" kindref="member">vdmVcsRqtState</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ggaa31ccb72f7bd9114cb70754d774959b3ae721466cb519275856f67c47ce698fc4" kindref="member">CY_PDALTMODE_VCONN_RQT_PENDING</ref>;</highlight></codeline>
<codeline lineno="1535"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1536"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1537"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1538"><highlight class="normal"></highlight></codeline>
<codeline lineno="1539"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Function<sp/>to<sp/>initiate<sp/>VConn<sp/>Swap<sp/>and<sp/>cable<sp/>discovery<sp/>before<sp/>continuing<sp/>with<sp/>the<sp/>next<sp/>SOP&apos;/SOP&apos;&apos;<sp/>message.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1540"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gad52bc510f0fb304eaed0ed9cd6177173" kindref="member">Cy_PdAltMode_VdmTask_InitiateVcsCblDiscovery</ref>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext)</highlight></codeline>
<codeline lineno="1541"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1542"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_stc_pdstack_context_t<sp/>*ptrPdStackContext<sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a34f18ac1a604068a73e013c483d55104" kindref="member">pdStackContext</ref>;</highlight></codeline>
<codeline lineno="1543"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_stc_pdstack_dpm_pd_cmd_buf_t<sp/><sp/>dpm_cmd_param;</highlight></codeline>
<codeline lineno="1544"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_en_pdstack_status_t<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>api_stat;</highlight></codeline>
<codeline lineno="1545"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stat<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1546"><highlight class="normal"></highlight></codeline>
<codeline lineno="1547"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(ptrPdStackContext-&gt;dpmConfig.vconnLogical<sp/>==<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1548"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1549"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Disable<sp/>automatic<sp/>VConn<sp/>Swap<sp/>from<sp/>the<sp/>Policy<sp/>Engine<sp/>at<sp/>this<sp/>stage.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1550"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(void)Cy_PdStack_Dpm_UpdateAutoVcsEnable(ptrPdStackContext,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1551"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(void)Cy_PdStack_Dpm_UpdateVconnRetain(ptrPdStackContext,<sp/>1u);</highlight></codeline>
<codeline lineno="1552"><highlight class="normal"></highlight></codeline>
<codeline lineno="1553"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1ab8c2f329d9d1b6d732b553eb0072f601" kindref="member">vdmVcsRqtState</ref><sp/>&lt;=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ggaa31ccb72f7bd9114cb70754d774959b3a5074aa2a2f0d7b9f1ded34b918752d87" kindref="member">CY_PDALTMODE_VCONN_RQT_ONGOING</ref>)</highlight></codeline>
<codeline lineno="1554"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1555"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>VDM<sp/>sequence<sp/>needs<sp/>to<sp/>be<sp/>delayed<sp/>because<sp/>VConn<sp/>Swap<sp/>needs<sp/>to<sp/>be<sp/>done.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1556"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stat<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1557"><highlight class="normal"></highlight></codeline>
<codeline lineno="1558"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1ab8c2f329d9d1b6d732b553eb0072f601" kindref="member">vdmVcsRqtState</ref><sp/>!=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ggaa31ccb72f7bd9114cb70754d774959b3a5074aa2a2f0d7b9f1ded34b918752d87" kindref="member">CY_PDALTMODE_VCONN_RQT_ONGOING</ref>)</highlight></codeline>
<codeline lineno="1559"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1560"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>CY_PD_DP_VCONN_SWAP_FEATURE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1561"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint8_t<sp/>faultStatus<sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1aba3f2832d6acbf0f5c866d67f8e0090b" kindref="member">appStatusContext</ref>-&gt;faultStatus;</highlight></codeline>
<codeline lineno="1562"><highlight class="normal"></highlight></codeline>
<codeline lineno="1563"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight></codeline>
<codeline lineno="1564"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(!Cy_USBPD_V5V_IsSupplyOn(ptrPdStackContext-&gt;ptrUsbPdContext))<sp/>||</highlight></codeline>
<codeline lineno="1565"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((faultStatus<sp/>&amp;<sp/><ref refid="group__group__pdaltmode__common__macros_1gaee7f2a6d6cb94b4729a9ddfb53f2aa72" kindref="member">CY_PDALTMODE_FAULT_APP_PORT_VCONN_FAULT_ACTIVE</ref>)<sp/>!=<sp/>0U)</highlight></codeline>
<codeline lineno="1566"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="1567"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1568"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Skip<sp/>the<sp/>VConn<sp/>Swap<sp/>sequence<sp/>if<sp/>V5V<sp/>is<sp/>not<sp/>up<sp/>or<sp/>if<sp/>there<sp/>is<sp/>VConn<sp/>OCP<sp/>fault<sp/>status.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1569"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1ab8c2f329d9d1b6d732b553eb0072f601" kindref="member">vdmVcsRqtState</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ggaa31ccb72f7bd9114cb70754d774959b3a57e829a97291052df3c78d859b9cd38d" kindref="member">CY_PDALTMODE_VCONN_RQT_FAILED</ref>;</highlight></codeline>
<codeline lineno="1570"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stat<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1571"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1572"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1573"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>CY_PD_DP_VCONN_SWAP_FEATURE<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1574"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1575"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dpm_cmd_param.cmdSop<sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>CY_PD_SOP;</highlight></codeline>
<codeline lineno="1576"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dpm_cmd_param.noOfCmdDo<sp/><sp/><sp/>=<sp/>0u;</highlight></codeline>
<codeline lineno="1577"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dpm_cmd_param.datPtr<sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="1578"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dpm_cmd_param.timeout<sp/><sp/><sp/><sp/><sp/>=<sp/>ptrPdStackContext-&gt;senderRspTimeout;</highlight></codeline>
<codeline lineno="1579"><highlight class="normal"></highlight></codeline>
<codeline lineno="1580"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>api_stat<sp/>=<sp/>PDSTACK_CALL_MAP(Cy_PdStack_Dpm_SendPdCommand)(ptrPdStackContext,<sp/>CY_PDSTACK_DPM_CMD_SEND_VCONN_SWAP,<sp/>&amp;dpm_cmd_param,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga26476af05a71c4ba1a24b398df0c10cf" kindref="member">Cy_PdAltMode_VdmTask_VconnSwapCb</ref>));</highlight></codeline>
<codeline lineno="1581"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(api_stat<sp/>!=<sp/>CY_PDSTACK_STAT_SUCCESS)</highlight></codeline>
<codeline lineno="1582"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1583"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1ab8c2f329d9d1b6d732b553eb0072f601" kindref="member">vdmVcsRqtState</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ggaa31ccb72f7bd9114cb70754d774959b3ae721466cb519275856f67c47ce698fc4" kindref="member">CY_PDALTMODE_VCONN_RQT_PENDING</ref>;</highlight></codeline>
<codeline lineno="1584"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1585"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1586"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1587"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Clear<sp/>the<sp/>emca_present<sp/>flag<sp/>for<sp/>the<sp/>port<sp/>so<sp/>that<sp/>the<sp/>cable<sp/>state<sp/>machine<sp/>will<sp/>start</highlight></codeline>
<codeline lineno="1588"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>from<sp/>the<sp/>beginning.</highlight></codeline>
<codeline lineno="1589"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1590"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrPdStackContext-&gt;dpmConfig.emcaPresent<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1591"><highlight class="normal"></highlight></codeline>
<codeline lineno="1592"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1ab8c2f329d9d1b6d732b553eb0072f601" kindref="member">vdmVcsRqtState</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ggaa31ccb72f7bd9114cb70754d774959b3a5074aa2a2f0d7b9f1ded34b918752d87" kindref="member">CY_PDALTMODE_VCONN_RQT_ONGOING</ref>;</highlight></codeline>
<codeline lineno="1593"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1594"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1595"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1596"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1597"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1598"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1599"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1600"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1ab8c2f329d9d1b6d732b553eb0072f601" kindref="member">vdmVcsRqtState</ref><sp/>!=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ggaa31ccb72f7bd9114cb70754d774959b3a5074aa2a2f0d7b9f1ded34b918752d87" kindref="member">CY_PDALTMODE_VCONN_RQT_ONGOING</ref>)</highlight></codeline>
<codeline lineno="1601"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1602"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1ab8c2f329d9d1b6d732b553eb0072f601" kindref="member">vdmVcsRqtState</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ggaa31ccb72f7bd9114cb70754d774959b3a80d5724dcb75f4e86ddb2fe2c72b43b9" kindref="member">CY_PDALTMODE_VCONN_RQT_INACTIVE</ref>;</highlight></codeline>
<codeline lineno="1603"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a72e22b01318f07884cf6d4aad92b8490" kindref="member">vdmVcsRqtCount</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1604"><highlight class="normal"></highlight></codeline>
<codeline lineno="1605"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!ptrPdStackContext-&gt;ptrAppCbk-&gt;vconn_is_present(ptrPdStackContext))</highlight></codeline>
<codeline lineno="1606"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1607"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Make<sp/>sure<sp/>VConn<sp/>is<sp/>enabled<sp/>and<sp/>sufficient<sp/>delay<sp/>is<sp/>provided<sp/>for<sp/>the<sp/>cable<sp/>to<sp/>power<sp/>up.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1608"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrPdStackContext-&gt;ptrAppCbk-&gt;vconn_enable<sp/>(ptrPdStackContext,<sp/>ptrPdStackContext-&gt;dpmConfig.revPol))</highlight></codeline>
<codeline lineno="1609"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1610"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(void)TIMER_CALL_MAP(Cy_PdUtils_SwTimer_StartWocb)(ptrPdStackContext-&gt;ptrTimerContext,</highlight></codeline>
<codeline lineno="1611"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>CY_PDALTMODE_GET_TIMER_ID(ptrPdStackContext,<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga8ce268202ee29df67f500d14a1273881a49535375901fa7e1420cd491a8cf4b3e" kindref="member">CY_PDALTMODE_VDM_BUSY_TIMER</ref>),<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a2083b9e4f1976568c605c50a24a67d18" kindref="member">appCblStartDelay</ref>);</highlight></codeline>
<codeline lineno="1612"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stat<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1613"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1614"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1615"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1616"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1617"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1618"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>In<sp/>case<sp/>cable<sp/>discovery<sp/>is<sp/>pending,<sp/>wait<sp/>for<sp/>it.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1619"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stat<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1620"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1621"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1622"><highlight class="normal"></highlight></codeline>
<codeline lineno="1623"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>stat;</highlight></codeline>
<codeline lineno="1624"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1625"><highlight class="normal"></highlight></codeline>
<codeline lineno="1626"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gac349e23243b9520256eb7a92028c786e" kindref="member">Cy_PdAltMode_VdmTask_UpdateVcsStatus</ref>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext)</highlight></codeline>
<codeline lineno="1627"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1628"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1ab8c2f329d9d1b6d732b553eb0072f601" kindref="member">vdmVcsRqtState</ref><sp/>==<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ggaa31ccb72f7bd9114cb70754d774959b3a5074aa2a2f0d7b9f1ded34b918752d87" kindref="member">CY_PDALTMODE_VCONN_RQT_ONGOING</ref>)</highlight></codeline>
<codeline lineno="1629"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1630"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1ab8c2f329d9d1b6d732b553eb0072f601" kindref="member">vdmVcsRqtState</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ggaa31ccb72f7bd9114cb70754d774959b3a80d5724dcb75f4e86ddb2fe2c72b43b9" kindref="member">CY_PDALTMODE_VCONN_RQT_INACTIVE</ref>;</highlight></codeline>
<codeline lineno="1631"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1632"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1633"><highlight class="normal"></highlight></codeline>
<codeline lineno="1634"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Fill<sp/>DPM<sp/>cmd<sp/>buffer<sp/>with<sp/>proper<sp/>VDM<sp/>info<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1635"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/>uint8_t<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga09c839b7b5f0abd38fca51951d82d766" kindref="member">Cy_PdAltMode_VdmTask_ComposeVdm</ref>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext)</highlight></codeline>
<codeline lineno="1636"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1637"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_stc_pdstack_context_t<sp/>*ptrPdStackContext<sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a34f18ac1a604068a73e013c483d55104" kindref="member">pdStackContext</ref>;</highlight></codeline>
<codeline lineno="1638"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_stc_pd_dpm_config_t*<sp/>ptrDpmConfig<sp/>=<sp/>&amp;(ptrPdStackContext-&gt;dpmConfig);</highlight></codeline>
<codeline lineno="1639"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>idx;</highlight></codeline>
<codeline lineno="1640"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_stc_pdstack_dpm_pd_cmd_buf_t<sp/><sp/>*vdmBuf<sp/>=<sp/>&amp;ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a64b83390d1e5bb109789b5f261897199" kindref="member">altModeMngrStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__alt__mode__mngr__status__t_1a380ad5e3a08567c4b6ca68ad50cfab91" kindref="member">vdmBuf</ref>;</highlight></codeline>
<codeline lineno="1641"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structcy__stc__pdaltmode__vdm__msg__info__t" kindref="compound">cy_stc_pdaltmode_vdm_msg_info_t</ref><sp/><sp/><sp/><sp/>*msgP<sp/><sp/><sp/>=<sp/>&amp;ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1ae35514d1f3ab5b9c3e9a3b467934ed08" kindref="member">vdmMsg</ref>;</highlight></codeline>
<codeline lineno="1642"><highlight class="normal"></highlight></codeline>
<codeline lineno="1643"><highlight class="normal"><sp/><sp/><sp/><sp/>vdmBuf-&gt;cmdSop<sp/>=<sp/>(cy_en_pd_sop_t)<sp/>msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a6d0df2c229bd3ab17d8b8332b3da6d37" kindref="member">sopType</ref>;</highlight></codeline>
<codeline lineno="1644"><highlight class="normal"><sp/><sp/><sp/><sp/>vdmBuf-&gt;noOfCmdDo<sp/>=<sp/>msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1ae865fc2b1c65b511f72dc31f4d1e77fa" kindref="member">vdoNumb</ref><sp/>+<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__macros_1gae4e2aa15a2cf04e0d55157a9d86b51bd" kindref="member">CY_PDALTMODE_MNGR_VDO_START_IDX</ref>;</highlight></codeline>
<codeline lineno="1645"><highlight class="normal"><sp/><sp/><sp/><sp/>vdmBuf-&gt;cmdDo[CY_PD_VDM_HEADER_IDX]<sp/>=<sp/>msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a450b366ec51f4b9bb3dc3c9ea22997c9" kindref="member">vdmHeader</ref>;</highlight></codeline>
<codeline lineno="1646"><highlight class="normal"></highlight></codeline>
<codeline lineno="1647"><highlight class="normal"><sp/><sp/><sp/><sp/>if<sp/>(msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a450b366ec51f4b9bb3dc3c9ea22997c9" kindref="member">vdmHeader</ref>.std_vdm_hdr.vdmType<sp/>==<sp/>(uint32_t)CY_PDSTACK_VDM_TYPE_STRUCTURED)</highlight></codeline>
<codeline lineno="1648"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1649"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a450b366ec51f4b9bb3dc3c9ea22997c9" kindref="member">vdmHeader</ref>.std_vdm_hdr.cmdType<sp/>=<sp/>(uint32_t)CY_PDSTACK_CMD_TYPE_INITIATOR;</highlight></codeline>
<codeline lineno="1650"><highlight class="normal"></highlight></codeline>
<codeline lineno="1651"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(vdmBuf-&gt;cmdSop<sp/>==<sp/>CY_PD_SOP)</highlight></codeline>
<codeline lineno="1652"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1653"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>vdmBuf-&gt;cmdDo[CY_PD_VDM_HEADER_IDX].std_vdm_hdr.stVer<sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1aba3f2832d6acbf0f5c866d67f8e0090b" kindref="member">appStatusContext</ref>-&gt;vdmVersion;</highlight></codeline>
<codeline lineno="1654"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>vdmBuf-&gt;cmdDo[CY_PD_VDM_HEADER_IDX].std_vdm_hdr.stMinVer<sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1aba3f2832d6acbf0f5c866d67f8e0090b" kindref="member">appStatusContext</ref>-&gt;vdmMinorVersion;</highlight></codeline>
<codeline lineno="1655"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1656"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1657"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1658"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>vdmBuf-&gt;cmdDo[CY_PD_VDM_HEADER_IDX].std_vdm_hdr.stVer<sp/>=<sp/>(uint32_t)ptrPdStackContext-&gt;dpmStat.cblVdmVersion;</highlight></codeline>
<codeline lineno="1659"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>vdmBuf-&gt;cmdDo[CY_PD_VDM_HEADER_IDX].std_vdm_hdr.stMinVer<sp/>=<sp/>(uint32_t)ptrPdStackContext-&gt;cblVdmMinVersion;</highlight></codeline>
<codeline lineno="1660"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1661"><highlight class="normal"></highlight></codeline>
<codeline lineno="1662"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Downgrade<sp/>SOP/cable<sp/>VMD<sp/>version<sp/>in<sp/>case<sp/>PD<sp/>spec<sp/>revision<sp/>is<sp/>2.0<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1663"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight></codeline>
<codeline lineno="1664"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrDpmConfig-&gt;specRevSopLive<sp/>==<sp/>CY_PD_REV2)<sp/>||</highlight></codeline>
<codeline lineno="1665"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((vdmBuf-&gt;cmdSop<sp/>!=<sp/>CY_PD_SOP)<sp/>&amp;&amp;<sp/>(ptrPdStackContext-&gt;dpmStat.specRevSopPrimeLive<sp/><sp/>==<sp/>CY_PD_REV2))</highlight></codeline>
<codeline lineno="1666"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="1667"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1668"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>vdmBuf-&gt;cmdDo[CY_PD_VDM_HEADER_IDX].std_vdm_hdr.stVer<sp/>=<sp/>(uint32_t)CY_PDSTACK_STD_VDM_VER1;</highlight></codeline>
<codeline lineno="1669"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>vdmBuf-&gt;cmdDo[CY_PD_VDM_HEADER_IDX].std_vdm_hdr.stMinVer<sp/>=<sp/>(uint32_t)CY_PDSTACK_STD_VDM_MINOR_VER0;</highlight></codeline>
<codeline lineno="1670"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1671"><highlight class="normal"></highlight></codeline>
<codeline lineno="1672"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>exceptions<sp/>for<sp/>Enter/Exit<sp/>mode<sp/>cmd<sp/>period<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1673"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a450b366ec51f4b9bb3dc3c9ea22997c9" kindref="member">vdmHeader</ref>.std_vdm_hdr.cmd)</highlight></codeline>
<codeline lineno="1674"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1675"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>(uint32_t)CY_PDSTACK_VDM_CMD_ENTER_MODE:</highlight></codeline>
<codeline lineno="1676"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>vdmBuf-&gt;timeout<sp/>=<sp/>CY_PD_VDM_ENTER_MODE_RESPONSE_TIMER_PERIOD;</highlight></codeline>
<codeline lineno="1677"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1678"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>(uint32_t)CY_PDSTACK_VDM_CMD_EXIT_MODE:</highlight></codeline>
<codeline lineno="1679"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>vdmBuf-&gt;timeout<sp/>=<sp/>CY_PD_VDM_EXIT_MODE_RESPONSE_TIMER_PERIOD;</highlight></codeline>
<codeline lineno="1680"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1681"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>(uint32_t)CY_PDSTACK_VDM_CMD_ATTENTION:</highlight></codeline>
<codeline lineno="1682"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>No<sp/>timeout<sp/>required<sp/>for<sp/>attention<sp/>messages<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1683"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>vdmBuf-&gt;timeout<sp/>=<sp/><ref refid="group__group__pdaltmode__common__macros_1ga2cb7840adbf420357dfbb997f0f2b3a3" kindref="member">CY_PDALTMODE_MNGR_NO_DATA</ref>;</highlight></codeline>
<codeline lineno="1684"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1685"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1686"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>vdmBuf-&gt;timeout<sp/>=<sp/>CY_PD_VDM_RESPONSE_TIMER_PERIOD;</highlight></codeline>
<codeline lineno="1687"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1688"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1689"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1690"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Handle<sp/>UVDM<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1691"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1692"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1693"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>vdmBuf-&gt;timeout<sp/>=<sp/>CY_PD_VDM_RESPONSE_TIMER_PERIOD;</highlight></codeline>
<codeline lineno="1694"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1695"><highlight class="normal"></highlight></codeline>
<codeline lineno="1696"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Copy<sp/>VDOs<sp/>to<sp/>send<sp/>buffer<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1697"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1ae865fc2b1c65b511f72dc31f4d1e77fa" kindref="member">vdoNumb</ref><sp/>&gt;<sp/><ref refid="group__group__pdaltmode__common__macros_1ga2cb7840adbf420357dfbb997f0f2b3a3" kindref="member">CY_PDALTMODE_MNGR_NO_DATA</ref>)</highlight></codeline>
<codeline lineno="1698"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1699"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(idx<sp/>=<sp/>0;<sp/>idx<sp/>&lt;<sp/>msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1ae865fc2b1c65b511f72dc31f4d1e77fa" kindref="member">vdoNumb</ref>;<sp/>idx++)</highlight></codeline>
<codeline lineno="1700"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1701"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>vdmBuf-&gt;cmdDo[idx<sp/>+<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__macros_1gae4e2aa15a2cf04e0d55157a9d86b51bd" kindref="member">CY_PDALTMODE_MNGR_VDO_START_IDX</ref>].val<sp/>=<sp/>msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a96568aa7466ed90908c4fc903678f203" kindref="member">vdo</ref>[idx].val;</highlight></codeline>
<codeline lineno="1702"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1703"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1704"><highlight class="normal"></highlight></codeline>
<codeline lineno="1705"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0x01U;</highlight></codeline>
<codeline lineno="1706"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1707"><highlight class="normal"></highlight></codeline>
<codeline lineno="1708"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Parse<sp/>received<sp/>VDM<sp/>and<sp/>save<sp/>info<sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1709"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/>uint8_t<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga3aafda05df05c9c09fb60dc5380451b5" kindref="member">Cy_PdAltMode_VdmTask_ParseVdm</ref>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>cy_stc_pdstack_pd_packet_t*<sp/>recVdm)</highlight></codeline>
<codeline lineno="1710"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1711"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>vdoIdx;</highlight></codeline>
<codeline lineno="1712"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structcy__stc__pdaltmode__vdm__msg__info__t" kindref="compound">cy_stc_pdaltmode_vdm_msg_info_t</ref><sp/>*msgP<sp/><sp/>=<sp/>&amp;ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1ae35514d1f3ab5b9c3e9a3b467934ed08" kindref="member">vdmMsg</ref>;</highlight></codeline>
<codeline lineno="1713"><highlight class="normal"></highlight></codeline>
<codeline lineno="1714"><highlight class="normal"><sp/><sp/><sp/><sp/>msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a450b366ec51f4b9bb3dc3c9ea22997c9" kindref="member">vdmHeader</ref><sp/>=<sp/>recVdm-&gt;dat[CY_PD_VDM_HEADER_IDX];</highlight></codeline>
<codeline lineno="1715"><highlight class="normal"><sp/><sp/><sp/><sp/>msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1ae865fc2b1c65b511f72dc31f4d1e77fa" kindref="member">vdoNumb</ref><sp/>=<sp/>(recVdm-&gt;len<sp/>-<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__macros_1gae4e2aa15a2cf04e0d55157a9d86b51bd" kindref="member">CY_PDALTMODE_MNGR_VDO_START_IDX</ref>);</highlight></codeline>
<codeline lineno="1716"><highlight class="normal"><sp/><sp/><sp/><sp/>msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a6d0df2c229bd3ab17d8b8332b3da6d37" kindref="member">sopType</ref><sp/>=<sp/>(uint8_t)recVdm-&gt;sop;</highlight></codeline>
<codeline lineno="1717"><highlight class="normal"></highlight></codeline>
<codeline lineno="1718"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>VDO<sp/>is<sp/>present<sp/>in<sp/>received<sp/>VDM<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1719"><highlight class="normal"><sp/><sp/><sp/><sp/>if<sp/>(recVdm-&gt;len<sp/>&gt;<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__macros_1gae4e2aa15a2cf04e0d55157a9d86b51bd" kindref="member">CY_PDALTMODE_MNGR_VDO_START_IDX</ref>)</highlight></codeline>
<codeline lineno="1720"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1721"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(vdoIdx<sp/>=<sp/>0;<sp/>vdoIdx<sp/>&lt;<sp/>recVdm-&gt;len;<sp/>vdoIdx++)</highlight></codeline>
<codeline lineno="1722"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1723"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a96568aa7466ed90908c4fc903678f203" kindref="member">vdo</ref>[vdoIdx].val<sp/>=<sp/>recVdm-&gt;dat[vdoIdx<sp/>+<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__macros_1gae4e2aa15a2cf04e0d55157a9d86b51bd" kindref="member">CY_PDALTMODE_MNGR_VDO_START_IDX</ref>].val;</highlight></codeline>
<codeline lineno="1724"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1725"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1726"><highlight class="normal"></highlight></codeline>
<codeline lineno="1727"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0x01U;</highlight></codeline>
<codeline lineno="1728"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1729"><highlight class="normal"></highlight></codeline>
<codeline lineno="1730"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga399c1777f494368601cad31a40afca9c" kindref="member">cy_en_pdaltmode_vdm_task_t</ref><sp/>Cy_PdAltMode_VdmTask_SendVdm(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext)</highlight></codeline>
<codeline lineno="1731"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1732"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_stc_pdstack_context_t<sp/>*ptrPdStackContext<sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a34f18ac1a604068a73e013c483d55104" kindref="member">pdStackContext</ref>;</highlight></codeline>
<codeline lineno="1733"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_en_pd_sop_t<sp/>pkt_type<sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a64b83390d1e5bb109789b5f261897199" kindref="member">altModeMngrStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__alt__mode__mngr__status__t_1a380ad5e3a08567c4b6ca68ad50cfab91" kindref="member">vdmBuf</ref>.cmdSop;</highlight></codeline>
<codeline lineno="1734"><highlight class="normal"></highlight></codeline>
<codeline lineno="1735"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">((ptrPdStackContext-&gt;dpmConfig.curPortType<sp/>==<sp/>CY_PD_PRT_TYPE_DFP)<sp/>&amp;&amp;<sp/>(ptrPdStackContext-&gt;dpmConfig.attach<sp/>!=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="1736"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1737"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pkt_type<sp/>!=<sp/>CY_PD_SOP)</highlight></codeline>
<codeline lineno="1738"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1739"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>VConn<sp/>Swap<sp/>and<sp/>cable<sp/>discovery<sp/>are<sp/>pending,<sp/>wait<sp/>for<sp/>those<sp/>steps.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1740"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gad52bc510f0fb304eaed0ed9cd6177173" kindref="member">Cy_PdAltMode_VdmTask_InitiateVcsCblDiscovery</ref><sp/>(ptrAltModeContext))</highlight></codeline>
<codeline lineno="1741"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1742"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca975ad4fb2e6c7feb0cb1127be8325e3c" kindref="member">CY_PDALTMODE_VDM_TASK_SEND_MSG</ref>;</highlight></codeline>
<codeline lineno="1743"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1744"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1745"><highlight class="normal"></highlight></codeline>
<codeline lineno="1746"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pkt_type<sp/>==<sp/>CY_PD_SOP_DPRIME)</highlight></codeline>
<codeline lineno="1747"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1748"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>CY_MISRA_DEVIATE_BLOCK_START(</highlight><highlight class="stringliteral">&apos;MISRA<sp/>C-2012<sp/>Rule<sp/>16.1&apos;</highlight><highlight class="normal">,<sp/>1,<sp/></highlight><highlight class="stringliteral">&apos;Intentional<sp/>return<sp/>used<sp/>instead<sp/>of<sp/>breaks<sp/>in<sp/>switch<sp/>clause&apos;</highlight><highlight class="normal">);<sp/></highlight></codeline>
<codeline lineno="1749"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>CY_MISRA_DEVIATE_BLOCK_START(</highlight><highlight class="stringliteral">&apos;MISRA<sp/>C-2012<sp/>Rule<sp/>16.3&apos;</highlight><highlight class="normal">,<sp/>1,<sp/></highlight><highlight class="stringliteral">&apos;Intentional<sp/>return<sp/>used<sp/>instead<sp/>of<sp/>breaks<sp/>in<sp/>switch<sp/>clause&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1750"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>CY_MISRA_DEVIATE_BLOCK_START(</highlight><highlight class="stringliteral">&apos;MISRA<sp/>C-2012<sp/>Rule<sp/>16.6&apos;</highlight><highlight class="normal">,<sp/>1,<sp/></highlight><highlight class="stringliteral">&apos;Intentional<sp/>return<sp/>used<sp/>instead<sp/>of<sp/>breaks<sp/>in<sp/>switch<sp/>clause&apos;</highlight><highlight class="normal">);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="1751"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a3df87d55e5b872a87e857e8dfddf8f1a" kindref="member">vdmEmcaRstState</ref>)</highlight></codeline>
<codeline lineno="1752"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1753"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>SOP&apos;&apos;<sp/>SOFT<sp/>RESET<sp/>has<sp/>not<sp/>been<sp/>done<sp/>or<sp/>a<sp/>retry<sp/>is<sp/>pending,<sp/>try<sp/>to<sp/>send<sp/>it.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1754"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ggaa7da3e23558bed3d229bdad5c90401a1a7c86f482fd163d4cd731179fd325725f" kindref="member">CY_PDALTMODE_CABLE_DP_RESET_IDLE</ref>:</highlight></codeline>
<codeline lineno="1755"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ggaa7da3e23558bed3d229bdad5c90401a1ab7dc624daffc9a03c4d9cb9995716fe4" kindref="member">CY_PDALTMODE_CABLE_DP_RESET_RETRY</ref>:</highlight></codeline>
<codeline lineno="1756"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gae9131b85b5acc6edad37ef4a67969536" kindref="member">Cy_PdAltMode_VdmTask_SendSopDpSoftReset</ref>)(ptrAltModeContext);</highlight></codeline>
<codeline lineno="1757"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca975ad4fb2e6c7feb0cb1127be8325e3c" kindref="member">CY_PDALTMODE_VDM_TASK_SEND_MSG</ref>;</highlight></codeline>
<codeline lineno="1758"><highlight class="normal"></highlight></codeline>
<codeline lineno="1759"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ggaa7da3e23558bed3d229bdad5c90401a1a17ac0ad683cafdf10364fef4a64f4a67" kindref="member">CY_PDALTMODE_CABLE_DP_RESET_WAIT</ref>:</highlight></codeline>
<codeline lineno="1760"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca975ad4fb2e6c7feb0cb1127be8325e3c" kindref="member">CY_PDALTMODE_VDM_TASK_SEND_MSG</ref>;</highlight></codeline>
<codeline lineno="1761"><highlight class="normal"></highlight></codeline>
<codeline lineno="1762"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ggaa7da3e23558bed3d229bdad5c90401a1aad77bde21fa638472cf2590eead3d21b" kindref="member">CY_PDALTMODE_CABLE_DP_RESET_DONE</ref>:</highlight></codeline>
<codeline lineno="1763"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1ac11ac509c77e1c62758b13ca2de1e50d" kindref="member">cblRstDone</ref><sp/>!=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1764"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1765"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Send<sp/>SOP<sp/>Prime<sp/>VDM<sp/>again<sp/>after<sp/>cable<sp/>reset<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1766"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1ae35514d1f3ab5b9c3e9a3b467934ed08" kindref="member">vdmMsg</ref>.<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a6d0df2c229bd3ab17d8b8332b3da6d37" kindref="member">sopType</ref><sp/>=<sp/>(uint8_t)CY_PD_SOP_PRIME;</highlight></codeline>
<codeline lineno="1767"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a3df87d55e5b872a87e857e8dfddf8f1a" kindref="member">vdmEmcaRstState</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ggaa7da3e23558bed3d229bdad5c90401a1ac7731bfe31a9ba5c237e27d08782678a" kindref="member">CY_PDALTMODE_CABLE_DP_RESET_SEND_SPRIME</ref>;</highlight></codeline>
<codeline lineno="1768"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca975ad4fb2e6c7feb0cb1127be8325e3c" kindref="member">CY_PDALTMODE_VDM_TASK_SEND_MSG</ref>;</highlight></codeline>
<codeline lineno="1769"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1770"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1771"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1772"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1773"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1774"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1775"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>EMCA<sp/>SOFT_RESET<sp/>done;<sp/>can<sp/>proceed.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1776"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1777"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1778"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>CY_MISRA_BLOCK_END(</highlight><highlight class="stringliteral">&apos;MISRA<sp/>C-2012<sp/>Rule<sp/>16.6&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1779"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>CY_MISRA_BLOCK_END(</highlight><highlight class="stringliteral">&apos;MISRA<sp/>C-2012<sp/>Rule<sp/>16.3&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1780"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>CY_MISRA_BLOCK_END(</highlight><highlight class="stringliteral">&apos;MISRA<sp/>C-2012<sp/>Rule<sp/>16.1&apos;</highlight><highlight class="normal">);<sp/></highlight></codeline>
<codeline lineno="1781"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1782"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1783"><highlight class="normal"></highlight></codeline>
<codeline lineno="1784"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1a4e0c66d4b15d62d6fcec367b2a459dfe" kindref="member">vdmRetryPending</ref><sp/>=<sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a4b36298faf799e5e6e8af46058c05ab8" kindref="member">recRetryCnt</ref><sp/>!=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__macros_1gace9facd57c1e45b998eab65879e7b0bf" kindref="member">CY_PDALTMODE_MNGR_MAX_RETRY_CNT</ref>);</highlight></codeline>
<codeline lineno="1785"><highlight class="normal"></highlight></codeline>
<codeline lineno="1786"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(PDSTACK_CALL_MAP(Cy_PdStack_Dpm_SendPdCommand)(ptrPdStackContext,<sp/>CY_PDSTACK_DPM_CMD_SEND_VDM,</highlight></codeline>
<codeline lineno="1787"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a64b83390d1e5bb109789b5f261897199" kindref="member">altModeMngrStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__alt__mode__mngr__status__t_1a380ad5e3a08567c4b6ca68ad50cfab91" kindref="member">vdmBuf</ref>,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/>Cy_PdAltMode_VdmTask_RecCbk)<sp/>==<sp/>CY_PDSTACK_STAT_SUCCESS)</highlight></codeline>
<codeline lineno="1788"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1789"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9cafdaff6d78ac13c01c80024f4d1c0d1f1" kindref="member">CY_PDALTMODE_VDM_TASK_WAIT</ref>;</highlight></codeline>
<codeline lineno="1790"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1791"><highlight class="normal"></highlight></codeline>
<codeline lineno="1792"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>it<sp/>fails<sp/>-<sp/>try<sp/>to<sp/>send<sp/>VDM<sp/>again<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1793"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca975ad4fb2e6c7feb0cb1127be8325e3c" kindref="member">CY_PDALTMODE_VDM_TASK_SEND_MSG</ref>;</highlight></codeline>
<codeline lineno="1794"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1795"><highlight class="normal"></highlight></codeline>
<codeline lineno="1796"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gaec4bc9a6a0607ac64da5ebef65588794" kindref="member">Cy_PdAltMode_VdmTask_IsUfpDiscStarted</ref>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext)</highlight></codeline>
<codeline lineno="1797"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1798"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga5be3659995fa9a8bba055bd160b2ec41" kindref="member">Cy_PdAltMode_VdmTask_IsIdle</ref>)(ptrAltModeContext))</highlight></codeline>
<codeline lineno="1799"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1800"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>VDM<sp/>task<sp/>to<sp/>send<sp/>Disc<sp/>ID<sp/>VDM<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1801"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1acb352c125c763362864a110417fee400" kindref="member">vdmTask</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca03c528225df3dee5ac1e98b1e77a1ec9" kindref="member">CY_PDALTMODE_VDM_TASK_DISC_ID</ref>;</highlight></codeline>
<codeline lineno="1802"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a7e69c43b3b2dd3eed1c6932869deb63d" kindref="member">vdmEvt</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga53976be265d41463919b3ea93da4cf30abd914a67376582616bd3cd1949b105ca" kindref="member">CY_PDALTMODE_VDM_EVT_RUN</ref>;</highlight></codeline>
<codeline lineno="1803"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1804"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1805"><highlight class="normal"></highlight></codeline>
<codeline lineno="1806"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1807"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1808"><highlight class="normal"></highlight></codeline>
<codeline lineno="1809"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gaa71916055124aa60a49960cea3054b0d" kindref="member">Cy_PdAltMode_VdmTask_ResetDiscInfo</ref><sp/>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext)</highlight></codeline>
<codeline lineno="1810"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1811"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1a0ac810708362696618c082ab1cb88128" kindref="member">tbtCblVdo</ref>.val<sp/><sp/>=<sp/><ref refid="group__group__pdaltmode__common__macros_1ga2cb7840adbf420357dfbb997f0f2b3a3" kindref="member">CY_PDALTMODE_MNGR_NO_DATA</ref>;</highlight></codeline>
<codeline lineno="1812"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1ad2c9e4c2e2824053073682a6ad08e593" kindref="member">tbtModeVdo</ref>.val<sp/>=<sp/><ref refid="group__group__pdaltmode__common__macros_1ga2cb7840adbf420357dfbb997f0f2b3a3" kindref="member">CY_PDALTMODE_MNGR_NO_DATA</ref>;</highlight></codeline>
<codeline lineno="1813"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1a5b8371416b56b234ee490a960c427f50" kindref="member">dpCblVdo</ref>.val<sp/><sp/><sp/>=<sp/><ref refid="group__group__pdaltmode__common__macros_1ga2cb7840adbf420357dfbb997f0f2b3a3" kindref="member">CY_PDALTMODE_MNGR_NO_DATA</ref>;</highlight></codeline>
<codeline lineno="1814"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1815"><highlight class="normal"></highlight></codeline>
<codeline lineno="1816"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gaa44f036b49866624543971b758bea3e7" kindref="member">Cy_PdAltMode_VdmTask_ClearDiscResp</ref>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext)</highlight></codeline>
<codeline lineno="1817"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1818"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a1652190ae69a5c1962e2177a8a649a5e" kindref="member">vdmDiscIdRespLen</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1819"><highlight class="normal"><sp/><sp/><sp/><sp/>UTILS_CALL_MAP(Cy_PdUtils_MemSet)<sp/>((uint8_t<sp/>*)&amp;ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1af22f79436ac72845753147a1dd976224" kindref="member">vdmDiscIdResp</ref>,<sp/>0u,<sp/>CY_PD_MAX_NO_OF_DO<sp/>*<sp/>sizeof<sp/>(uint32_t));</highlight></codeline>
<codeline lineno="1820"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1afb2bc35e49841dc30669c91ff27ad5c7" kindref="member">vdmDiscSvidRespLen</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1821"><highlight class="normal"><sp/><sp/><sp/><sp/>UTILS_CALL_MAP(Cy_PdUtils_MemSet)<sp/>((uint8_t<sp/>*)&amp;ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a1f056c297695b7e3e729311aba3fa5bb" kindref="member">vdmDiscSvidResp</ref>,<sp/>0u,<sp/><ref refid="group__group__pdaltmode__common__macros_1ga0828b64a6529f5b237cf417395253510" kindref="member">CY_PDALTMODE_MAX_DISC_SVID_RESP_LEN</ref><sp/>*<sp/>sizeof<sp/>(uint32_t));</highlight></codeline>
<codeline lineno="1822"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1823"><highlight class="normal"></highlight></codeline>
<codeline lineno="1824"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/>uint8_t<sp/>*<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga5861bb3fd3515f0c1accdfa8b1ef054d" kindref="member">Cy_PdAltMode_VdmTask_GetStoredDiscResp</ref>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>is_disc_id,<sp/>uint8_t<sp/>*respLenP)</highlight></codeline>
<codeline lineno="1825"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1826"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>*ptr<sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="1827"><highlight class="normal"></highlight></codeline>
<codeline lineno="1828"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>for<sp/>bad<sp/>pointer<sp/>argument<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1829"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(respLenP<sp/>==<sp/>NULL)</highlight></codeline>
<codeline lineno="1830"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1831"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="1832"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1833"><highlight class="normal"></highlight></codeline>
<codeline lineno="1834"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>response<sp/>length<sp/>to<sp/>zero<sp/>by<sp/>default<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1835"><highlight class="normal"><sp/><sp/><sp/><sp/>*respLenP<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1836"><highlight class="normal"></highlight></codeline>
<codeline lineno="1837"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a34f18ac1a604068a73e013c483d55104" kindref="member">pdStackContext</ref>-&gt;dpmConfig.curPortType<sp/>==<sp/>CY_PD_PRT_TYPE_DFP)</highlight></codeline>
<codeline lineno="1838"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1839"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(is_disc_id)</highlight></codeline>
<codeline lineno="1840"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1841"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*respLenP<sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a1652190ae69a5c1962e2177a8a649a5e" kindref="member">vdmDiscIdRespLen</ref>;</highlight></codeline>
<codeline lineno="1842"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptr<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>(uint8_t<sp/>*)ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1af22f79436ac72845753147a1dd976224" kindref="member">vdmDiscIdResp</ref>;</highlight></codeline>
<codeline lineno="1843"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1844"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1845"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1846"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*respLenP<sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1afb2bc35e49841dc30669c91ff27ad5c7" kindref="member">vdmDiscSvidRespLen</ref>;</highlight></codeline>
<codeline lineno="1847"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptr<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>(uint8_t<sp/>*)ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a1f056c297695b7e3e729311aba3fa5bb" kindref="member">vdmDiscSvidResp</ref>;</highlight></codeline>
<codeline lineno="1848"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1849"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1850"><highlight class="normal"></highlight></codeline>
<codeline lineno="1851"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(ptr);</highlight></codeline>
<codeline lineno="1852"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1853"><highlight class="normal"></highlight></codeline>
<codeline lineno="1854"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/>uint8_t<sp/>*<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga69fc3be1bd9fb44f5b3a7da0028b19a7" kindref="member">Cy_PdAltMode_VdmTask_GetDiscIdResp</ref>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext,<sp/>uint8_t<sp/>*respLenP)<sp/></highlight><highlight class="comment">/*<sp/>PRQA<sp/>S<sp/>3408<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1855"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1856"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga5861bb3fd3515f0c1accdfa8b1ef054d" kindref="member">Cy_PdAltMode_VdmTask_GetStoredDiscResp</ref>(ptrAltModeContext,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">,<sp/>respLenP);</highlight></codeline>
<codeline lineno="1857"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1858"><highlight class="normal"></highlight></codeline>
<codeline lineno="1859"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/>uint8_t<sp/>*<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga540b498397f1c9469b495940f2ac91a0" kindref="member">Cy_PdAltMode_VdmTask_GetDiscSvidResp</ref>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext,<sp/>uint8_t<sp/>*respLenP)</highlight></codeline>
<codeline lineno="1860"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1861"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga5861bb3fd3515f0c1accdfa8b1ef054d" kindref="member">Cy_PdAltMode_VdmTask_GetStoredDiscResp</ref>(ptrAltModeContext,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/>respLenP);</highlight></codeline>
<codeline lineno="1862"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1863"><highlight class="normal"></highlight></codeline>
<codeline lineno="1864"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>(DFP_ALT_MODE_SUPP)<sp/>||<sp/>(UFP_ALT_MODE_SUPP)<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1865"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>[]<sp/>END<sp/>OF<sp/>FILE<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
    </programlisting>
    <location file="cy_pdaltmode_vdm_task.c"/>
  </compounddef>
</doxygen>
