<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.14">
  <compounddef id="cy__pdaltmode__usb4_8c" kind="file" language="C++">
    <compoundname>cy_pdaltmode_usb4.c</compoundname>
    <briefdescription>
<para>USB4 mode handler implementation. </para>    </briefdescription>
    <detaileddescription>
<para><simplesect kind="version"><para>1.0</para></simplesect>
<simplesect kind="copyright"><para>Copyright 2024, Cypress Semiconductor Corporation (an Infineon company) or an affiliate of Cypress Semiconductor Corporation. All rights reserved. You may use this file only in accordance with the license, terms, conditions, disclaimers, and limitations in the end user license agreement accompanying the software package with which this file was provided. </para></simplesect>
</para>    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">/***************************************************************************/</highlight></codeline>
<codeline lineno="17"><highlight class="preprocessor">#if<sp/>((DFP_ALT_MODE_SUPP)<sp/>||<sp/>(UFP_ALT_MODE_SUPP))</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="18"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>CY_PD_USB4_SUPPORT_ENABLE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;cy_pdaltmode_defines.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight></codeline>
<codeline lineno="22"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;cy_pdstack_dpm.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;cy_pdutils.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;cy_pdutils_sw_timer.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="25"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;cy_pdstack_timer_id.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="26"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;cy_pdaltmode_timer_id.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;cy_pdaltmode_hw.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="29"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;cy_pdaltmode_vdm_task.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="30"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;cy_pdaltmode_mngr.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="31"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;cy_pdaltmode_usb4.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="32"><highlight class="normal"></highlight></codeline>
<codeline lineno="33"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>STORE_DETAILS_OF_HOST</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="34"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;cy_pdaltmode_host_details.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="35"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>STORE_DETAILS_OF_HOST<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="36"><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>AMD_RETIMER_ENABLE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="38"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;cy_pdaltmode_retimer_wrapper.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="39"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>AMD_RETIMER_ENABLE<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight></codeline>
<codeline lineno="41"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>cy_en_pdstack_status_t<sp/>Cy_PdAltMode_Usb4_SendEnter(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext);</highlight></codeline>
<codeline lineno="42"><highlight class="normal"></highlight></codeline>
<codeline lineno="43"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/>cy_pd_pd_do_t*<sp/><ref refid="group__group__pdaltmode__usb4__functions_1gab913f967042a187bd02f9b22a1fe8223" kindref="member">Cy_PdAltMode_Usb4_GetEudo</ref>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext)</highlight></codeline>
<codeline lineno="44"><highlight class="normal">{</highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>&amp;ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a789c5bea31bbce4da60511291047cdac" kindref="member">eudoBuf</ref>.cmdDo[0];</highlight></codeline>
<codeline lineno="46"><highlight class="normal">}</highlight></codeline>
<codeline lineno="47"><highlight class="normal"></highlight></codeline>
<codeline lineno="48"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga399c1777f494368601cad31a40afca9c" kindref="member">cy_en_pdaltmode_vdm_task_t</ref><sp/><ref refid="group__group__pdaltmode__usb4__functions_1ga8e46a82179892d07edeabc9f7445c1df" kindref="member">Cy_PdAltMode_Usb4_EvalCblResp</ref>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext)</highlight></codeline>
<codeline lineno="49"><highlight class="normal">{</highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structcy__stc__pdaltmode__vdm__msg__info__t" kindref="compound">cy_stc_pdaltmode_vdm_msg_info_t</ref><sp/>*msgP<sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>&amp;ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1ae35514d1f3ab5b9c3e9a3b467934ed08" kindref="member">vdmMsg</ref>;</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga399c1777f494368601cad31a40afca9c" kindref="member">cy_en_pdaltmode_vdm_task_t</ref><sp/>ret<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca26cf41d32bf19ca82712858c4e3b2038" kindref="member">CY_PDALTMODE_VDM_TASK_REG_ATCH_TGT_INFO</ref>;</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_stc_pdstack_context_t<sp/>*ptrPdStackContext<sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a34f18ac1a604068a73e013c483d55104" kindref="member">pdStackContext</ref>;</highlight></codeline>
<codeline lineno="53"><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Save<sp/>TBT<sp/>cable<sp/>response<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1a0ac810708362696618c082ab1cb88128" kindref="member">tbtCblVdo</ref><sp/>=<sp/>msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a96568aa7466ed90908c4fc903678f203" kindref="member">vdo</ref>[0];</highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>common<sp/>active/passive<sp/>cable<sp/>parameters<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__usb4__functions_1gab913f967042a187bd02f9b22a1fe8223" kindref="member">Cy_PdAltMode_Usb4_GetEudo</ref>)(ptrAltModeContext)-&gt;enterusb_vdo.cableSpeed<sp/>=<sp/>msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a96568aa7466ed90908c4fc903678f203" kindref="member">vdo</ref>[0].tbt_vdo.cblSpeed;</highlight></codeline>
<codeline lineno="58"><highlight class="normal"></highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Handle<sp/>active/passive<sp/>cable<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/>if<sp/><sp/>(ptrPdStackContext-&gt;dpmStat.cblType<sp/>==<sp/>CY_PDSTACK_PROD_TYPE_PAS_CBL)</highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="63"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>Special<sp/>handling<sp/>for<sp/>LRD<sp/>cable<sp/>-<sp/>bit#24<sp/>in<sp/>TBT<sp/>disc<sp/>mode<sp/>will<sp/>be<sp/>set<sp/>to<sp/>1<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a96568aa7466ed90908c4fc903678f203" kindref="member">vdo</ref>[0].tbt_vdo.cableActive<sp/>!=<sp/>0x0U)</highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__usb4__functions_1gab913f967042a187bd02f9b22a1fe8223" kindref="member">Cy_PdAltMode_Usb4_GetEudo</ref>)(ptrAltModeContext)-&gt;enterusb_vdo.cableType<sp/>=<sp/>(uint32_t)CY_PDSTACK_CBL_TYPE_ACTIVE_REDRIVER;</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a1189fb5cced531d9b3d9436abe7d1e25" kindref="member">usb4Flag</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__usb4__enums_1ggaed6a0bdb5fa1306874c9f9dc6703ecd7a411a01d174afe3ce708cff021ed918fc" kindref="member">CY_PDALTMODE_USB4_TBT_CBL_ENTER_SOP_P</ref>;</highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca519562b24f860ad1d56c945d74f4a792" kindref="member">CY_PDALTMODE_VDM_TASK_USB4_TBT</ref>;</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Enter<sp/>USB4<sp/>mode<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__usb4__functions_1gaca0998c989866cffc03ab22c4e3c5939" kindref="member">Cy_PdAltMode_Usb4_Enter</ref>)(ptrAltModeContext,<sp/>CY_PD_SOP,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(ptrPdStackContext-&gt;dpmStat.cblType<sp/>==<sp/>CY_PDSTACK_PROD_TYPE_ACT_CBL)</highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__group__pdaltmode__usb4__functions_1gab913f967042a187bd02f9b22a1fe8223" kindref="member">Cy_PdAltMode_Usb4_GetEudo</ref>(ptrAltModeContext)-&gt;enterusb_vdo.cableType<sp/><sp/>=<sp/>(uint32_t)CY_PDSTACK_CBL_TYPE_ACTIVE_REDRIVER;</highlight></codeline>
<codeline lineno="79"><highlight class="normal"></highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>active<sp/>cable<sp/>bit<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a96568aa7466ed90908c4fc903678f203" kindref="member">vdo</ref>[0].tbt_vdo.b22RetimerCbl<sp/>!=<sp/>0x0U)</highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__usb4__functions_1gab913f967042a187bd02f9b22a1fe8223" kindref="member">Cy_PdAltMode_Usb4_GetEudo</ref>)(ptrAltModeContext)-&gt;enterusb_vdo.cableType<sp/>=<sp/>(uint32_t)CY_PDSTACK_CBL_TYPE_ACTIVE_RETIMER;</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="85"><highlight class="normal"></highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a96568aa7466ed90908c4fc903678f203" kindref="member">vdo</ref>[0].tbt_vdo.cblGen<sp/>!=<sp/>0x0U)</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a1189fb5cced531d9b3d9436abe7d1e25" kindref="member">usb4Flag</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__usb4__enums_1ggaed6a0bdb5fa1306874c9f9dc6703ecd7a411a01d174afe3ce708cff021ed918fc" kindref="member">CY_PDALTMODE_USB4_TBT_CBL_ENTER_SOP_P</ref>;</highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca519562b24f860ad1d56c945d74f4a792" kindref="member">CY_PDALTMODE_VDM_TASK_USB4_TBT</ref>;</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Resume<sp/>VDM<sp/>handling<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/>ALT_MODE_CALL_MAP(Cy_PdAltMode_VdmTask_ResumeHandler)(ptrAltModeContext);</highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Do<sp/>nothing<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="101"><highlight class="normal"></highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="103"><highlight class="normal">}</highlight></codeline>
<codeline lineno="104"><highlight class="normal"></highlight></codeline>
<codeline lineno="105"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga399c1777f494368601cad31a40afca9c" kindref="member">cy_en_pdaltmode_vdm_task_t</ref><sp/><ref refid="group__group__pdaltmode__usb4__functions_1gaa2f2d52d61f0bf59a177c999c11fa402" kindref="member">Cy_PdAltMode_Usb4_FailCblResp</ref>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext)</highlight></codeline>
<codeline lineno="106"><highlight class="normal">{</highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_stc_pdstack_context_t<sp/>*ptrPdStackContext<sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a34f18ac1a604068a73e013c483d55104" kindref="member">pdStackContext</ref>;</highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga399c1777f494368601cad31a40afca9c" kindref="member">cy_en_pdaltmode_vdm_task_t</ref><sp/>ret<sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca26cf41d32bf19ca82712858c4e3b2038" kindref="member">CY_PDALTMODE_VDM_TASK_REG_ATCH_TGT_INFO</ref>;</highlight></codeline>
<codeline lineno="109"><highlight class="normal"></highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a1189fb5cced531d9b3d9436abe7d1e25" kindref="member">usb4Flag</ref><sp/>&gt;=<sp/><ref refid="group__group__pdaltmode__usb4__enums_1ggaed6a0bdb5fa1306874c9f9dc6703ecd7a1d37d1fb7a64f1fc73ef46cd6c39cfbc" kindref="member">CY_PDALTMODE_USB4_TBT_CBL_DISC_RUN</ref>)<sp/><sp/><sp/><sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a1189fb5cced531d9b3d9436abe7d1e25" kindref="member">usb4Flag</ref><sp/>&lt;=<sp/><ref refid="group__group__pdaltmode__usb4__enums_1ggaed6a0bdb5fa1306874c9f9dc6703ecd7ab684f73a375020b887465a8375616c75" kindref="member">CY_PDALTMODE_USB4_TBT_CBL_ENTER_SOP_DP</ref>)</highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/><sp/>(ptrPdStackContext-&gt;dpmStat.cblType<sp/>==<sp/>CY_PDSTACK_PROD_TYPE_PAS_CBL)</highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Enter<sp/>USB4<sp/>mode<sp/>with<sp/>passive<sp/>cable<sp/>Disc<sp/>ID<sp/>response<sp/>parameters<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__usb4__functions_1gaca0998c989866cffc03ab22c4e3c5939" kindref="member">Cy_PdAltMode_Usb4_Enter</ref>)(ptrAltModeContext,<sp/>CY_PD_SOP,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrPdStackContext-&gt;dpmStat.cblType<sp/>==<sp/>CY_PDSTACK_PROD_TYPE_ACT_CBL)</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Resume<sp/>VDM<sp/>handling<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/>ALT_MODE_CALL_MAP(Cy_PdAltMode_VdmTask_ResumeHandler)(ptrAltModeContext);</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Do<sp/>nothing<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="130"><highlight class="normal"></highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="132"><highlight class="normal">}</highlight></codeline>
<codeline lineno="133"><highlight class="normal"></highlight></codeline>
<codeline lineno="134"><highlight class="normal"><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga399c1777f494368601cad31a40afca9c" kindref="member">cy_en_pdaltmode_vdm_task_t</ref><sp/><ref refid="group__group__pdaltmode__usb4__functions_1ga637509703647f7d6175ad89fd71d3f49" kindref="member">Cy_PdAltMode_Usb4_TbtHandler</ref>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext,<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga53976be265d41463919b3ea93da4cf30" kindref="member">cy_en_pdaltmode_vdm_evt_t</ref><sp/>vdmEvt)</highlight></codeline>
<codeline lineno="135"><highlight class="normal">{</highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_stc_pdstack_context_t<sp/>*ptrPdStackContext<sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a34f18ac1a604068a73e013c483d55104" kindref="member">pdStackContext</ref>;</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga399c1777f494368601cad31a40afca9c" kindref="member">cy_en_pdaltmode_vdm_task_t</ref><sp/>ret<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca26cf41d32bf19ca82712858c4e3b2038" kindref="member">CY_PDALTMODE_VDM_TASK_REG_ATCH_TGT_INFO</ref>;</highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structcy__stc__pdaltmode__vdm__msg__info__t" kindref="compound">cy_stc_pdaltmode_vdm_msg_info_t</ref><sp/>*msgP<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>&amp;ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1ae35514d1f3ab5b9c3e9a3b467934ed08" kindref="member">vdmMsg</ref>;</highlight></codeline>
<codeline lineno="139"><highlight class="normal"></highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a7e69c43b3b2dd3eed1c6932869deb63d" kindref="member">vdmEvt</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga53976be265d41463919b3ea93da4cf30abd914a67376582616bd3cd1949b105ca" kindref="member">CY_PDALTMODE_VDM_EVT_RUN</ref>;</highlight></codeline>
<codeline lineno="141"><highlight class="normal"></highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(vdmEvt<sp/>==<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga53976be265d41463919b3ea93da4cf30abd914a67376582616bd3cd1949b105ca" kindref="member">CY_PDALTMODE_VDM_EVT_RUN</ref>)</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca975ad4fb2e6c7feb0cb1127be8325e3c" kindref="member">CY_PDALTMODE_VDM_TASK_SEND_MSG</ref>;</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a1189fb5cced531d9b3d9436abe7d1e25" kindref="member">usb4Flag</ref>)</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__usb4__enums_1ggaed6a0bdb5fa1306874c9f9dc6703ecd7a1d37d1fb7a64f1fc73ef46cd6c39cfbc" kindref="member">CY_PDALTMODE_USB4_TBT_CBL_DISC_RUN</ref>:</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Send<sp/>Disc<sp/>mode<sp/>to<sp/>TBT<sp/>cable<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga0779fd0bc9432201c398f1a27ac5b270" kindref="member">Cy_PdAltMode_VdmTask_SetDiscParam</ref>)(ptrAltModeContext,<sp/>(uint8_t)CY_PD_SOP_PRIME,<sp/>CY_PDSTACK_VDM_CMD_DSC_MODES);</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__usb4__enums_1ggaed6a0bdb5fa1306874c9f9dc6703ecd7a411a01d174afe3ce708cff021ed918fc" kindref="member">CY_PDALTMODE_USB4_TBT_CBL_ENTER_SOP_P</ref>:</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>MUX<sp/>to<sp/>safe<sp/>state<sp/>as<sp/>CCG<sp/>enters<sp/>to<sp/>TBT<sp/>Alt<sp/>Mode<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(void)<ref refid="group__group__pdaltmode__alt__mode__hw__functions_1ga9c8a69158389bc9aa1b7825bed6bf693" kindref="member">Cy_PdAltMode_HW_SetMux</ref>(ptrAltModeContext,<sp/><ref refid="group__group__pdaltmode__alt__mode__hw__enums_1gga6e2d96963afcf43ec5dfe3d5a18d6bc6a9821c57d38fa26bbb56d05fa8de673eb" kindref="member">CY_PDALTMODE_MUX_CONFIG_SAFE</ref>,<sp/><ref refid="group__group__pdaltmode__common__macros_1ga2cb7840adbf420357dfbb997f0f2b3a3" kindref="member">CY_PDALTMODE_MNGR_NO_DATA</ref>,<sp/><ref refid="group__group__pdaltmode__common__macros_1ga2cb7840adbf420357dfbb997f0f2b3a3" kindref="member">CY_PDALTMODE_MNGR_NO_DATA</ref>);</highlight></codeline>
<codeline lineno="154"><highlight class="normal"></highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Send<sp/>Disc<sp/>mode<sp/>to<sp/>TBT<sp/>cable<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga0779fd0bc9432201c398f1a27ac5b270" kindref="member">Cy_PdAltMode_VdmTask_SetDiscParam</ref>)(ptrAltModeContext,<sp/>(uint8_t)CY_PD_SOP_PRIME,<sp/>CY_PDSTACK_VDM_CMD_ENTER_MODE);</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a450b366ec51f4b9bb3dc3c9ea22997c9" kindref="member">vdmHeader</ref>.std_vdm_hdr.objPos<sp/>=<sp/>1u;</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__usb4__enums_1ggaed6a0bdb5fa1306874c9f9dc6703ecd7ab684f73a375020b887465a8375616c75" kindref="member">CY_PDALTMODE_USB4_TBT_CBL_ENTER_SOP_DP</ref>:</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Send<sp/>Disc<sp/>mode<sp/>to<sp/>TBT<sp/>cable<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1ga0779fd0bc9432201c398f1a27ac5b270" kindref="member">Cy_PdAltMode_VdmTask_SetDiscParam</ref>)(ptrAltModeContext,<sp/>(uint8_t)CY_PD_SOP_DPRIME,<sp/>CY_PDSTACK_VDM_CMD_ENTER_MODE);</highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a450b366ec51f4b9bb3dc3c9ea22997c9" kindref="member">vdmHeader</ref>.std_vdm_hdr.objPos<sp/>=<sp/>1u;</highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__usb4__enums_1ggaed6a0bdb5fa1306874c9f9dc6703ecd7acbf82862fab255faa7be4e1f04ab1dfa" kindref="member">CY_PDALTMODE_USB4_SEND_USB4</ref>:</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(Cy_PdAltMode_Usb4_SendEnter(ptrAltModeContext)<sp/>!=<sp/>CY_PDSTACK_STAT_SUCCESS)</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>In<sp/>case<sp/>of<sp/>failure,<sp/>start<sp/>timer<sp/>to<sp/>retry<sp/>the<sp/>request.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(void)TIMER_CALL_MAP(Cy_PdUtils_SwTimer_Start)<sp/>(ptrPdStackContext-&gt;ptrTimerContext,<sp/>ptrPdStackContext,</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>CY_PDALTMODE_GET_TIMER_ID(ptrPdStackContext,<sp/><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga8ce268202ee29df67f500d14a1273881a49535375901fa7e1420cd491a8cf4b3e" kindref="member">CY_PDALTMODE_VDM_BUSY_TIMER</ref>),</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__group__pdaltmode__common__macros_1gada4f48ba65aa8aa6284dc9656b496d6c" kindref="member">CY_PDALTMODE_APP_USB4_ENTRY_RETRY_PERIOD</ref>,<sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__usb4__functions_1ga882a4d544ef448e9d0a40e5cfe4a189f" kindref="member">Cy_PdAltMode_Usb4_EnterUsb4RetryCbk</ref>));</highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9cafdaff6d78ac13c01c80024f4d1c0d1f1" kindref="member">CY_PDALTMODE_VDM_TASK_WAIT</ref>;</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Do<sp/>nothing<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a450b366ec51f4b9bb3dc3c9ea22997c9" kindref="member">vdmHeader</ref>.std_vdm_hdr.svid<sp/>=<sp/><ref refid="group__group__pdaltmode__common__macros_1ga73240a1c8f3d99e29393c3ead7a4bbce" kindref="member">CY_PDALTMODE_TBT_SVID</ref>;</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(vdmEvt<sp/>==<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga53976be265d41463919b3ea93da4cf30a981de98f344b91aee860d9ae494d0444" kindref="member">CY_PDALTMODE_VDM_EVT_EVAL</ref>)</highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msgP-&gt;<ref refid="structcy__stc__pdaltmode__vdm__msg__info__t_1a450b366ec51f4b9bb3dc3c9ea22997c9" kindref="member">vdmHeader</ref>.std_vdm_hdr.svid<sp/>=<sp/><ref refid="group__group__pdaltmode__common__macros_1ga73240a1c8f3d99e29393c3ead7a4bbce" kindref="member">CY_PDALTMODE_TBT_SVID</ref>;</highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a1189fb5cced531d9b3d9436abe7d1e25" kindref="member">usb4Flag</ref>)</highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__usb4__enums_1ggaed6a0bdb5fa1306874c9f9dc6703ecd7a1d37d1fb7a64f1fc73ef46cd6c39cfbc" kindref="member">CY_PDALTMODE_USB4_TBT_CBL_DISC_RUN</ref>:</highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Evaluate<sp/>TBT<sp/>cable<sp/>discovery<sp/>mode<sp/>response<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__usb4__functions_1ga8e46a82179892d07edeabc9f7445c1df" kindref="member">Cy_PdAltMode_Usb4_EvalCblResp</ref>)(ptrAltModeContext);</highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__usb4__enums_1ggaed6a0bdb5fa1306874c9f9dc6703ecd7a411a01d174afe3ce708cff021ed918fc" kindref="member">CY_PDALTMODE_USB4_TBT_CBL_ENTER_SOP_P</ref>:</highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>if<sp/>SOP&quot;<sp/>is<sp/>present<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrPdStackContext-&gt;dpmStat.cblVdo.std_cbl_vdo.sopDp<sp/>!=<sp/>0x0U)</highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Send<sp/>Enter<sp/>TBT<sp/>cable<sp/>SOP&quot;<sp/>command<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a1189fb5cced531d9b3d9436abe7d1e25" kindref="member">usb4Flag</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__usb4__enums_1ggaed6a0bdb5fa1306874c9f9dc6703ecd7ab684f73a375020b887465a8375616c75" kindref="member">CY_PDALTMODE_USB4_TBT_CBL_ENTER_SOP_DP</ref>;</highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca519562b24f860ad1d56c945d74f4a792" kindref="member">CY_PDALTMODE_VDM_TASK_USB4_TBT</ref>;</highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>TBT<sp/>mode<sp/>cable<sp/>enter<sp/>flag<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1a70b3ba1273c59660d7a0dfb8369d3aa0" kindref="member">tbtCblEntered</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Enter<sp/>USB4<sp/>mode<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="group__group__pdaltmode__usb4__functions_1gaca0998c989866cffc03ab22c4e3c5939" kindref="member">Cy_PdAltMode_Usb4_Enter</ref>(ptrAltModeContext,<sp/>CY_PD_SOP,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__usb4__enums_1ggaed6a0bdb5fa1306874c9f9dc6703ecd7ab684f73a375020b887465a8375616c75" kindref="member">CY_PDALTMODE_USB4_TBT_CBL_ENTER_SOP_DP</ref>:</highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>TBT<sp/>mode<sp/>cable<sp/>enter<sp/>flag<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1a70b3ba1273c59660d7a0dfb8369d3aa0" kindref="member">tbtCblEntered</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Enter<sp/>USB4<sp/>mode<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="group__group__pdaltmode__usb4__functions_1gaca0998c989866cffc03ab22c4e3c5939" kindref="member">Cy_PdAltMode_Usb4_Enter</ref>(ptrAltModeContext,<sp/>CY_PD_SOP,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__usb4__enums_1ggaed6a0bdb5fa1306874c9f9dc6703ecd7acbf82862fab255faa7be4e1f04ab1dfa" kindref="member">CY_PDALTMODE_USB4_SEND_USB4</ref>:</highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Evaluate<sp/>USB4<sp/>Accept<sp/>response<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__usb4__functions_1ga7f23fdc6a1750ae95cb311cfe99c0042" kindref="member">Cy_PdAltMode_Usb4_EvalAcceptResp</ref>)(ptrAltModeContext);</highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Do<sp/>nothing<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(vdmEvt<sp/>==<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga53976be265d41463919b3ea93da4cf30a4b471a5f9cc7707f702e5d2bf6848af1" kindref="member">CY_PDALTMODE_VDM_EVT_FAIL</ref>)</highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a1189fb5cced531d9b3d9436abe7d1e25" kindref="member">usb4Flag</ref><sp/>==<sp/><ref refid="group__group__pdaltmode__usb4__enums_1ggaed6a0bdb5fa1306874c9f9dc6703ecd7acbf82862fab255faa7be4e1f04ab1dfa" kindref="member">CY_PDALTMODE_USB4_SEND_USB4</ref>)</highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Handle<sp/>EnterUSB<sp/>failed<sp/>response<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__usb4__functions_1ga0b269ae5eeba2b0f19ea65ecd461d2fc" kindref="member">Cy_PdAltMode_Usb4_EvalFailResp</ref>)(ptrAltModeContext);</highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Handle<sp/>failed<sp/>TBT<sp/>cable<sp/>response<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__usb4__functions_1gaa2f2d52d61f0bf59a177c999c11fa402" kindref="member">Cy_PdAltMode_Usb4_FailCblResp</ref>)(ptrAltModeContext);</highlight></codeline>
<codeline lineno="231"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="233"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Do<sp/>nothing<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="237"><highlight class="normal"></highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="239"><highlight class="normal">}</highlight></codeline>
<codeline lineno="240"><highlight class="normal"></highlight></codeline>
<codeline lineno="241"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__usb4__functions_1gaa150b382f5d576d792d535542adb9303" kindref="member">Cy_PdAltMode_Usb4_DataRstRecCbk</ref>(cy_stc_pdstack_context_t<sp/>*ptrPdStackContext,<sp/>cy_en_pdstack_resp_status_t<sp/>status,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>cy_stc_pdstack_pd_packet_t*<sp/>recVdm)</highlight></codeline>
<codeline lineno="242"><highlight class="normal">{</highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext<sp/>=<sp/>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*)ptrPdStackContext-&gt;ptrAltModeContext;</highlight></codeline>
<codeline lineno="244"><highlight class="normal"></highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Stack<sp/>already<sp/>does<sp/>error<sp/>recovery<sp/>if<sp/>the<sp/>Data<sp/>Reset<sp/>response<sp/>from<sp/>port<sp/>partner<sp/>is<sp/>not<sp/>valid.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/>if<sp/>(status<sp/>&lt;=<sp/>CY_PDSTACK_CMD_FAILED)</highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Send<sp/>Data<sp/>Reset<sp/>message<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(PDSTACK_CALL_MAP(Cy_PdStack_Dpm_SendPdCommand)(ptrPdStackContext,<sp/>CY_PDSTACK_DPM_CMD_SEND_DATA_RESET,<sp/>NULL,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__usb4__functions_1gaa150b382f5d576d792d535542adb9303" kindref="member">Cy_PdAltMode_Usb4_DataRstRecCbk</ref>))<sp/>!=<sp/>CY_PDSTACK_STAT_SUCCESS)</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(void)TIMER_CALL_MAP(Cy_PdUtils_SwTimer_Start)<sp/>(ptrPdStackContext-&gt;ptrTimerContext,<sp/>ptrPdStackContext,</highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>CY_PDALTMODE_GET_TIMER_ID(ptrPdStackContext,<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga8ce268202ee29df67f500d14a1273881a49535375901fa7e1420cd491a8cf4b3e" kindref="member">CY_PDALTMODE_VDM_BUSY_TIMER</ref>),</highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a6ab9d4ea625b7c20255fedd3ba37317b" kindref="member">vdmBusyDelay</ref>,<sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__usb4__functions_1gada5e275bcd5deddd82da5be802a2356b" kindref="member">Cy_PdAltMode_Usb4_DataRstRetryCbk</ref>));</highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="255"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="256"><highlight class="normal"></highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/><sp/><sp/>(void)<sp/>recVdm;</highlight></codeline>
<codeline lineno="258"><highlight class="normal">}</highlight></codeline>
<codeline lineno="259"><highlight class="normal"></highlight></codeline>
<codeline lineno="260"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__usb4__functions_1gada5e275bcd5deddd82da5be802a2356b" kindref="member">Cy_PdAltMode_Usb4_DataRstRetryCbk</ref><sp/>(cy_timer_id_t<sp/></highlight><highlight class="keywordtype">id</highlight><highlight class="normal">,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*context)</highlight></codeline>
<codeline lineno="261"><highlight class="normal">{</highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/><sp/>(void)</highlight><highlight class="keywordtype">id</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="263"><highlight class="normal"></highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_stc_pdstack_context_t<sp/>*ptrPdStackContext<sp/>=<sp/>(cy_stc_pdstack_context_t<sp/>*)context;</highlight></codeline>
<codeline lineno="265"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext<sp/>=<sp/>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*)ptrPdStackContext-&gt;ptrAltModeContext;</highlight></codeline>
<codeline lineno="266"><highlight class="normal"></highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Increment<sp/>Data<sp/>Reset<sp/>counter<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="268"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1a1dfe8d8774b3f0686d66869b964d3d77" kindref="member">usb4DataRstCnt</ref>++;</highlight></codeline>
<codeline lineno="269"><highlight class="normal"></highlight></codeline>
<codeline lineno="270"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Send<sp/>Data<sp/>Reset<sp/>command<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="271"><highlight class="normal"><sp/><sp/><sp/><sp/>if<sp/>(PDSTACK_CALL_MAP(Cy_PdStack_Dpm_SendPdCommand)(ptrPdStackContext,<sp/>CY_PDSTACK_DPM_CMD_SEND_DATA_RESET,<sp/>NULL,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__usb4__functions_1gaa150b382f5d576d792d535542adb9303" kindref="member">Cy_PdAltMode_Usb4_DataRstRecCbk</ref>))<sp/>!=<sp/>CY_PDSTACK_STAT_SUCCESS)</highlight></codeline>
<codeline lineno="272"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(void)TIMER_CALL_MAP(Cy_PdUtils_SwTimer_Start)<sp/>(ptrPdStackContext-&gt;ptrTimerContext,<sp/>ptrPdStackContext,</highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>CY_PDALTMODE_GET_TIMER_ID(ptrPdStackContext,<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga8ce268202ee29df67f500d14a1273881a49535375901fa7e1420cd491a8cf4b3e" kindref="member">CY_PDALTMODE_VDM_BUSY_TIMER</ref>),</highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a6ab9d4ea625b7c20255fedd3ba37317b" kindref="member">vdmBusyDelay</ref>,<sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__usb4__functions_1gada5e275bcd5deddd82da5be802a2356b" kindref="member">Cy_PdAltMode_Usb4_DataRstRetryCbk</ref>));</highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="277"><highlight class="normal">}</highlight></codeline>
<codeline lineno="278"><highlight class="normal"></highlight></codeline>
<codeline lineno="279"><highlight class="normal">uint32_t<sp/><ref refid="group__group__pdaltmode__usb4__functions_1ga221562ee4970b23811e3ba9055a08b67" kindref="member">Cy_PdAltMode_Usb4_UpdateDataStatus</ref>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext,<sp/>cy_pd_pd_do_t<sp/>eudo,<sp/>uint32_t<sp/>val)</highlight></codeline>
<codeline lineno="280"><highlight class="normal">{</highlight></codeline>
<codeline lineno="281"><highlight class="normal"><sp/><sp/><sp/><sp/>(void)<sp/>val;</highlight></codeline>
<codeline lineno="282"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>ret<sp/>=<sp/>0x00U;</highlight></codeline>
<codeline lineno="283"><highlight class="normal"></highlight></codeline>
<codeline lineno="284"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>AMD_RETIMER_ENABLE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="285"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight></codeline>
<codeline lineno="286"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a34f18ac1a604068a73e013c483d55104" kindref="member">pdStackContext</ref>-&gt;dpmConfig.curPortType<sp/>==<sp/>CY_PD_PRT_TYPE_UFP)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(eudo.enterusb_vdo.usbMode<sp/>==<sp/>CY_PD_USB_MODE_USB4)</highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Enable<sp/>Retimer<sp/>in<sp/>case<sp/>of<sp/>UFP<sp/>data<sp/>role<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="291"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Cy_PdAltMode_RetimerWrapper_Enable(ptrAltModeContext,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="293"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="294"><highlight class="normal"></highlight></codeline>
<codeline lineno="295"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Save<sp/>EUDO<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="296"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1a939e4775a5e986d1d505703caa396a82" kindref="member">eudo</ref><sp/>=<sp/>eudo;</highlight></codeline>
<codeline lineno="297"><highlight class="normal"></highlight></codeline>
<codeline lineno="298"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(eudo.enterusb_vdo.usbMode<sp/>==<sp/>CY_PD_USB_MODE_USB4)</highlight></codeline>
<codeline lineno="299"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="300"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/>(uint32_t)<ref refid="group__group__pdaltmode__alt__mode__hw__functions_1ga9c8a69158389bc9aa1b7825bed6bf693" kindref="member">Cy_PdAltMode_HW_SetMux</ref><sp/>(ptrAltModeContext,<sp/><ref refid="group__group__pdaltmode__alt__mode__hw__enums_1gga6e2d96963afcf43ec5dfe3d5a18d6bc6ab4076832d3a534a424e3bb448bbb04ff" kindref="member">CY_PDALTMODE_MUX_CONFIG_USB4_CUSTOM</ref>,<sp/>eudo.val,<sp/><ref refid="group__group__pdaltmode__common__macros_1ga2cb7840adbf420357dfbb997f0f2b3a3" kindref="member">CY_PDALTMODE_MNGR_NO_DATA</ref>);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="301"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="302"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(eudo.enterusb_vdo.usbMode<sp/>==<sp/>CY_PD_USB_MODE_USB3)</highlight></codeline>
<codeline lineno="303"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="304"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/>(uint32_t)<ref refid="group__group__pdaltmode__alt__mode__hw__functions_1ga9c8a69158389bc9aa1b7825bed6bf693" kindref="member">Cy_PdAltMode_HW_SetMux</ref><sp/>(ptrAltModeContext,<sp/><ref refid="group__group__pdaltmode__alt__mode__hw__enums_1gga6e2d96963afcf43ec5dfe3d5a18d6bc6a1bcda475ec873920e65bb3dc7f397656" kindref="member">CY_PDALTMODE_MUX_CONFIG_SS_ONLY</ref>,<sp/><ref refid="group__group__pdaltmode__common__macros_1ga2cb7840adbf420357dfbb997f0f2b3a3" kindref="member">CY_PDALTMODE_MNGR_NO_DATA</ref>,<sp/><ref refid="group__group__pdaltmode__common__macros_1ga2cb7840adbf420357dfbb997f0f2b3a3" kindref="member">CY_PDALTMODE_MNGR_NO_DATA</ref>);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="305"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="306"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(eudo.enterusb_vdo.usbMode<sp/>==<sp/>CY_PD_USB_MODE_USB2)</highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="308"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/>(uint32_t)<ref refid="group__group__pdaltmode__alt__mode__hw__functions_1ga9c8a69158389bc9aa1b7825bed6bf693" kindref="member">Cy_PdAltMode_HW_SetMux</ref><sp/>(ptrAltModeContext,<sp/><ref refid="group__group__pdaltmode__alt__mode__hw__enums_1gga6e2d96963afcf43ec5dfe3d5a18d6bc6a9821c57d38fa26bbb56d05fa8de673eb" kindref="member">CY_PDALTMODE_MUX_CONFIG_SAFE</ref>,<sp/><ref refid="group__group__pdaltmode__common__macros_1ga2cb7840adbf420357dfbb997f0f2b3a3" kindref="member">CY_PDALTMODE_MNGR_NO_DATA</ref>,<sp/><ref refid="group__group__pdaltmode__common__macros_1ga2cb7840adbf420357dfbb997f0f2b3a3" kindref="member">CY_PDALTMODE_MNGR_NO_DATA</ref>);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="309"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="310"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Do<sp/>nothing<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="313"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="314"><highlight class="normal"></highlight></codeline>
<codeline lineno="315"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="316"><highlight class="normal">}</highlight></codeline>
<codeline lineno="317"><highlight class="normal"></highlight></codeline>
<codeline lineno="318"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>Cy_PdAltMode_Usb4_CblRstRecCbk(cy_stc_pdstack_context_t<sp/>*ptrPdStackContext,<sp/>cy_en_pdstack_resp_status_t<sp/>status,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>cy_stc_pdstack_pd_packet_t*<sp/>recVdm)</highlight></codeline>
<codeline lineno="319"><highlight class="normal">{</highlight></codeline>
<codeline lineno="320"><highlight class="normal"><sp/><sp/><sp/><sp/>(void)recVdm;</highlight></codeline>
<codeline lineno="321"><highlight class="normal"></highlight></codeline>
<codeline lineno="322"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(status<sp/>==<sp/>CY_PDSTACK_CMD_SENT)</highlight></codeline>
<codeline lineno="323"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="324"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(void)ALT_MODE_CALL_MAP(Cy_PdAltMode_VdmTask_ResumeHandler)(ptrPdStackContext-&gt;ptrAltModeContext);</highlight></codeline>
<codeline lineno="325"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="326"><highlight class="normal">}</highlight></codeline>
<codeline lineno="327"><highlight class="normal"></highlight></codeline>
<codeline lineno="328"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>Cy_PdAltMode_Usb4_CblRstRetryCb<sp/>(cy_timer_id_t<sp/></highlight><highlight class="keywordtype">id</highlight><highlight class="normal">,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*context)</highlight></codeline>
<codeline lineno="329"><highlight class="normal">{</highlight></codeline>
<codeline lineno="330"><highlight class="normal"><sp/><sp/><sp/><sp/>(void)</highlight><highlight class="keywordtype">id</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="331"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_stc_pdstack_context_t<sp/>*ptrPdStackContext<sp/>=<sp/>(cy_stc_pdstack_context_t<sp/>*)<sp/>context;</highlight></codeline>
<codeline lineno="332"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext<sp/>=<sp/>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*)ptrPdStackContext-&gt;ptrAltModeContext;</highlight></codeline>
<codeline lineno="333"><highlight class="normal"></highlight></codeline>
<codeline lineno="334"><highlight class="normal"><sp/><sp/><sp/><sp/>if<sp/>(PDSTACK_CALL_MAP(Cy_PdStack_Dpm_SendPdCommand)(ptrPdStackContext,<sp/>CY_PDSTACK_DPM_CMD_SEND_CABLE_RESET,<sp/>NULL,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="335"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Cy_PdAltMode_Usb4_CblRstRecCbk)<sp/>!=<sp/>CY_PDSTACK_STAT_SUCCESS)</highlight></codeline>
<codeline lineno="336"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="337"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(void)TIMER_CALL_MAP(Cy_PdUtils_SwTimer_Start)<sp/>(ptrPdStackContext-&gt;ptrTimerContext,<sp/>ptrPdStackContext,</highlight></codeline>
<codeline lineno="338"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>CY_PDALTMODE_GET_TIMER_ID(ptrPdStackContext,<sp/><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga8ce268202ee29df67f500d14a1273881a49535375901fa7e1420cd491a8cf4b3e" kindref="member">CY_PDALTMODE_VDM_BUSY_TIMER</ref>),</highlight></codeline>
<codeline lineno="339"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a2083b9e4f1976568c605c50a24a67d18" kindref="member">appCblStartDelay</ref>,<sp/>Cy_PdAltMode_Usb4_CblRstRetryCb);</highlight></codeline>
<codeline lineno="340"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="341"><highlight class="normal">}</highlight></codeline>
<codeline lineno="342"><highlight class="normal"></highlight></codeline>
<codeline lineno="343"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga399c1777f494368601cad31a40afca9c" kindref="member">cy_en_pdaltmode_vdm_task_t</ref><sp/><ref refid="group__group__pdaltmode__usb4__functions_1ga7f23fdc6a1750ae95cb311cfe99c0042" kindref="member">Cy_PdAltMode_Usb4_EvalAcceptResp</ref>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext)</highlight></codeline>
<codeline lineno="344"><highlight class="normal">{</highlight></codeline>
<codeline lineno="345"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_stc_pdstack_context_t<sp/>*ptrPdStackContext<sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a34f18ac1a604068a73e013c483d55104" kindref="member">pdStackContext</ref>;</highlight></codeline>
<codeline lineno="346"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_en_pd_sop_t<sp/>sopType<sp/>=<sp/>CY_PD_SOP;</highlight></codeline>
<codeline lineno="347"><highlight class="normal"></highlight></codeline>
<codeline lineno="348"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Remove<sp/>USB4<sp/>pending<sp/>flag<sp/>to<sp/>allow<sp/>VDM<sp/>manager<sp/>handling<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="349"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a1189fb5cced531d9b3d9436abe7d1e25" kindref="member">usb4Flag</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__usb4__enums_1ggaed6a0bdb5fa1306874c9f9dc6703ecd7a709bfd59b76b4df69bfebcf15d2c3c08" kindref="member">CY_PDALTMODE_USB4_NONE</ref>;</highlight></codeline>
<codeline lineno="350"><highlight class="normal"></highlight></codeline>
<codeline lineno="351"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>USB4<sp/>entered<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="352"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a789c5bea31bbce4da60511291047cdac" kindref="member">eudoBuf</ref>.cmdSop<sp/>==<sp/>CY_PD_SOP)</highlight></codeline>
<codeline lineno="353"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="354"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>USB4<sp/>related<sp/>MUX<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="355"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a058a7eddfaa145f9f7353c752a4354e8" kindref="member">usb4UpdatePending</ref><sp/>=<sp/>0x01U;</highlight></codeline>
<codeline lineno="356"><highlight class="normal"></highlight></codeline>
<codeline lineno="357"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>if<sp/>there<sp/>is<sp/>need<sp/>to<sp/>continue<sp/>with<sp/>Discovery<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="358"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight></codeline>
<codeline lineno="359"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a9691ecac8b26767485b91bd4e75996f7" kindref="member">altModesNotSupp</ref><sp/>!=<sp/>0x0U)</highlight></codeline>
<codeline lineno="360"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>TBT<sp/>mode<sp/>only<sp/>(not<sp/>vPro)<sp/>supported,<sp/>then<sp/>do<sp/>not<sp/>resume<sp/>VDM<sp/>Discovery.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="361"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||<sp/>((ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1af22f79436ac72845753147a1dd976224" kindref="member">vdmDiscIdResp</ref>[CY_PD_PRODUCT_TYPE_VDO_1_IDX]<sp/>&amp;<sp/><ref refid="group__group__pdaltmode__common__macros_1ga5ab0ce90891df383749dd53355677426" kindref="member">CY_PDALTMODE_UFP_ALT_MODE_SUPP_MASK</ref>)<sp/>==<sp/><ref refid="group__group__pdaltmode__common__macros_1ga437fa3db89b6ba21b340ccdf69aa67be" kindref="member">CY_PDALTMODE_UFP_TBT_ALT_MODE_SUPP_MASK</ref>)</highlight></codeline>
<codeline lineno="362"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="363"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="364"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9cafdaff6d78ac13c01c80024f4d1c0d1f1" kindref="member">CY_PDALTMODE_VDM_TASK_WAIT</ref>;</highlight></codeline>
<codeline lineno="365"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="366"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="367"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="368"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>SVID<sp/>idx<sp/>to<sp/>zero<sp/>before<sp/>start<sp/>Disc<sp/>SVID<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="369"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a3c5c7944d78609a176c55f7a3f93a7de" kindref="member">svidIdx</ref><sp/><sp/>=<sp/><ref refid="group__group__pdaltmode__common__macros_1ga2cb7840adbf420357dfbb997f0f2b3a3" kindref="member">CY_PDALTMODE_MNGR_NO_DATA</ref>;</highlight></codeline>
<codeline lineno="370"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a5bb8c89879c7b42d425dd78d681095cf" kindref="member">dSvidCnt</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__common__macros_1ga2cb7840adbf420357dfbb997f0f2b3a3" kindref="member">CY_PDALTMODE_MNGR_NO_DATA</ref>;</highlight></codeline>
<codeline lineno="371"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Restart<sp/>Discovery<sp/>flow<sp/>to<sp/>discover<sp/>Alternate<sp/>Modes<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="372"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a7e69c43b3b2dd3eed1c6932869deb63d" kindref="member">vdmEvt</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga53976be265d41463919b3ea93da4cf30abd914a67376582616bd3cd1949b105ca" kindref="member">CY_PDALTMODE_VDM_EVT_RUN</ref>;</highlight></codeline>
<codeline lineno="373"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca72edaaa68587cf25316c845237d32cef" kindref="member">CY_PDALTMODE_VDM_TASK_DISC_SVID</ref>;</highlight></codeline>
<codeline lineno="374"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="375"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="376"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>USB4<sp/>SOP<sp/>or<sp/>SOP&quot;<sp/>should<sp/>be<sp/>sent<sp/>to<sp/>finish<sp/>USB4<sp/>entry<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="377"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a789c5bea31bbce4da60511291047cdac" kindref="member">eudoBuf</ref>.cmdSop<sp/>==<sp/>CY_PD_SOP_PRIME)</highlight></codeline>
<codeline lineno="378"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="379"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sopType<sp/>=<sp/>(ptrPdStackContext-&gt;dpmStat.cblVdo.act_cbl_vdo.sopDp<sp/>!=<sp/>0x0UL)<sp/>?<sp/>CY_PD_SOP_DPRIME<sp/>:<sp/>CY_PD_SOP;</highlight></codeline>
<codeline lineno="380"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="381"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="382"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="383"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Do<sp/>nothing<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="384"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="385"><highlight class="normal"></highlight></codeline>
<codeline lineno="386"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__usb4__functions_1gaca0998c989866cffc03ab22c4e3c5939" kindref="member">Cy_PdAltMode_Usb4_Enter</ref>)(ptrAltModeContext,<sp/>sopType,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="387"><highlight class="normal">}</highlight></codeline>
<codeline lineno="388"><highlight class="normal"></highlight></codeline>
<codeline lineno="389"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga399c1777f494368601cad31a40afca9c" kindref="member">cy_en_pdaltmode_vdm_task_t</ref><sp/><ref refid="group__group__pdaltmode__usb4__functions_1ga0b269ae5eeba2b0f19ea65ecd461d2fc" kindref="member">Cy_PdAltMode_Usb4_EvalFailResp</ref>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext)</highlight></codeline>
<codeline lineno="390"><highlight class="normal">{</highlight></codeline>
<codeline lineno="391"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_stc_pdstack_context_t<sp/>*ptrPdStackContext<sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a34f18ac1a604068a73e013c483d55104" kindref="member">pdStackContext</ref>;</highlight></codeline>
<codeline lineno="392"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga399c1777f494368601cad31a40afca9c" kindref="member">cy_en_pdaltmode_vdm_task_t</ref><sp/>ret<sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9cafdaff6d78ac13c01c80024f4d1c0d1f1" kindref="member">CY_PDALTMODE_VDM_TASK_WAIT</ref>;</highlight></codeline>
<codeline lineno="393"><highlight class="normal"></highlight></codeline>
<codeline lineno="394"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a789c5bea31bbce4da60511291047cdac" kindref="member">eudoBuf</ref>.cmdSop<sp/>==<sp/>CY_PD_SOP)</highlight></codeline>
<codeline lineno="395"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="396"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__usb4__functions_1gaca0998c989866cffc03ab22c4e3c5939" kindref="member">Cy_PdAltMode_Usb4_Enter</ref>)(ptrAltModeContext,<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a789c5bea31bbce4da60511291047cdac" kindref="member">eudoBuf</ref>.cmdSop,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="398"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Send<sp/>cable<sp/>reset<sp/>command<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="399"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(PDSTACK_CALL_MAP(Cy_PdStack_Dpm_SendPdCommand)(ptrPdStackContext,<sp/>CY_PDSTACK_DPM_CMD_SEND_CABLE_RESET,<sp/>NULL,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/>Cy_PdAltMode_Usb4_CblRstRecCbk)<sp/>!=<sp/>CY_PDSTACK_STAT_SUCCESS)</highlight></codeline>
<codeline lineno="400"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="401"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(void)TIMER_CALL_MAP(Cy_PdUtils_SwTimer_Start)<sp/>(ptrPdStackContext-&gt;ptrTimerContext,<sp/>ptrPdStackContext,</highlight></codeline>
<codeline lineno="402"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>CY_PDALTMODE_GET_TIMER_ID(ptrPdStackContext,<sp/><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga8ce268202ee29df67f500d14a1273881a49535375901fa7e1420cd491a8cf4b3e" kindref="member">CY_PDALTMODE_VDM_BUSY_TIMER</ref>),</highlight></codeline>
<codeline lineno="403"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a2083b9e4f1976568c605c50a24a67d18" kindref="member">appCblStartDelay</ref>,<sp/>Cy_PdAltMode_Usb4_CblRstRetryCb);</highlight></codeline>
<codeline lineno="404"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="405"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="406"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="407"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Do<sp/>nothing<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="408"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="409"><highlight class="normal"></highlight></codeline>
<codeline lineno="410"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="411"><highlight class="normal">}</highlight></codeline>
<codeline lineno="412"><highlight class="normal"></highlight></codeline>
<codeline lineno="413"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__usb4__functions_1ga882a4d544ef448e9d0a40e5cfe4a189f" kindref="member">Cy_PdAltMode_Usb4_EnterUsb4RetryCbk</ref><sp/>(cy_timer_id_t<sp/></highlight><highlight class="keywordtype">id</highlight><highlight class="normal">,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*context)</highlight></codeline>
<codeline lineno="414"><highlight class="normal">{</highlight></codeline>
<codeline lineno="415"><highlight class="normal"><sp/><sp/><sp/><sp/>(void)</highlight><highlight class="keywordtype">id</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="416"><highlight class="normal"></highlight></codeline>
<codeline lineno="417"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_stc_pdstack_context_t<sp/>*ptrPdStackContext<sp/>=<sp/>(cy_stc_pdstack_context_t<sp/>*)<sp/>context;</highlight></codeline>
<codeline lineno="418"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext<sp/>=<sp/>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*)ptrPdStackContext-&gt;ptrAltModeContext;</highlight></codeline>
<codeline lineno="419"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Try<sp/>to<sp/>send<sp/>Enter<sp/>USB4<sp/>command<sp/>again.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="420"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1acb352c125c763362864a110417fee400" kindref="member">vdmTask</ref><sp/>=<sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__usb4__functions_1gaca0998c989866cffc03ab22c4e3c5939" kindref="member">Cy_PdAltMode_Usb4_Enter</ref>)(ptrAltModeContext,<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a789c5bea31bbce4da60511291047cdac" kindref="member">eudoBuf</ref>.cmdSop,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="421"><highlight class="normal">}</highlight></codeline>
<codeline lineno="422"><highlight class="normal"></highlight></codeline>
<codeline lineno="423"><highlight class="normal">ATTRIBUTES_ALT_MODE<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__usb4__functions_1gaac5e4e28031a3572808f3e083c523ce2" kindref="member">Cy_PdAltMode_Usb4_EnterRecCbk</ref>(cy_stc_pdstack_context_t<sp/>*ptrPdStackContext,<sp/>cy_en_pdstack_resp_status_t<sp/>status,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>cy_stc_pdstack_pd_packet_t*<sp/>recVdm)</highlight></codeline>
<codeline lineno="424"><highlight class="normal">{</highlight></codeline>
<codeline lineno="425"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext<sp/>=<sp/>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*)ptrPdStackContext-&gt;ptrAltModeContext;</highlight></codeline>
<codeline lineno="426"><highlight class="normal"></highlight></codeline>
<codeline lineno="427"><highlight class="normal"><sp/><sp/><sp/><sp/>if<sp/>(status<sp/>==<sp/>CY_PDSTACK_RES_RCVD)</highlight></codeline>
<codeline lineno="428"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="429"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(recVdm-&gt;hdr.hdr.msgType<sp/>==<sp/>(uint32_t)CY_PDSTACK_REQ_ACCEPT)</highlight></codeline>
<codeline lineno="430"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="431"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Evaluate<sp/>EnterUSB<sp/>Accept<sp/>response<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="432"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a7e69c43b3b2dd3eed1c6932869deb63d" kindref="member">vdmEvt</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga53976be265d41463919b3ea93da4cf30a981de98f344b91aee860d9ae494d0444" kindref="member">CY_PDALTMODE_VDM_EVT_EVAL</ref>;</highlight></codeline>
<codeline lineno="433"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1acb352c125c763362864a110417fee400" kindref="member">vdmTask</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca519562b24f860ad1d56c945d74f4a792" kindref="member">CY_PDALTMODE_VDM_TASK_USB4_TBT</ref>;</highlight></codeline>
<codeline lineno="434"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="435"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(recVdm-&gt;hdr.hdr.msgType<sp/>==<sp/>(uint32_t)CY_PDSTACK_REQ_WAIT)</highlight></codeline>
<codeline lineno="436"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="437"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Increment<sp/>the<sp/>retry<sp/>count<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="438"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1afa8bd4e691dc7692651dc3e4ab6a5274" kindref="member">usb4EnterRetryCount</ref>++;</highlight></codeline>
<codeline lineno="439"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="440"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>Wait<sp/>response<sp/>is<sp/>received,<sp/>retry<sp/>Enter<sp/>USB<sp/>command<sp/>until<sp/>the<sp/>maximum<sp/>retry<sp/>limit.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="441"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1afa8bd4e691dc7692651dc3e4ab6a5274" kindref="member">usb4EnterRetryCount</ref><sp/>&lt;=<sp/><ref refid="group__group__pdaltmode__common__macros_1gae68e9aef6914f6ede19bfb83929ddf04" kindref="member">CY_PDALTMODE_ENTER_USB_RETRY_MAX_LIMIT</ref>)</highlight></codeline>
<codeline lineno="442"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="443"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Retry<sp/>Enter<sp/>USB<sp/>command<sp/>after<sp/>tEnterUSBWait<sp/>=<sp/>150<sp/>ms<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="444"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(void)TIMER_CALL_MAP(Cy_PdUtils_SwTimer_Start)<sp/>(ptrPdStackContext-&gt;ptrTimerContext,<sp/>ptrPdStackContext,</highlight></codeline>
<codeline lineno="445"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>CY_PDALTMODE_GET_TIMER_ID(ptrPdStackContext,<sp/><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga8ce268202ee29df67f500d14a1273881a49535375901fa7e1420cd491a8cf4b3e" kindref="member">CY_PDALTMODE_VDM_BUSY_TIMER</ref>),</highlight></codeline>
<codeline lineno="446"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a09f9b4814cb04b0ebb51c7e81168b930" kindref="member">enterUsb4WaitDelay</ref>,<sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__usb4__functions_1ga882a4d544ef448e9d0a40e5cfe4a189f" kindref="member">Cy_PdAltMode_Usb4_EnterUsb4RetryCbk</ref>));</highlight></codeline>
<codeline lineno="447"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="448"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="449"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="450"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Resume<sp/>VDM<sp/>handling<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="451"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(void)ALT_MODE_CALL_MAP(Cy_PdAltMode_VdmTask_ResumeHandler)(ptrAltModeContext);</highlight></codeline>
<codeline lineno="452"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="453"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="454"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((recVdm-&gt;hdr.hdr.msgType<sp/>==<sp/>(uint32_t)CY_PDSTACK_REQ_REJECT)<sp/>||<sp/>(recVdm-&gt;hdr.hdr.msgType<sp/>==<sp/>(uint32_t)CY_PDSTACK_REQ_NOT_SUPPORTED))</highlight></codeline>
<codeline lineno="455"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="456"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Resume<sp/>VDM<sp/>handling<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="457"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(void)ALT_MODE_CALL_MAP(Cy_PdAltMode_VdmTask_ResumeHandler)(ptrAltModeContext);</highlight></codeline>
<codeline lineno="458"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="459"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="460"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="461"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Do<sp/>nothing<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="462"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="463"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="464"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(status<sp/>&lt;=<sp/>CY_PDSTACK_CMD_FAILED)</highlight></codeline>
<codeline lineno="465"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="466"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Evaluate<sp/>failed<sp/>response<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="467"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a7e69c43b3b2dd3eed1c6932869deb63d" kindref="member">vdmEvt</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga53976be265d41463919b3ea93da4cf30a4b471a5f9cc7707f702e5d2bf6848af1" kindref="member">CY_PDALTMODE_VDM_EVT_FAIL</ref>;</highlight></codeline>
<codeline lineno="468"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1acb352c125c763362864a110417fee400" kindref="member">vdmTask</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca519562b24f860ad1d56c945d74f4a792" kindref="member">CY_PDALTMODE_VDM_TASK_USB4_TBT</ref>;</highlight></codeline>
<codeline lineno="469"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="470"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="471"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="472"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Do<sp/>nothing<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="473"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="474"><highlight class="normal">}</highlight></codeline>
<codeline lineno="475"><highlight class="normal"></highlight></codeline>
<codeline lineno="476"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>cy_en_pdstack_status_t<sp/>Cy_PdAltMode_Usb4_SendEnter(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext)</highlight></codeline>
<codeline lineno="477"><highlight class="normal">{</highlight></codeline>
<codeline lineno="478"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>retVal<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="479"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_en_pdstack_status_t<sp/>stat<sp/>=<sp/>CY_PDSTACK_STAT_FAILURE;</highlight></codeline>
<codeline lineno="480"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_stc_pdstack_context_t<sp/>*ptrPdStackContext<sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a34f18ac1a604068a73e013c483d55104" kindref="member">pdStackContext</ref>;</highlight></codeline>
<codeline lineno="481"><highlight class="normal"></highlight></codeline>
<codeline lineno="482"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a789c5bea31bbce4da60511291047cdac" kindref="member">eudoBuf</ref>.cmdSop<sp/>==<sp/>CY_PD_SOP_PRIME)</highlight></codeline>
<codeline lineno="483"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="484"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Enable<sp/>Vconn<sp/>for<sp/>cable<sp/>if<sp/>required<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="485"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>retVal<sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__functions_1gad52bc510f0fb304eaed0ed9cd6177173" kindref="member">Cy_PdAltMode_VdmTask_InitiateVcsCblDiscovery</ref><sp/>(ptrAltModeContext);</highlight></codeline>
<codeline lineno="486"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="487"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>sending<sp/>message<sp/>to<sp/>EMCA,<sp/>make<sp/>sure<sp/>you<sp/>are<sp/>the<sp/>VConn<sp/>Source<sp/>and<sp/>have<sp/>the<sp/>supply<sp/>turned<sp/>ON.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="488"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a789c5bea31bbce4da60511291047cdac" kindref="member">eudoBuf</ref>.cmdSop<sp/>==<sp/>CY_PD_SOP)<sp/>||<sp/>(retVal<sp/>==<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="489"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="490"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stat<sp/>=<sp/>PDSTACK_CALL_MAP(Cy_PdStack_Dpm_SendPdCommand)(ptrPdStackContext,<sp/>CY_PDSTACK_DPM_CMD_SEND_ENTER_USB,</highlight></codeline>
<codeline lineno="491"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a789c5bea31bbce4da60511291047cdac" kindref="member">eudoBuf</ref>,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__usb4__functions_1gaac5e4e28031a3572808f3e083c523ce2" kindref="member">Cy_PdAltMode_Usb4_EnterRecCbk</ref>));</highlight></codeline>
<codeline lineno="492"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="493"><highlight class="normal"></highlight></codeline>
<codeline lineno="494"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>stat;</highlight></codeline>
<codeline lineno="495"><highlight class="normal">}</highlight></codeline>
<codeline lineno="496"><highlight class="normal"></highlight></codeline>
<codeline lineno="497"><highlight class="normal"><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1ga399c1777f494368601cad31a40afca9c" kindref="member">cy_en_pdaltmode_vdm_task_t</ref><sp/><ref refid="group__group__pdaltmode__usb4__functions_1gaca0998c989866cffc03ab22c4e3c5939" kindref="member">Cy_PdAltMode_Usb4_Enter</ref>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*ptrAltModeContext,<sp/>cy_en_pd_sop_t<sp/>sopType,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>retry)</highlight></codeline>
<codeline lineno="498"><highlight class="normal">{</highlight></codeline>
<codeline lineno="499"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_stc_pdstack_context_t<sp/>*ptrPdStackContext<sp/>=<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a34f18ac1a604068a73e013c483d55104" kindref="member">pdStackContext</ref>;</highlight></codeline>
<codeline lineno="500"><highlight class="normal"></highlight></codeline>
<codeline lineno="501"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_stc_pdstack_dpm_pd_cmd_buf_t<sp/><sp/>*cmd_buf<sp/>=<sp/>&amp;ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a789c5bea31bbce4da60511291047cdac" kindref="member">eudoBuf</ref>;</highlight></codeline>
<codeline lineno="502"><highlight class="normal"><sp/><sp/><sp/><sp/>cy_pd_pd_do_t<sp/>eudo<sp/>=<sp/>{<sp/>.val<sp/>=<sp/>0u,<sp/>};</highlight></codeline>
<codeline lineno="503"><highlight class="normal"></highlight></codeline>
<codeline lineno="504"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>EUDO<sp/>USB<sp/>role<sp/>based<sp/>on<sp/>configuration<sp/>table<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="505"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a5294cf1776a4145b418b06b2e785c474" kindref="member">tbtCfg</ref>-&gt;usb4_supp<sp/>==<sp/>(uint8_t)CY_PDSTACK_USB_ROLE_DRD)</highlight></codeline>
<codeline lineno="506"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="507"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eudo.enterusb_vdo.usb4Drd<sp/>=<sp/>0x01UL;</highlight></codeline>
<codeline lineno="508"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="509"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a5294cf1776a4145b418b06b2e785c474" kindref="member">tbtCfg</ref>-&gt;usb3_supp<sp/>==<sp/>(uint8_t)CY_PDSTACK_USB_ROLE_DRD)</highlight></codeline>
<codeline lineno="510"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="511"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eudo.enterusb_vdo.usb3Drd<sp/>=<sp/>0x01UL;</highlight></codeline>
<codeline lineno="512"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="513"><highlight class="normal"></highlight></codeline>
<codeline lineno="514"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>USB<sp/>Host<sp/>supported<sp/>parameters<sp/>based<sp/>on<sp/>configuration<sp/>table<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="515"><highlight class="normal"><sp/><sp/><sp/><sp/>eudo.val<sp/>|=<sp/>((ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a0032d80be91c77ede3050a07d3867390" kindref="member">altModeAppStatus</ref>-&gt;<ref refid="structcy__stc__pdaltmode__status__t_1a381fef34f8f087cb28e2fe109ddb52b2" kindref="member">customHpiHostCapControl</ref><sp/>&amp;<sp/>0x0FUL)<sp/>&lt;&lt;<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__macros_1gacae66bfedf5561562261048fc4e7914d" kindref="member">CY_PDALTMODE_VDMTASK_USB4_EUDO_HOST_PARAM_SHIFT</ref>);</highlight></codeline>
<codeline lineno="516"><highlight class="normal"></highlight></codeline>
<codeline lineno="517"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>STORE_DETAILS_OF_HOST</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="518"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(ptrPdStackContext-&gt;port<sp/>==<sp/>TYPEC_PORT_1_IDX)</highlight></codeline>
<codeline lineno="519"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="520"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cy_pd_pd_do_t<sp/>temp_enter_usb_param;</highlight></codeline>
<codeline lineno="521"><highlight class="normal"></highlight></codeline>
<codeline lineno="522"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*hostContext<sp/>=</highlight></codeline>
<codeline lineno="523"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(<ref refid="structcy__stc__pdaltmode__context__t" kindref="compound">cy_stc_pdaltmode_context_t</ref><sp/>*)<sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a2c44432dce2d2c8128d7338825b18526" kindref="member">hostDetails</ref>-&gt;<ref refid="structcy__stc__pdaltmode__host__details__t_1aba2258e1dac9875caf32c8444493d7e9" kindref="member">usAltModeContext</ref>;</highlight></codeline>
<codeline lineno="524"><highlight class="normal"></highlight></codeline>
<codeline lineno="525"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>temp_enter_usb_param.val<sp/>=<sp/>hostContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a2c44432dce2d2c8128d7338825b18526" kindref="member">hostDetails</ref>-&gt;<ref refid="structcy__stc__pdaltmode__host__details__t_1a551be087783d2ce7eb7c8febec3c298c" kindref="member">hostEudo</ref>.val;</highlight></codeline>
<codeline lineno="526"><highlight class="normal"></highlight></codeline>
<codeline lineno="527"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="group__group__pdaltmode__intel__functions_1ga8d3778c04e8e2f3a5d0d406b89fe5c26" kindref="member">Cy_PdAltMode_HostDetails_IsUsb4Connected</ref>(ptrAltModeContext)<sp/>==<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="528"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="529"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eudo.enterusb_vdo.hostDpSupp<sp/>=<sp/>temp_enter_usb_param.enterusb_vdo.hostDpSupp;</highlight></codeline>
<codeline lineno="530"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eudo.enterusb_vdo.hostPcieSupp<sp/>=<sp/>temp_enter_usb_param.enterusb_vdo.hostPcieSupp;</highlight></codeline>
<codeline lineno="531"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eudo.enterusb_vdo.hostTbtSupp<sp/>=<sp/>temp_enter_usb_param.enterusb_vdo.hostTbtSupp;</highlight></codeline>
<codeline lineno="532"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eudo.enterusb_vdo.hostPresent<sp/>=<sp/>temp_enter_usb_param.enterusb_vdo.hostPresent;</highlight></codeline>
<codeline lineno="533"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eudo.enterusb_vdo.usbMode<sp/>=<sp/>temp_enter_usb_param.enterusb_vdo.usbMode;</highlight></codeline>
<codeline lineno="534"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="535"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="536"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="537"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eudo.enterusb_vdo.hostDpSupp<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="538"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eudo.enterusb_vdo.hostPcieSupp<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="539"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eudo.enterusb_vdo.hostTbtSupp<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="540"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eudo.enterusb_vdo.hostPresent<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="541"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eudo.enterusb_vdo.usbMode<sp/>=<sp/><ref refid="group__group__pdaltmode__common__macros_1ga375cd7240912036c0da6d50e5867bc19" kindref="member">CY_PDALTMODE_USB_MODE_USB4</ref>;</highlight></codeline>
<codeline lineno="542"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="543"><highlight class="normal"></highlight></codeline>
<codeline lineno="544"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*eudo.enterusb_vdo.hostDpSupp<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="545"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eudo.enterusb_vdo.hostPcieSupp<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="546"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eudo.enterusb_vdo.hostTbtSupp<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="547"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eudo.enterusb_vdo.hostPresent<sp/>=<sp/>1;*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="548"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="549"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>STORE_DETAILS_OF_HOST<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="550"><highlight class="normal"></highlight></codeline>
<codeline lineno="551"><highlight class="normal"><sp/><sp/><sp/><sp/>ALT_MODE_CALL_MAP(<ref refid="group__group__pdaltmode__usb4__functions_1gab913f967042a187bd02f9b22a1fe8223" kindref="member">Cy_PdAltMode_Usb4_GetEudo</ref>)(ptrAltModeContext)-&gt;val<sp/>|=<sp/>eudo.val;</highlight></codeline>
<codeline lineno="552"><highlight class="normal"></highlight></codeline>
<codeline lineno="553"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Fill<sp/>dpm<sp/>buffer<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="554"><highlight class="normal"><sp/><sp/><sp/><sp/>cmd_buf-&gt;cmdSop<sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>sopType;</highlight></codeline>
<codeline lineno="555"><highlight class="normal"><sp/><sp/><sp/><sp/>cmd_buf-&gt;noOfCmdDo<sp/><sp/><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__macros_1gae4e2aa15a2cf04e0d55157a9d86b51bd" kindref="member">CY_PDALTMODE_MNGR_VDO_START_IDX</ref>;</highlight></codeline>
<codeline lineno="556"><highlight class="normal"><sp/><sp/><sp/><sp/>cmd_buf-&gt;timeout<sp/><sp/><sp/><sp/><sp/>=<sp/>ptrPdStackContext-&gt;senderRspTimeout;</highlight></codeline>
<codeline lineno="557"><highlight class="normal"></highlight></codeline>
<codeline lineno="558"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!retry)</highlight></codeline>
<codeline lineno="559"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="560"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>MUX<sp/>to<sp/>safe<sp/>state<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="561"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(void)<ref refid="group__group__pdaltmode__alt__mode__hw__functions_1ga9c8a69158389bc9aa1b7825bed6bf693" kindref="member">Cy_PdAltMode_HW_SetMux</ref>(ptrAltModeContext,<sp/><ref refid="group__group__pdaltmode__alt__mode__hw__enums_1gga6e2d96963afcf43ec5dfe3d5a18d6bc6a9821c57d38fa26bbb56d05fa8de673eb" kindref="member">CY_PDALTMODE_MUX_CONFIG_SAFE</ref>,<sp/><ref refid="group__group__pdaltmode__common__macros_1ga2cb7840adbf420357dfbb997f0f2b3a3" kindref="member">CY_PDALTMODE_MNGR_NO_DATA</ref>,<sp/><ref refid="group__group__pdaltmode__common__macros_1ga2cb7840adbf420357dfbb997f0f2b3a3" kindref="member">CY_PDALTMODE_MNGR_NO_DATA</ref>);</highlight></codeline>
<codeline lineno="562"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="563"><highlight class="normal"></highlight></codeline>
<codeline lineno="564"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>USB4<sp/>send<sp/>flag<sp/>state<sp/>and<sp/>set<sp/>VDM<sp/>manager<sp/>event<sp/>to<sp/>run<sp/>state<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="565"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a1189fb5cced531d9b3d9436abe7d1e25" kindref="member">usb4Flag</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__usb4__enums_1ggaed6a0bdb5fa1306874c9f9dc6703ecd7acbf82862fab255faa7be4e1f04ab1dfa" kindref="member">CY_PDALTMODE_USB4_SEND_USB4</ref>;</highlight></codeline>
<codeline lineno="566"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrAltModeContext-&gt;<ref refid="structcy__stc__pdaltmode__context__t_1a33d69fea0c550c5b43833b24040699f2" kindref="member">vdmStat</ref>-&gt;<ref refid="structcy__stc__pdaltmode__vdm__task__status__t_1a7e69c43b3b2dd3eed1c6932869deb63d" kindref="member">vdmEvt</ref><sp/>=<sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga53976be265d41463919b3ea93da4cf30abd914a67376582616bd3cd1949b105ca" kindref="member">CY_PDALTMODE_VDM_EVT_RUN</ref>;</highlight></codeline>
<codeline lineno="567"><highlight class="normal"></highlight></codeline>
<codeline lineno="568"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__group__pdaltmode__vdm__alt__mode__manager__enums_1gga399c1777f494368601cad31a40afca9ca519562b24f860ad1d56c945d74f4a792" kindref="member">CY_PDALTMODE_VDM_TASK_USB4_TBT</ref>;</highlight></codeline>
<codeline lineno="569"><highlight class="normal">}</highlight></codeline>
<codeline lineno="570"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>CY_PD_USB4_SUPPORT_ENABLE<sp/>*/</highlight><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="571"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>((DFP_ALT_MODE_SUPP)<sp/>||<sp/>(UFP_ALT_MODE_SUPP))<sp/>*/</highlight><highlight class="preprocessor"></highlight></codeline>
    </programlisting>
    <location file="cy_pdaltmode_usb4.c"/>
  </compounddef>
</doxygen>
